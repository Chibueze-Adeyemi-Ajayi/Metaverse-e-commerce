{"version":3,"sources":["../../../Users/Jilo/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/process/browser.js","libs/three.js","../../../Users/Jilo/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","THREE","REVISION","Math","sign","undefined","x","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","NoShading","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","MultiplyOperation","MixOperation","AddOperation","UVMapping","CubeReflectionMapping","CubeRefractionMapping","SphericalReflectionMapping","SphericalRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","Color","color","setRGB","set","constructor","r","g","b","value","copy","setHex","setStyle","hex","floor","setHSL","h","s","l","hue2rgb","p","q","t","style","test","exec","min","parseInt","ColorKeywords","copyGammaToLinear","copyLinearToGamma","sqrt","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","toString","slice","getHSL","optionalTarget","hsl","max","hue","saturation","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","c","fromArray","toArray","clone","Quaternion","y","z","w","_x","_y","_z","_w","onChangeCallback","quaternion","setFromEuler","euler","update","Euler","c1","cos","c2","c3","s1","sin","s2","s3","order","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","m","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","v1","EPS","vFrom","vTo","Vector3","dot","abs","crossVectors","normalize","inverse","conjugate","v","lengthSq","console","warn","multiplyQuaternions","a","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVector3","vector","applyQuaternion","slerp","qb","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","offset","onChange","callback","qa","qm","Vector2","setX","setY","setComponent","index","getComponent","addVectors","sub","subVectors","divide","divideScalar","scalar","invScalar","clamp","clampScalar","minVal","maxVal","ceil","round","roundToZero","negate","distanceTo","distanceToSquared","dx","dy","setLength","oldLength","setZ","multiplyVectors","applyEuler","error","applyAxisAngle","applyMatrix3","applyMatrix4","applyProjection","d","qx","qy","qz","qw","ix","iy","iz","iw","project","matrix","camera","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","unproject","transformDirection","lengthManhattan","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","theta","dz","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","setFromMatrixPosition","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","setFromMatrixColumn","sx","sy","sz","me","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","PI","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","atan2","setFromQuaternion","sqx","sqy","sqz","sqw","reorder","newOrder","Line3","start","end","line","center","result","distanceSq","distance","at","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","startEnd_startP","closestPointToPoint","Box2","Infinity","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","box","empty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","isIntersectionBox","clampPoint","distanceToPoint","clampedPoint","intersect","union","translate","Box3","setFromObject","object","scope","updateMatrixWorld","traverse","node","geometry","Geometry","vertices","BufferGeometry","attributes","positions","getBoundingSphere","Sphere","radius","Matrix3","Float32Array","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","multiplyVector3Array","applyToVector3Array","j","determinant","f","throwOnInvertible","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","extractPosition","copyPosition","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","setRotationFromQuaternion","makeRotationFromQuaternion","x2","y2","z2","wx","wy","wz","lookAt","eye","target","up","n","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","multiplyVector4","rotateAxis","crossVector","getPosition","setPosition","rotateX","rotateY","rotateZ","rotateByAxis","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","position","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","ymax","tan","degToRad","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToSegment","v0","optionalPointOnRay","optionalPointOnSegment","segCenter","segDir","segExtent","diff","a01","b0","b1","s0","sqrDist","extDet","invDet","isIntersectionSphere","sphere","intersectSphere","tca","d2","radius2","thc","t0","t1","isIntersectionPlane","plane","distToPoint","denominator","distanceToPlane","constant","intersectPlane","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","optionalCenter","maxRadiusSq","intersectsSphere","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","computeBoundingSphere","negRadius","intersectsBox","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","v2","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","isIntersectionLine","startSign","endSign","intersectLine","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","generateUUID","chars","split","uuid","rnd","random","join","clampBottom","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degreeToRadiansFactor","degrees","radToDeg","radianToDegreesFactor","radians","isPowerOfTwo","Spline","v3","intPoint","weight","w2","w3","pa","pb","pc","pd","initFromArray","getPoint","k","interpolate","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","linearDistance","realDistance","sampling","newpoints","sl","t2","t3","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","Clock","autoStart","startTime","oldTime","elapsedTime","running","self","performance","now","Date","stop","getElapsedTime","getDelta","newTime","EventDispatcher","addEventListener","hasEventListener","removeEventListener","dispatchEvent","type","listener","_listeners","indexOf","listenerArray","splice","event","Raycaster","params","Sprite","Mesh","PointCloud","threshold","LOD","Line","descSort","intersectObject","raycaster","intersects","recursive","raycast","children","precision","linePrecision","sort","intersectObjects","objects","log","Object3D","Object","defineProperty","Object3DIdCount","parent","DefaultUp","rotation","onRotationChange","onQuaternionChange","defineProperties","enumerable","renderDepth","rotationAutoUpdate","matrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","userData","eulerOrder","useQuaternion","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","rotateOnAxis","q1","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getChildByName","getObjectByName","getObjectById","id","child","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","updateMatrix","force","toJSON","output","metadata","generator","geometries","parseGeometry","json","materials","parseMaterial","material","parseObject","data","JSON","stringify","PerspectiveCamera","OrthographicCamera","AmbientLight","DirectionalLight","intensity","PointLight","SpotLight","exponent","HemisphereLight","groundColor","parse","Projector","projectVector","unprojectVector","pickingRay","Face3","materialIndex","vertexNormals","vertexColors","vertexTangents","face","Face4","BufferAttribute","itemSize","needsUpdate","copyAt","index1","attribute","index2","setXY","setXYZ","setXYZW","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","GeometryIdCount","attributesKeys","drawcalls","offsets","boundingBox","addAttribute","keys","getAttribute","addDrawCall","count","indexOffset","fromGeometry","settings","faces","faceVertexUvs","hasFaceVertexUv","hasFaceVertexNormals","normals","colors","uvs","i3","na","nb","nc","fc","vca","vcb","vcc","uva","uvb","uvc","computeBoundingBox","bb","isNaN","computeFaceNormals","computeVertexNormals","vA","vB","vC","pA","pB","pC","cb","ab","indices","jl","normalizeNormals","computeTangents","uv","nVertices","tangent","tangents","tan1","tan2","uvA","uvB","uvC","x1","y1","z1","sdir","tdir","handleTriangle","iA","iB","iC","tmp2","n2","handleVertex","computeOffsets","indexBufferSize","verticesCount","facesCount","sortedIndices","Uint16Array","indexPtr","vertexPtr","duplicatedVertices","newVerticeMaps","faceVertices","Int32Array","vertexMap","revVertexMap","findex","vo","vid","faceMax","new_offset","new_vid","reorderBuffers","merge","indexBuffer","indexMap","vertexCount","sortedAttributes","attr","sourceArray","attrArray","attrSize","sortedAttr","numItems","key","typeArray","sourceAttr","dispose","morphTargets","morphColors","morphNormals","skinWeights","skinIndices","lineDistances","hasTangents","dynamic","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","tangentsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","fromBufferGeometry","tempNormals","tempUVs","addFace","fl","areaWeighted","vl","vD","db","dc","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","vertexIndex","context","ua","ub","uc","faceIndex","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","uvs2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeVertices","verticesMap","unique","changes","precisionPoints","pow","faceIndicesToRemove","dupIndex","idx","parameters","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","enabled","hash","Camera","matrixWorldInverse","create","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLRenderTargetCube","format","magFilter","minFilter","updateCubeMap","renderer","scene","generateMipmaps","activeCubeFace","render","zoom","updateProjectionMatrix","cx","cy","setLens","focalLength","frameHeight","atan","setViewOffset","fullWidth","fullHeight","width","height","Light","light","AreaLight","constantAttenuation","linearAttenuation","quadraticAttenuation","onlyShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowCascade","shadowCascadeOffset","shadowCascadeCount","shadowCascadeBias","shadowCascadeWidth","shadowCascadeHeight","shadowCascadeNearZ","shadowCascadeFarZ","shadowCascadeArray","shadowMap","shadowMapSize","shadowCamera","shadowMatrix","skyColor","shadowCameraFov","Cache","files","file","get","clear","Loader","showStatus","statusDomElement","addStatusElement","imageLoader","ImageLoader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","document","createElement","fontSize","textAlign","background","padding","zIndex","innerHTML","updateProgress","progress","message","loaded","toFixed","extractUrlBase","url","parts","pop","initMaterials","texturePath","createMaterial","needsTangents","ShaderMaterial","nearest_pow2","LN2","create_texture","where","sourceFile","repeat","wrap","anisotropy","fullPath","texture","loader","Handlers","load","Texture","image","canvas","getContext","drawImage","wrapS","wrapT","wrapMap","rgb2hex","rgb","mtype","mpars","opacity","map","lightMap","normalMap","bumpMap","wireframe","shading","toLowerCase","blending","transparent","depthTest","depthWrite","flipSided","side","doubleSided","colorDiffuse","DbgColor","colorSpecular","specular","colorAmbient","ambient","colorEmissive","emissive","transparency","specularCoef","shininess","mapDiffuse","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapLight","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapBump","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormal","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecular","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapAlpha","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","mapBumpScale","bumpScale","shader","ShaderLib","uniforms","UniformsUtils","mapNormalFactor","specularMap","fragmentShader","vertexShader","lights","fog","DbgName","handlers","regex","XHRLoader","manager","cache","DefaultLoadingManager","onLoad","onProgress","onError","cached","request","XMLHttpRequest","open","response","itemEnd","responseType","send","itemStart","setResponseType","setCrossOrigin","src","JSONLoader","withCredentials","loadAjaxJSON","callbackProgress","xhr","onreadystatechange","readyState","DONE","status","responseText","LOADING","getResponseHeader","HEADERS_RECEIVED","parseModel","parseSkin","parseMorphing","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","influencesPerVertex","bones","animation","animations","dstVertices","srcVertices","cl","dstColors","srcColors","LoadingManager","BufferGeometryLoader","text","typedArray","MaterialLoader","ObjectLoader","parseGeometries","parseMaterials","geometryLoader","bufferGeometryLoader","PlaneGeometry","widthSegments","heightSegments","BoxGeometry","depth","depthSegments","CircleGeometry","segments","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","IcosahedronGeometry","detail","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","heightScale","Scene","Group","TextureLoader","CompressedTextureLoader","_parser","images","CompressedTexture","loadTexture","buffer","texDatas","mipmaps","mipmapCount","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","alphaTest","overdraw","setValues","values","newValue","currentValue","Number","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshNormalMaterial","MeshDepthMaterial","SpriteMaterial","LineBasicMaterial","linewidth","linecap","linejoin","LineDashedMaterial","dashSize","gapSize","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","wrapAround","wrapRGB","metal","normalScale","MeshFaceMaterial","PointCloudMaterial","sizeAttenuation","ParticleBasicMaterial","ParticleSystemMaterial","defines","defaultAttributeValues","index0AttributeName","RawShaderMaterial","mapping","TextureIdCount","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","_needsUpdate","onUpdate","CubeTexture","DataTexture","VideoTexture","video","requestAnimationFrame","HAVE_ENOUGH_DATA","sortParticles","inverseMatrix","localThreshold","testPoint","rayPointDistance","intersectPoint","distanceToRay","oi","ol","pointCount","ParticleSystem","mode","LineStrip","LinePieces","precisionSq","nbVertices","interSegment","interRay","step","distSq","updateMorphTargets","morphTargetBase","morphTargetForcedOrder","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","intersectionPoint","isFaceMaterial","objectMaterials","morphInfluences","tl","influence","targets","Bone","belongsToSkin","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","bone","offsetMatrix","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","bind","skeleton","sw","MorphAnimMesh","duration","mirroredLoop","time","lastKeyframe","currentKeyframe","directionBackwards","setFrameRange","startKeyframe","endKeyframe","setDirectionForward","setDirectionBackward","parseAnimations","firstAnimation","pattern","morph","match","label","num","setAnimationLabel","playAnimation","fps","updateAnimation","frameTime","keyframe","mix","interpolateTargets","influences","addLevel","getObjectForDistance","matrixPosition","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","common","bump","normalmap","particle","shadowmap","WebGLRenderer","_canvas","_context","_precision","_alpha","_depth","_stencil","stencil","_antialias","antialias","_premultipliedAlpha","premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_logarithmicDepthBuffer","logarithmicDepthBuffer","_clearColor","_clearAlpha","_webglObjects","_webglObjectsImmediate","opaqueObjects","transparentObjects","sprites","domElement","devicePixelRatio","autoClear","autoClearColor","autoClearDepth","autoClearStencil","sortObjects","gammaInput","gammaOutput","shadowMapEnabled","shadowMapType","shadowMapCullFace","shadowMapDebug","shadowMapCascade","maxMorphTargets","maxMorphNormals","autoScaleCubemaps","info","memory","programs","textures","calls","_this","_programs","_currentProgram","_currentFramebuffer","_currentMaterialId","_currentGeometryGroupHash","_currentCamera","_usedTextureUnits","_oldDoubleSided","_oldFlipSided","_oldBlending","_oldBlendEquation","_oldBlendSrc","_oldBlendDst","_oldDepthTest","_oldDepthWrite","_oldPolygonOffset","_oldPolygonOffsetFactor","_oldPolygonOffsetUnits","_oldLineWidth","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_currentWidth","_currentHeight","_newAttributes","Uint8Array","_enabledAttributes","_frustum","_projScreenMatrix","_projScreenMatrixPS","_vector3","_direction","_lightsNeedUpdate","_lights","directional","distances","spot","directions","anglesCos","exponents","hemi","skyColors","groundColors","_gl","getShaderPrecisionFormat","extensions","WebGLExtensions","setDefaultGLState","clearColor","clearDepth","clearStencil","enable","DEPTH_TEST","depthFunc","LEQUAL","frontFace","CCW","cullFace","BACK","CULL_FACE","BLEND","FUNC_ADD","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","viewport","_maxTextures","MAX_TEXTURE_IMAGE_UNITS","_maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","_maxTextureSize","MAX_TEXTURE_SIZE","_maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","_supportsVertexTextures","_supportsBoneTextures","_vertexShaderPrecisionHighpFloat","VERTEX_SHADER","HIGH_FLOAT","_vertexShaderPrecisionMediumpFloat","MEDIUM_FLOAT","_vertexShaderPrecisionLowpFloat","LOW_FLOAT","_fragmentShaderPrecisionHighpFloat","FRAGMENT_SHADER","_fragmentShaderPrecisionMediumpFloat","_fragmentShaderPrecisionLowpFloat","getCompressedTextureFormats","formats","COMPRESSED_TEXTURE_FORMATS","highpAvailable","mediumpAvailable","shadowMapPlugin","ShadowMapPlugin","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","supportsVertexTextures","supportsFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","getMaxAnisotropy","extension","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","setSize","updateStyle","setViewport","setScissor","scissor","enableScissorTest","SCISSOR_TEST","disable","setClearColor","setClearColorHex","getClearColor","getClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","setRenderTarget","resetGLState","createParticleBuffers","__webglVertexBuffer","createBuffer","__webglColorBuffer","createLineBuffers","__webglLineDistanceBuffer","createMeshBuffers","geometryGroup","__webglNormalBuffer","__webglTangentBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","numMorphTargets","__webglMorphTargetsBuffers","numMorphNormals","__webglMorphNormalsBuffers","onObjectRemoved","removeObject","onGeometryDispose","deallocateGeometry","onTextureDispose","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","onMaterialDispose","deallocateMaterial","deleteBuffers","buffers","deleteBuffer","__webglCustomAttributesList","__webglInit","geometryGroupsList","geometryGroups","__webglTextureCube","deleteTexture","__webglTexture","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglRenderbuffer","program","programInfo","deleteProgram","usedTimes","newPrograms","initCustomAttributes","nvertices","__webglInitialized","createUniqueBuffers","belongsToAttribute","initParticleBuffers","__vertexArray","__colorArray","__sortArray","__webglParticleCount","initLineBuffers","__lineDistanceArray","__webglLineCount","initMeshBuffers","faces3","ntris","nlines","getBufferMaterial","__normalArray","__uvArray","__uv2Array","__tangentArray","__skinIndexArray","__skinWeightArray","UintArray","Uint32Array","__typeArray","__faceArray","__lineArray","__morphTargetsArrays","__morphNormalsArrays","__webglFaceCount","originalAttribute","property","__original","__inittedArrays","materialNeedsSmoothNormals","setParticleBuffers","hint","vertexArray","colorArray","sortArray","dirtyVertices","dirtyElements","dirtyColors","customAttributes","ca","cal","customAttribute","numericalSort","boundTo","bindBuffer","ARRAY_BUFFER","bufferData","setLineBuffers","dl","lineDistanceArray","dirtyLineDistances","setMeshBuffers","needsSmoothNormals","faceColor","uv2","v4","t4","n1","n3","n4","sw1","sw2","sw3","sw4","si1","si2","si3","si4","sa1","sa2","sa3","sa4","sb1","sb2","sb3","sb4","vn","uvi","uv2i","vk","vkl","vka","nka","chf","offset_uv","offset_uv2","offset_face","offset_normal","offset_tangent","offset_line","offset_color","offset_skin","offset_morphTarget","offset_custom","offset_customSrc","uvArray","uv2Array","normalArray","tangentArray","skinIndexArray","skinWeightArray","morphTargetsArrays","morphNormalsArrays","faceArray","lineArray","dirtyUvs","dirtyNormals","dirtyTangents","dirtyMorphTargets","morphTargetsNeedUpdate","chunk_faces3","obj_faces","obj_uvs","obj_uvs2","obj_colors","obj_skinIndices","obj_skinWeights","ELEMENT_ARRAY_BUFFER","pp","setDirectBuffers","bufferType","STATIC_DRAW","renderBufferImmediate","initAttributes","hasPositions","hasNormals","hasUvs","__webglUvBuffer","hasColors","positionArray","DYNAMIC_DRAW","enableAttribute","vertexAttribPointer","FLOAT","nx","ny","nz","nax","nbx","ncx","nay","nby","ncy","naz","nbz","ncz","disableUnusedAttributes","drawArrays","TRIANGLES","setupVertexAttributes","startIndex","geometryAttributes","programAttributes","programAttributesKeys","programAttribute","geometryAttribute","vertexAttrib2fv","vertexAttrib3fv","renderBufferDirect","setProgram","updateBuffers","wireframeBit","geometryHash","LINES","UNSIGNED_INT","UNSIGNED_SHORT","drawElements","POINTS","LINE_STRIP","setLineWidth","renderBuffer","geometryGroupHash","setupMorphTargets","skinIndex","skinWeight","lineDistance","enableVertexAttribArray","disableVertexAttribArray","numSupportedMorphTargets","__webglMorphTargetInfluences","activeInfluenceIndices","numSupportedMorphNormals","influenceIndex","uniform1fv","painterSortStable","reversePainterSortStable","forceClear","projectObject","webglObject","setupMatrices","unrollImmediateBufferMaterial","setBlending","setDepthTest","setDepthWrite","setPolygonOffset","renderObjects","renderObjectsImmediate","updateRenderTargetMipmap","initObject","webglObjects","updateObject","unrollBufferMaterial","renderList","useBlending","setMaterialFaces","materialType","renderImmediateObject","immediateRenderCallback","globject","opaque","_modelViewMatrix","_normalMatrix","initGeometryGroups","__webglActive","addBuffer","ImmediateRenderObject","addBufferImmediate","geometryGroupCounter","makeGroups","usesFaceMaterial","maxVerticesInGroup","groupHash","hash_map","group","groups","groupsList","counter","addBuffers","objlist","customAttributesDirty","areCustomAttributesDirty","clearCustomAttributes","removeInstances","o","initMaterial","shaderID","__webglShader","maxLightCount","allocateLights","maxShadows","allocateShadows","maxBones","allocateBones","useFog","fogExp","maxDirLights","maxPointLights","maxSpotLights","maxHemiLights","code","pl","WebGLProgram","base","uniformsList","location","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","useProgram","uniformMatrix4fv","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","refreshUniformsFog","setupLights","refreshUniformsLights","markUniformsLightsNeedsUpdate","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsParticle","refreshUniformsPhong","refreshUniformsLambert","mNear","mFar","_shadowPass","refreshUniformsShadow","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","diffuse","uvScaleMap","offsetRepeat","flipEnvMap","useRefract","totalSize","psColor","fogColor","fogNear","fogFar","fogDensity","ambientLightColor","directionalLightColor","directionalLightDirection","pointLightColor","pointLightPosition","pointLightDistance","spotLightColor","spotLightPosition","spotLightDistance","spotLightDirection","spotLightAngleCos","spotLightExponent","hemisphereLightSkyColor","hemisphereLightGroundColor","hemisphereLightDirection","boolean","modelViewMatrix","uniformMatrix3fv","uniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform2fv","uniform3fv","uniform4fv","_array","setCubeTexture","setCubeTextureDynamic","setColorGamma","intensitySq","setColorLinear","ll","zlights","dirColors","dirPositions","pointColors","pointPositions","pointDistances","spotColors","spotPositions","spotDistances","spotDirections","spotAnglesCos","spotExponents","hemiSkyColors","hemiGroundColors","hemiPositions","dirLength","pointLength","spotLength","hemiLength","dirCount","spotCount","hemiCount","dirOffset","pointOffset","spotOffset","hemiOffset","setFaceCulling","frontFaceDirection","CW","FRONT","FRONT_AND_BACK","depthMask","lineWidth","polygonoffset","factor","units","POLYGON_OFFSET_FILL","ONE","ZERO","ONE_MINUS_SRC_COLOR","SRC_COLOR","blendEquationSeparate","blendFuncSeparate","paramThreeToGL","setTextureParameters","textureType","isImagePowerOfTwo","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__oldAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","uploadTexture","createTexture","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","clampToMaxSize","glFormat","glType","mipmap","texImage2D","compressedTexImage2D","generateMipmap","slot","activeTexture","TEXTURE0","maxSize","TEXTURE_CUBE_MAP","isCompressed","isDataTexture","cubeImage","TEXTURE_CUBE_MAP_POSITIVE_X","setupFrameBuffer","framebuffer","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setupRenderBuffer","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","isCube","isTargetPowerOfTwo","createFramebuffer","createRenderbuffer","shareDepthFrom","vx","vy","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","INT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","MIN_EXT","MAX_EXT","nVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","nVertexMatrices","dirLights","pointLights","spotLights","hemiLights","addPrePlugin","addPostPlugin","updateShadowMap","WebGLRenderTarget","options","gl","getExtension","programIdCount","generateDefines","chunk","cacheUniformLocations","identifiers","getUniformLocation","cacheAttributeLocations","getAttribLocation","shadowMapTypeDefine","customDefines","createProgram","prefix_vertex","prefix_fragment","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","VALIDATE_STATUS","getError","getProgramInfoLog","deleteShader","addLineNumbers","string","lines","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","flares","vertexBuffer","elementBuffer","hasVertexTexture","tempTexture","occlusionTexture","init","renderType","occlusionMap","screenPosition","viewportWidth","viewportHeight","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","TEXTURE1","copyTexImage2D","sprite","prefix","_renderer","_depthMaterial","_depthMaterialMorph","_depthMaterialSkin","_depthMaterialMorphSkin","_min","_max","_matrixPosition","_renderList","depthShader","depthUniforms","virtualLight","createVirtualLight","originalCamera","gyro","Gyroscope","updateVirtualLight","shadowFilter","pars","cameraHelper","CameraHelper","isVirtual","updateShadowCamera","objectMaterial","useMorphing","useSkinning","getObjectMaterial","customDepthMaterial","clearAlpha","cascade","pointsWorld","pointsFrustum","nearZ","farZ","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","GeometryUtils","geometry1","geometry2","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","getNormalMap","subtract","getImageData","imageData","createImageData","ly","uy","lx","ux","num_points","putImageData","generateDataTexture","SceneUtils","createMultiMaterialObject","detach","attach","FontUtils","divisions","getFace","loadFace","family","familyName","ThreeFont","cssFontWeight","cssFontStyle","drawText","characterPts","allPts","resolution","String","fontPaths","path","Path","ret","extractGlyphPoints","paths","pts","outline","action","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","glyph","glyphs","_cachedOutline","moveTo","lineTo","quadraticCurveTo","Shape","Utils","bezierCurveTo","b3","ha","generateShapes","curveSegments","font","shapes","toShapes","namespace","EPSILON","contour","verts","vertIndices","nv","snip","px","py","aX","aY","bX","bY","cX","cY","apx","apy","bpx","bpy","cCROSSap","bCROSScp","aCROSSbp","Triangulate","_typeface_js","typeface_js","Audio","source","createBufferSource","gain","createGain","connect","destination","panner","createPanner","onload","decodeAudioData","setLoop","loop","setRefDistance","refDistance","setRolloffFactor","rolloffFactor","AudioListener","window","AudioContext","webkitAudioContext","orientation","velocity","positionPrev","setOrientation","setVelocity","Curve","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","lengths","getLengths","__arcLengthDivisions","cacheArcLengths","current","last","sum","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","vec","getTangentAt","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h00","h10","h01","h11","getPointFunc","CurvePath","curves","bends","autoClose","curve","checkConnection","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","maxX","maxY","maxZ","minX","minY","minZ","NEGATIVE_INFINITY","POSITIVE_INFINITY","createPointsGeometry","createGeometry","createSpacedPointsGeometry","addWrapPath","bendpath","getTransformedPoints","oldPts","getWrapPoints","getTransformedSpacedPoints","bounds","oldX","oldY","xNorm","pathPt","translationObject","quaternionObject","scaleObject","translationWorld","quaternionWorld","scaleWorld","actions","fromPoints","PathActions","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","BEZIER_CURVE_TO","CSPLINE_THRU","ARC","ELLIPSE","vectors","vlen","lastargs","x0","y0","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","EllipseCurve","lastPoint","closedPath","useSpacedPoints","item","spts","spline","deltaAngle","tdivisions","isCCW","noHoles","extractSubpaths","inActions","subPaths","lastPath","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","isClockWise","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambigious","toChange","sIdx","sLen","sh","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","hole","tmpHoles","holes","extrude","extruded","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","getSpacedPointsHoles","extractAllPoints","shape","extractPoints","extractAllSpacedPoints","triangulateShape","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","removeHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","nextIdx","intersection","indepHoles","intersectsHoleEdge","ihIdx","chkHole","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","failedCuts","tmpShape1","tmpShape2","tmpHole1","tmpHole2","hl","minShapeIndex","h2","allPointsMap","allpoints","shapeWithoutHoles","triangles","b2p0","b2p1","b2p2","b3p0","b3p1","b3p2","b3p3","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","ClosedSplineCurve3","AnimationHandler","CATMULLROM","CATMULLROM_FORWARD","initialized","hierarchy","rot","quat","usedMorphTargets","morphTargetName","morphTargetsInfluences","root","parseRecurseHierarchy","play","deltaTimeMS","resetBlendWeights","Animation","currentTime","timeScale","isPlaying","interpolationType","keyTypes","reset","animationCache","positionWeight","quaternionWeight","scaleWeight","prevKey","nextKey","originalMatrix","getNextKeyWith","newVector","newQuat","interpolateCatmullRom","prevXYZ","nextXYZ","proportionalWeight","getPrevKeyWith","currentPoint","forwardPoint","KeyFrameAnimation","isPaused","sids","obj","sid","next","endTime","original","hasTarget","MorphAnimation","mesh","frames","pause","lastFrame","currentFrame","interpolation","frame","width_half","height_half","depth_half","buildPlane","udir","vdir","gridX","gridY","gridX1","gridY1","segment_width","segment_height","uvd","centerUV","segment","CubeGeometry","heightHalf","verticesRow","uvsRow","tanTheta","uv1","uv3","uv4","addShapeList","addShape","amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","steps","extrudePath","extrudePts","extrudeByPath","extrudeMaterial","uvgen","UVGenerator","WorldUVGenerator","splineTube","binormal","position2","TubeGeometry","FrenetFrames","ahole","bevelPoints","shapesOffset","shapePoints","reverse","scalePt2","pt","bs","vert","flen","cont","clen","RAD_TO_DEGREES","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","colinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","pt_i","pt_j","pt_k","holesMovements","oneHoleMovements","verticesMovements","binormals","buildLidFaces","buildSideFaces","layer","f3","layeroffset","sidewalls","slen1","slen2","f4","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","indexA","indexB","indexC","indexD","LatheGeometry","inversePointLength","inverseSegments","phi","np","u0","u1","PlaneBufferGeometry","offset2","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegment","TextGeometry","textShapes","grid","tang","bitan","getPos","ip","jp","in_q","in_p","cu","su","quOverP","cs","tz","closed","numpoints","pos2","mat","smallest","initialNormal3","MAX_VALUE","PolyhedronGeometry","that","prepare","midpoints","centroid","subdivide","azimuth","inclination","make","azi","correctUV","cols","cells","aj","bj","rows","DodecahedronGeometry","OctahedronGeometry","TetrahedronGeometry","ParametricGeometry","func","slices","stacks","stackCount","sliceCount","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","pointMap","hexFrustum","hexCone","hexUp","hexTarget","hexCross","addLine","addPoint","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","edge","sortFunction","numEdges","vert1","vert2","face1","face2","FaceNormalsHelper","objectVertices","objectFaces","objectWorldMatrix","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","arrowLength","domeSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","worldMatrix","vertexId","VertexTangentsHelper","WireframeHelper","edges","numTris","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","startFrame","endFrame","createAnimation","setAnimationWeight","active","autoCreateAnimations","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","stopAnimation","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","body","appendChild","getElementById","stackTrace","innerText","getParents","modules","parents","dep","isArray","Function","deps","some"],"mappings":"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","file":"three.5665a894.js","sourceRoot":"..","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '69' };\r\n\r\n// browserify support\r\n\r\nif ( typeof module === 'object' ) {\r\n\r\n\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n// polyfills\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : 0;\r\n\r\n\t};\r\n\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\r\n// GL STATE CONSTANTS\r\n\r\nTHREE.CullFaceNone = 0;\r\nTHREE.CullFaceBack = 1;\r\nTHREE.CullFaceFront = 2;\r\nTHREE.CullFaceFrontBack = 3;\r\n\r\nTHREE.FrontFaceDirectionCW = 0;\r\nTHREE.FrontFaceDirectionCCW = 1;\r\n\r\n// SHADOWING TYPES\r\n\r\nTHREE.BasicShadowMap = 0;\r\nTHREE.PCFShadowMap = 1;\r\nTHREE.PCFSoftShadowMap = 2;\r\n\r\n// MATERIAL CONSTANTS\r\n\r\n// side\r\n\r\nTHREE.FrontSide = 0;\r\nTHREE.BackSide = 1;\r\nTHREE.DoubleSide = 2;\r\n\r\n// shading\r\n\r\nTHREE.NoShading = 0;\r\nTHREE.FlatShading = 1;\r\nTHREE.SmoothShading = 2;\r\n\r\n// colors\r\n\r\nTHREE.NoColors = 0;\r\nTHREE.FaceColors = 1;\r\nTHREE.VertexColors = 2;\r\n\r\n// blending modes\r\n\r\nTHREE.NoBlending = 0;\r\nTHREE.NormalBlending = 1;\r\nTHREE.AdditiveBlending = 2;\r\nTHREE.SubtractiveBlending = 3;\r\nTHREE.MultiplyBlending = 4;\r\nTHREE.CustomBlending = 5;\r\n\r\n// custom blending equations\r\n// (numbers start from 100 not to clash with other\r\n//  mappings to OpenGL constants defined in Texture.js)\r\n\r\nTHREE.AddEquation = 100;\r\nTHREE.SubtractEquation = 101;\r\nTHREE.ReverseSubtractEquation = 102;\r\nTHREE.MinEquation = 103;\r\nTHREE.MaxEquation = 104;\r\n\r\n// custom blending destination factors\r\n\r\nTHREE.ZeroFactor = 200;\r\nTHREE.OneFactor = 201;\r\nTHREE.SrcColorFactor = 202;\r\nTHREE.OneMinusSrcColorFactor = 203;\r\nTHREE.SrcAlphaFactor = 204;\r\nTHREE.OneMinusSrcAlphaFactor = 205;\r\nTHREE.DstAlphaFactor = 206;\r\nTHREE.OneMinusDstAlphaFactor = 207;\r\n\r\n// custom blending source factors\r\n\r\n//THREE.ZeroFactor = 200;\r\n//THREE.OneFactor = 201;\r\n//THREE.SrcAlphaFactor = 204;\r\n//THREE.OneMinusSrcAlphaFactor = 205;\r\n//THREE.DstAlphaFactor = 206;\r\n//THREE.OneMinusDstAlphaFactor = 207;\r\nTHREE.DstColorFactor = 208;\r\nTHREE.OneMinusDstColorFactor = 209;\r\nTHREE.SrcAlphaSaturateFactor = 210;\r\n\r\n\r\n// TEXTURE CONSTANTS\r\n\r\nTHREE.MultiplyOperation = 0;\r\nTHREE.MixOperation = 1;\r\nTHREE.AddOperation = 2;\r\n\r\n// Mapping modes\r\n\r\nTHREE.UVMapping = function () {};\r\n\r\nTHREE.CubeReflectionMapping = function () {};\r\nTHREE.CubeRefractionMapping = function () {};\r\n\r\nTHREE.SphericalReflectionMapping = function () {};\r\nTHREE.SphericalRefractionMapping = function () {};\r\n\r\n// Wrapping modes\r\n\r\nTHREE.RepeatWrapping = 1000;\r\nTHREE.ClampToEdgeWrapping = 1001;\r\nTHREE.MirroredRepeatWrapping = 1002;\r\n\r\n// Filters\r\n\r\nTHREE.NearestFilter = 1003;\r\nTHREE.NearestMipMapNearestFilter = 1004;\r\nTHREE.NearestMipMapLinearFilter = 1005;\r\nTHREE.LinearFilter = 1006;\r\nTHREE.LinearMipMapNearestFilter = 1007;\r\nTHREE.LinearMipMapLinearFilter = 1008;\r\n\r\n// Data types\r\n\r\nTHREE.UnsignedByteType = 1009;\r\nTHREE.ByteType = 1010;\r\nTHREE.ShortType = 1011;\r\nTHREE.UnsignedShortType = 1012;\r\nTHREE.IntType = 1013;\r\nTHREE.UnsignedIntType = 1014;\r\nTHREE.FloatType = 1015;\r\n\r\n// Pixel types\r\n\r\n//THREE.UnsignedByteType = 1009;\r\nTHREE.UnsignedShort4444Type = 1016;\r\nTHREE.UnsignedShort5551Type = 1017;\r\nTHREE.UnsignedShort565Type = 1018;\r\n\r\n// Pixel formats\r\n\r\nTHREE.AlphaFormat = 1019;\r\nTHREE.RGBFormat = 1020;\r\nTHREE.RGBAFormat = 1021;\r\nTHREE.LuminanceFormat = 1022;\r\nTHREE.LuminanceAlphaFormat = 1023;\r\n\r\n// DDS / ST3C Compressed texture formats\r\n\r\nTHREE.RGB_S3TC_DXT1_Format = 2001;\r\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\r\n\r\n// PVRTC compressed texture formats\r\n\r\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( color ) {\r\n\r\n\tif ( arguments.length === 3 ) {\r\n\r\n\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\r\n\r\n\t}\r\n\r\n\treturn this.set( color )\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function ( h, s, l ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tif ( s === 0 ) {\r\n\r\n\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar hue2rgb = function ( p, q, t ) {\r\n\r\n\t\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\t// rgb(255,0,0)\r\n\r\n\t\tif ( /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.exec( style );\r\n\r\n\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// rgb(100%,0%,0%)\r\n\r\n\t\tif ( /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.exec( style );\r\n\r\n\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// #ff0000\r\n\r\n\t\tif ( /^\\#([0-9a-f]{6})$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^\\#([0-9a-f]{6})$/i.exec( style );\r\n\r\n\t\t\tthis.setHex( parseInt( color[ 1 ], 16 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// #f00\r\n\r\n\t\tif ( /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec( style );\r\n\r\n\t\t\tthis.setHex( parseInt( color[ 1 ] + color[ 1 ] + color[ 2 ] + color[ 2 ] + color[ 3 ] + color[ 3 ], 16 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// red\r\n\r\n\t\tif ( /^(\\w+)$/i.test( style ) ) {\r\n\r\n\t\t\tthis.setHex( THREE.ColorKeywords[ style ] );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color ) {\r\n\r\n\t\tthis.r = color.r * color.r;\r\n\t\tthis.g = color.g * color.g;\r\n\t\tthis.b = color.b * color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color ) {\r\n\r\n\t\tthis.r = Math.sqrt( color.r );\r\n\t\tthis.g = Math.sqrt( color.g );\r\n\t\tthis.b = Math.sqrt( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.r = array[ 0 ];\r\n\t\tthis.g = array[ 1 ];\r\n\t\tthis.b = array[ 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\treturn [ this.r, this.g, this.b ];\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Color().setRGB( this.r, this.g, this.b );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\t_x: 0,_y: 0, _z: 0, _w: 0,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\tthis.normalize();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\tthis.conjugate().normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\treturn vector.applyQuaternion( this );\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.acos( cosHalfTheta );\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Quaternion( this._x, this._y, this._z, this._w );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\r\n\r\n\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n}\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.x *= s;\r\n\t\tthis.y *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclampScalar: ( function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function ( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Vector2( this.x, this.y );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function ( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar qx = q.x;\r\n\t\tvar qy = q.y;\r\n\t\tvar qz = q.z;\r\n\t\tvar qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\tthis.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: ( function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function ( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength  ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x;\r\n\t\tvar dy = this.y - v.y;\r\n\t\tvar dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetEulerFromRotationMatrix: function ( m, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n\t},\r\n\r\n\tsetEulerFromQuaternion: function ( q, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n\t},\r\n\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\r\n\t},\r\n\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\r\n\t\treturn this.setFromMatrixScale( m );\r\n\t},\r\n\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\r\n\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tthis.x = m.elements[ 12 ];\r\n\t\tthis.y = m.elements[ 13 ];\r\n\t\tthis.z = m.elements[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[  2 ] ).length();\r\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[  6 ] ).length();\r\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( index, matrix ) {\r\n\r\n\t\tvar offset = index * 4;\r\n\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tthis.x = me[ offset ];\r\n\t\tthis.y = me[ offset + 1 ];\r\n\t\tthis.z = me[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Vector3( this.x, this.y, this.z );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\t\tvar w = this.w;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\t\t\tthis.w *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 1;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) { // m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) { // m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else { // m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w > v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < min.w ) {\r\n\r\n\t\t\tthis.w = min.w;\r\n\r\n\t\t} else if ( this.w > max.w ) {\r\n\r\n\t\t\tthis.w = max.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: ( function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function ( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n    floor: function () {\r\n\r\n        this.x = Math.floor( this.x );\r\n        this.y = Math.floor( this.y );\r\n        this.z = Math.floor( this.z );\r\n        this.w = Math.floor( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    ceil: function () {\r\n\r\n        this.x = Math.ceil( this.x );\r\n        this.y = Math.ceil( this.y );\r\n        this.z = Math.ceil( this.z );\r\n        this.w = Math.ceil( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    round: function () {\r\n\r\n        this.x = Math.round( this.x );\r\n        this.y = Math.round( this.y );\r\n        this.z = Math.round( this.z );\r\n        this.w = Math.round( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    roundToZero: function () {\r\n\r\n        this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n        this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n        this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n        this.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Vector4( this.x, this.y, this.z, this.w );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\t_x: 0, _y: 0, _z: 0, _order: THREE.Euler.DefaultOrder,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function ( q, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/content/SpinCalc.m\r\n\r\n\t\tvar sqx = q.x * q.x;\r\n\t\tvar sqy = q.y * q.y;\r\n\t\tvar sqz = q.z * q.z;\r\n\t\tvar sqw = q.w * q.w;\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w - q.y * q.z ), ( sqw - sqx - sqy + sqz ) );\r\n\t\t\tthis._y = Math.asin(  clamp( 2 * ( q.x * q.z + q.y * q.w ), - 1, 1 ) );\r\n\t\t\tthis._z = Math.atan2( 2 * ( q.z * q.w - q.x * q.y ), ( sqw + sqx - sqy - sqz ) );\r\n\r\n\t\t} else if ( order ===  'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin(  clamp( 2 * ( q.x * q.w - q.y * q.z ), - 1, 1 ) );\r\n\t\t\tthis._y = Math.atan2( 2 * ( q.x * q.z + q.y * q.w ), ( sqw - sqx - sqy + sqz ) );\r\n\t\t\tthis._z = Math.atan2( 2 * ( q.x * q.y + q.z * q.w ), ( sqw - sqx + sqy - sqz ) );\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin(  clamp( 2 * ( q.x * q.w + q.y * q.z ), - 1, 1 ) );\r\n\t\t\tthis._y = Math.atan2( 2 * ( q.y * q.w - q.z * q.x ), ( sqw - sqx - sqy + sqz ) );\r\n\t\t\tthis._z = Math.atan2( 2 * ( q.z * q.w - q.x * q.y ), ( sqw - sqx + sqy - sqz ) );\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w + q.z * q.y ), ( sqw - sqx - sqy + sqz ) );\r\n\t\t\tthis._y = Math.asin(  clamp( 2 * ( q.y * q.w - q.x * q.z ), - 1, 1 ) );\r\n\t\t\tthis._z = Math.atan2( 2 * ( q.x * q.y + q.z * q.w ), ( sqw + sqx - sqy - sqz ) );\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w - q.z * q.y ), ( sqw - sqx + sqy - sqz ) );\r\n\t\t\tthis._y = Math.atan2( 2 * ( q.y * q.w - q.x * q.z ), ( sqw + sqx - sqy - sqz ) );\r\n\t\t\tthis._z = Math.asin(  clamp( 2 * ( q.x * q.y + q.z * q.w ), - 1, 1 ) );\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w + q.y * q.z ), ( sqw - sqx + sqy - sqz ) );\r\n\t\t\tthis._y = Math.atan2( 2 * ( q.x * q.z + q.y * q.w ), ( sqw + sqx - sqy - sqz ) );\r\n\t\t\tthis._z = Math.asin(  clamp( 2 * ( q.z * q.w - q.x * q.y ), - 1, 1 ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromQuaternion() given unsupported order: ' + order )\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\treturn [ this._x, this._y, this._z, this._order ];\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Euler( this._x, this._y, this._z, this._order );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Line3().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] )\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Box2().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] )\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and childrens', world transforms\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ||\r\n\t\t     point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\r\n\r\n\t\t\tthis.makeEmpty();\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Box3().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\r\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\r\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.x = array[ j ];\r\n\t\t\t\tv1.y = array[ j + 1 ];\r\n\t\t\t\tv1.z = array[ j + 2 ];\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tarray[ j ]     = v1.x;\r\n\t\t\t\tarray[ j + 1 ] = v1.y;\r\n\t\t\t\tarray[ j + 2 ] = v1.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnInvertible ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\r\n\r\n\t\tvar me = matrix.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\r\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\r\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\r\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\r\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\r\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\r\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\r\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\r\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\r\n\r\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\r\n\r\n\t\t// no inverse\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1.0 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset     ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\r\n\t\tthis.getInverse( m ).transpose();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix3().fromArray( this.elements );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractPosition: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\r\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\r\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x = new THREE.Vector3();\r\n\t\tvar y = new THREE.Vector3();\r\n\t\tvar z = new THREE.Vector3();\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.length() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.length() === 0 ) {\r\n\r\n\t\t\t\tz.x += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\treturn vector.applyProjection( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector4: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.x = array[ j ];\r\n\t\t\t\tv1.y = array[ j + 1 ];\r\n\t\t\t\tv1.z = array[ j + 2 ];\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tarray[ j ]     = v1.x;\r\n\t\t\t\tarray[ j + 1 ] = v1.y;\r\n\t\t\t\tarray[ j + 2 ] = v1.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateAxis: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\r\n\t\tv.transformDirection( this );\r\n\r\n\t},\r\n\r\n\tcrossVector: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset     ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnInvertible ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\r\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\r\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\r\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\r\n\r\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\r\n\r\n\t\tif ( det == 0 ) {\r\n\r\n\t\t\tvar msg = \"Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateByAxis: function ( axis, angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\t\t\t\tsx = - sx;\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = right - left;\r\n\t\tvar h = top - bottom;\r\n\t\tvar p = far - near;\r\n\r\n\t\tvar x = ( right + left ) / w;\r\n\t\tvar y = ( top + bottom ) / h;\r\n\t\tvar z = ( far + near ) / p;\r\n\r\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceTo( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceTo( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t// It returns the min distance between the ray and the segment\r\n\t\t// defined by v0 and v1\r\n\t\t// It can also set two optional targets :\r\n\t\t// - The closest point on the ray\r\n\t\t// - The closest point on the segment\r\n\r\n\t\tvar segCenter = v0.clone().add( v1 ).multiplyScalar( 0.5 );\r\n\t\tvar segDir = v1.clone().sub( v0 ).normalize();\r\n\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\tvar diff = this.origin.clone().sub( segCenter );\r\n\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\tvar b0 = diff.dot( this.direction );\r\n\t\tvar b1 = - diff.dot( segDir );\r\n\t\tvar c = diff.lengthSq();\r\n\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\tif ( det >= 0 ) {\r\n\r\n\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\textDet = segExtent * det;\r\n\r\n\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\toptionalPointOnRay.copy( this.direction.clone().multiplyScalar( s0 ).add( this.origin ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\toptionalPointOnSegment.copy( segDir.clone().multiplyScalar( s1 ).add( segCenter ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn sqrDist;\r\n\r\n\t},\r\n\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0 \r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tisIntersectionPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\tif ( denominator == 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) == 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectBox: function ( box , optionalTarget ) {\r\n\r\n\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\r\n\r\n\t\tvar tmin,tmax,tymin,tymax,tzmin,tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Ray().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter )  {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n \t\t};\r\n\r\n\t}(),\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Sphere().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Frustum().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tisIntersectionLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator == 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) == 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\t// compute new normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\r\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant == this.constant );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Plane().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i == 8 || i == 13 || i == 18 || i == 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i == 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i == 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\t// Clamp value to range <a, b>\r\n\r\n\tclamp: function ( x, a, b ) {\r\n\r\n\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\r\n\r\n\t},\r\n\r\n\t// Clamp value to range <a, inf)\r\n\r\n\tclampBottom: function ( x, a ) {\r\n\r\n\t\treturn x < a ? a : x;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random float from <0, 1> with 16 bits of randomness\r\n\t// (standard Math.random() creates repetitive patterns when applied over larger space)\r\n\r\n\trandom16: function () {\r\n\r\n\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function () {\r\n\r\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\r\n\t\treturn function ( degrees ) {\r\n\r\n\t\t\treturn degrees * degreeToRadiansFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tradToDeg: function () {\r\n\r\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\r\n\t\treturn function ( radians ) {\r\n\r\n\t\t\treturn radians * radianToDegreesFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint != oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\tlinearDistance, realDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycoordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// colinear or singular triangle\r\n\t\tif ( denom == 0 ) {\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycoordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Triangle().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {}\r\n\r\nTHREE.EventDispatcher.prototype = {\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( object ) {\r\n\r\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\r\n\t},\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://exocortex.com/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tSprite: {},\r\n\t\t\tMesh: {},\r\n\t\t\tPointCloud: { threshold: 1 },\r\n\t\t\tLOD: {},\r\n\t\t\tLine: {}\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tvar descSort = function ( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t};\r\n\r\n\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tprecision: 0.0001,\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( objects instanceof Array === false ) {\r\n\r\n\t\t\t\tconsole.log( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = undefined;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar scope = this;\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tvar onRotationChange = function () {\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\t};\r\n\r\n\tvar onQuaternionChange = function () {\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\t};\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t} );\r\n\r\n\tthis.renderDepth = null;\r\n\r\n\tthis.rotationAutoUpdate = true;\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = true;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\n\r\nTHREE.Object3D.prototype = {\r\n\r\n\tconstructor: THREE.Object3D,\r\n\r\n\tget eulerOrder () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\treturn this.rotation.order;\r\n\r\n\t},\r\n\r\n\tset eulerOrder ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\tthis.rotation.order = value;\r\n\r\n\t},\r\n\r\n\tget useQuaternion () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tset useQuaternion ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( distance, axis ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"can't be added as a child of itself.\" );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== undefined ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"is not an instance of THREE.Object3D.\" );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = undefined;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetChildByName: function ( name, recursive ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name, recursive );\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id, recursive ) {\r\n\r\n\t\tif ( this.id === id ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectById( id, recursive );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name, recursive ) {\r\n\r\n\t\tif ( this.name === name ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByName( name, recursive );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === undefined ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.3,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'ObjectExporter'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tvar parseGeometry = function ( geometry ) {\r\n\r\n\t\t\tif ( output.geometries === undefined ) {\r\n\r\n\t\t\t\toutput.geometries = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometries[ geometry.uuid ] === undefined ) {\r\n\r\n\t\t\t\tvar json = geometry.toJSON();\r\n\r\n\t\t\t\tdelete json.metadata;\r\n\r\n\t\t\t\tgeometries[ geometry.uuid ] = json;\r\n\r\n\t\t\t\toutput.geometries.push( json );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn geometry.uuid;\r\n\r\n\t\t};\r\n\r\n\t\t//\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tvar parseMaterial = function ( material ) {\r\n\r\n\t\t\tif ( output.materials === undefined ) {\r\n\r\n\t\t\t\toutput.materials = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materials[ material.uuid ] === undefined ) {\r\n\r\n\t\t\t\tvar json = material.toJSON();\r\n\r\n\t\t\t\tdelete json.metadata;\r\n\r\n\t\t\t\tmaterials[ material.uuid ] = json;\r\n\r\n\t\t\t\toutput.materials.push( json );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn material.uuid;\r\n\r\n\t\t};\r\n\r\n\t\t//\r\n\r\n\t\tvar parseObject = function ( object ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tdata.uuid = object.uuid;\r\n\t\t\tdata.type = object.type;\r\n\r\n\t\t\tif ( object.name !== '' ) data.name = object.name;\r\n\t\t\tif ( JSON.stringify( object.userData ) !== '{}' ) data.userData = object.userData;\r\n\t\t\tif ( object.visible !== true ) data.visible = object.visible;\r\n\r\n\t\t\tif ( object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tdata.fov = object.fov;\r\n\t\t\t\tdata.aspect = object.aspect;\r\n\t\t\t\tdata.near = object.near;\r\n\t\t\t\tdata.far = object.far;\r\n\r\n\t\t\t} else if ( object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tdata.left = object.left;\r\n\t\t\t\tdata.right = object.right;\r\n\t\t\t\tdata.top = object.top;\r\n\t\t\t\tdata.bottom = object.bottom;\r\n\t\t\t\tdata.near = object.near;\r\n\t\t\t\tdata.far = object.far;\r\n\r\n\t\t\t} else if ( object instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\r\n\t\t\t} else if ( object instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.intensity = object.intensity;\r\n\r\n\t\t\t} else if ( object instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.intensity = object.intensity;\r\n\t\t\t\tdata.distance = object.distance;\r\n\r\n\t\t\t} else if ( object instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.intensity = object.intensity;\r\n\t\t\t\tdata.distance = object.distance;\r\n\t\t\t\tdata.angle = object.angle;\r\n\t\t\t\tdata.exponent = object.exponent;\r\n\r\n\t\t\t} else if ( object instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.groundColor = object.groundColor.getHex();\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\r\n\t\t\t\tdata.material = parseMaterial( object.material );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\r\n\t\t\t\tdata.material = parseMaterial( object.material );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tdata.material = parseMaterial( object.material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.matrix = object.matrix.toArray();\r\n\r\n\t\t\tif ( object.children.length > 0 ) {\r\n\r\n\t\t\t\tdata.children = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\t\t\t\tdata.children.push( parseObject( object.children[ i ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = parseObject( this );\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function ( object, recursive ) {\r\n\r\n\t\tif ( object === undefined ) object = new THREE.Object3D();\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tobject.name = this.name;\r\n\r\n\t\tobject.up.copy( this.up );\r\n\r\n\t\tobject.position.copy( this.position );\r\n\t\tobject.quaternion.copy( this.quaternion );\r\n\t\tobject.scale.copy( this.scale );\r\n\r\n\t\tobject.renderDepth = this.renderDepth;\r\n\r\n\t\tobject.rotationAutoUpdate = this.rotationAutoUpdate;\r\n\r\n\t\tobject.matrix.copy( this.matrix );\r\n\t\tobject.matrixWorld.copy( this.matrixWorld );\r\n\r\n\t\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\r\n\t\tobject.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate;\r\n\r\n\t\tobject.visible = this.visible;\r\n\r\n\t\tobject.castShadow = this.castShadow;\r\n\t\tobject.receiveShadow = this.receiveShadow;\r\n\r\n\t\tobject.frustumCulled = this.frustumCulled;\r\n\r\n\t\tobject.userData = JSON.parse( JSON.stringify( this.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = this.children[ i ];\r\n\t\t\t\tobject.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Projector.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.warn( 'THREE.Projector has been moved to /examples/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() has been removed.' );\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = normal instanceof Array ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = color instanceof Array ? color : [];\r\n\r\n\tthis.vertexTangents = [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar face = new THREE.Face3( this.a, this.b, this.c );\r\n\r\n\t\tface.normal.copy( this.normal );\r\n\t\tface.color.copy( this.color );\r\n\r\n\t\tface.materialIndex = this.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = this.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tface.vertexNormals[ i ] = this.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tface.vertexColors[ i ] = this.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.vertexTangents.length; i < il; i ++ ) {\r\n\r\n\t\t\tface.vertexTangents[ i ] = this.vertexTangents[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn face;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Face4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' )\r\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.needsUpdate = false;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.array.set( value );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index     ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index     ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index     ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.BufferAttribute( new this.array.constructor( this.array ), this.itemSize );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.attributes = {};\r\n\tthis.attributesKeys = [];\r\n\r\n\tthis.drawcalls = [];\r\n\tthis.offsets = this.drawcalls; // backwards compatibility\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n};\r\n\r\nTHREE.BufferGeometry.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometry,\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.attributes[ name ] = { array: arguments[ 1 ], itemSize: arguments[ 2 ] };\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\t\tthis.attributesKeys = Object.keys( this.attributes );\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\r\n\t\tthis.drawcalls.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tindex: indexOffset !== undefined ? indexOffset : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\t// TODO\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry, settings ) {\r\n\r\n\t\tsettings = settings || { 'vertexColors': THREE.NoColors };\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\t\tvar vertexColors = settings.vertexColors;\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexNormals = faces[ 0 ].vertexNormals.length == 3;\r\n\r\n\t\tvar positions = new Float32Array( faces.length * 3 * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\t\tvar normals = new Float32Array( faces.length * 3 * 3 );\r\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\r\n\t\tif ( vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\tvar colors = new Float32Array( faces.length * 3 * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( faces.length * 3 * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, i2 = 0, i3 = 0; i < faces.length; i ++, i2 += 6, i3 += 9 ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar a = vertices[ face.a ];\r\n\t\t\tvar b = vertices[ face.b ];\r\n\t\t\tvar c = vertices[ face.c ];\r\n\r\n\t\t\tpositions[ i3     ] = a.x;\r\n\t\t\tpositions[ i3 + 1 ] = a.y;\r\n\t\t\tpositions[ i3 + 2 ] = a.z;\r\n\r\n\t\t\tpositions[ i3 + 3 ] = b.x;\r\n\t\t\tpositions[ i3 + 4 ] = b.y;\r\n\t\t\tpositions[ i3 + 5 ] = b.z;\r\n\r\n\t\t\tpositions[ i3 + 6 ] = c.x;\r\n\t\t\tpositions[ i3 + 7 ] = c.y;\r\n\t\t\tpositions[ i3 + 8 ] = c.z;\r\n\r\n\t\t\tif ( hasFaceVertexNormals === true ) {\r\n\r\n\t\t\t\tvar na = face.vertexNormals[ 0 ];\r\n\t\t\t\tvar nb = face.vertexNormals[ 1 ];\r\n\t\t\t\tvar nc = face.vertexNormals[ 2 ];\r\n\r\n\t\t\t\tnormals[ i3     ] = na.x;\r\n\t\t\t\tnormals[ i3 + 1 ] = na.y;\r\n\t\t\t\tnormals[ i3 + 2 ] = na.z;\r\n\r\n\t\t\t\tnormals[ i3 + 3 ] = nb.x;\r\n\t\t\t\tnormals[ i3 + 4 ] = nb.y;\r\n\t\t\t\tnormals[ i3 + 5 ] = nb.z;\r\n\r\n\t\t\t\tnormals[ i3 + 6 ] = nc.x;\r\n\t\t\t\tnormals[ i3 + 7 ] = nc.y;\r\n\t\t\t\tnormals[ i3 + 8 ] = nc.z;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar n = face.normal;\r\n\r\n\t\t\t\tnormals[ i3     ] = n.x;\r\n\t\t\t\tnormals[ i3 + 1 ] = n.y;\r\n\t\t\t\tnormals[ i3 + 2 ] = n.z;\r\n\r\n\t\t\t\tnormals[ i3 + 3 ] = n.x;\r\n\t\t\t\tnormals[ i3 + 4 ] = n.y;\r\n\t\t\t\tnormals[ i3 + 5 ] = n.z;\r\n\r\n\t\t\t\tnormals[ i3 + 6 ] = n.x;\r\n\t\t\t\tnormals[ i3 + 7 ] = n.y;\r\n\t\t\t\tnormals[ i3 + 8 ] = n.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( vertexColors === THREE.FaceColors ) {\r\n\r\n\t\t\t\tvar fc = face.color;\r\n\r\n\t\t\t\tcolors[ i3     ] = fc.r;\r\n\t\t\t\tcolors[ i3 + 1 ] = fc.g;\r\n\t\t\t\tcolors[ i3 + 2 ] = fc.b;\r\n\r\n\t\t\t\tcolors[ i3 + 3 ] = fc.r;\r\n\t\t\t\tcolors[ i3 + 4 ] = fc.g;\r\n\t\t\t\tcolors[ i3 + 5 ] = fc.b;\r\n\r\n\t\t\t\tcolors[ i3 + 6 ] = fc.r;\r\n\t\t\t\tcolors[ i3 + 7 ] = fc.g;\r\n\t\t\t\tcolors[ i3 + 8 ] = fc.b;\r\n\r\n\t\t\t} else if ( vertexColors === THREE.VertexColors ) {\r\n\r\n\t\t\t\tvar vca = face.vertexColors[ 0 ];\r\n\t\t\t\tvar vcb = face.vertexColors[ 1 ];\r\n\t\t\t\tvar vcc = face.vertexColors[ 2 ];\r\n\r\n\t\t\t\tcolors[ i3     ] = vca.r;\r\n\t\t\t\tcolors[ i3 + 1 ] = vca.g;\r\n\t\t\t\tcolors[ i3 + 2 ] = vca.b;\r\n\r\n\t\t\t\tcolors[ i3 + 3 ] = vcb.r;\r\n\t\t\t\tcolors[ i3 + 4 ] = vcb.g;\r\n\t\t\t\tcolors[ i3 + 5 ] = vcb.b;\r\n\r\n\t\t\t\tcolors[ i3 + 6 ] = vcc.r;\r\n\t\t\t\tcolors[ i3 + 7 ] = vcc.g;\r\n\t\t\t\tcolors[ i3 + 8 ] = vcc.b;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar uva = faceVertexUvs[ 0 ][ i ][ 0 ];\r\n\t\t\t\tvar uvb = faceVertexUvs[ 0 ][ i ][ 1 ];\r\n\t\t\t\tvar uvc = faceVertexUvs[ 0 ][ i ][ 2 ];\r\n\r\n\t\t\t\tuvs[ i2     ] = uva.x;\r\n\t\t\t\tuvs[ i2 + 1 ] = uva.y;\r\n\r\n\t\t\t\tuvs[ i2 + 2 ] = uvb.x;\r\n\t\t\t\tuvs[ i2 + 3 ] = uvb.y;\r\n\r\n\t\t\t\tuvs[ i2 + 4 ] = uvc.x;\r\n\t\t\t\tuvs[ i2 + 5 ] = uvc.y;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeBoundingSphere()\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar bb = this.boundingBox;\r\n\t\t\t\tbb.makeEmpty();\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\t\t\t\tbb.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\r\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tbox.makeEmpty();\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\t\t\t\tbox.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox:  sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnormals[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( attributes.index ) {\r\n\r\n\t\t\t\tvar indices = attributes.index.array;\r\n\r\n\t\t\t\tvar offsets = ( this.offsets.length > 0 ? this.offsets : [ { start: 0, count: indices.length, index: 0 } ] );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = offsets.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar start = offsets[ j ].start;\r\n\t\t\t\t\tvar count = offsets[ j ].count;\r\n\t\t\t\t\tvar index = offsets[ j ].index;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = ( index + indices[ i     ] ) * 3;\r\n\t\t\t\t\t\tvB = ( index + indices[ i + 1 ] ) * 3;\r\n\t\t\t\t\t\tvC = ( index + indices[ i + 2 ] ) * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA     ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB     ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC     ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i     ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\t// based on http://www.terathon.com/code/tangent.html\r\n\t\t// (per vertex tangents)\r\n\r\n\t\tif ( this.attributes.index === undefined ||\r\n\t\t\t this.attributes.position === undefined ||\r\n\t\t\t this.attributes.normal === undefined ||\r\n\t\t\t this.attributes.uv === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = this.attributes.index.array;\r\n\t\tvar positions = this.attributes.position.array;\r\n\t\tvar normals = this.attributes.normal.array;\r\n\t\tvar uvs = this.attributes.uv.array;\r\n\r\n\t\tvar nVertices = positions.length / 3;\r\n\r\n\t\tif ( this.attributes.tangent === undefined ) {\r\n\r\n\t\t\tthis.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar tangents = this.attributes.tangent.array;\r\n\r\n\t\tvar tan1 = [], tan2 = [];\r\n\r\n\t\tfor ( var k = 0; k < nVertices; k ++ ) {\r\n\r\n\t\t\ttan1[ k ] = new THREE.Vector3();\r\n\t\t\ttan2[ k ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tvar vA = new THREE.Vector3(),\r\n\t\t\tvB = new THREE.Vector3(),\r\n\t\t\tvC = new THREE.Vector3(),\r\n\r\n\t\t\tuvA = new THREE.Vector2(),\r\n\t\t\tuvB = new THREE.Vector2(),\r\n\t\t\tuvC = new THREE.Vector2(),\r\n\r\n\t\t\tx1, x2, y1, y2, z1, z2,\r\n\t\t\ts1, s2, t1, t2, r;\r\n\r\n\t\tvar sdir = new THREE.Vector3(), tdir = new THREE.Vector3();\r\n\r\n\t\tfunction handleTriangle( a, b, c ) {\r\n\r\n\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\tx1 = vB.x - vA.x;\r\n\t\t\tx2 = vC.x - vA.x;\r\n\r\n\t\t\ty1 = vB.y - vA.y;\r\n\t\t\ty2 = vC.y - vA.y;\r\n\r\n\t\t\tz1 = vB.z - vA.z;\r\n\t\t\tz2 = vC.z - vA.z;\r\n\r\n\t\t\ts1 = uvB.x - uvA.x;\r\n\t\t\ts2 = uvC.x - uvA.x;\r\n\r\n\t\t\tt1 = uvB.y - uvA.y;\r\n\t\t\tt2 = uvC.y - uvA.y;\r\n\r\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\r\n\r\n\t\t\tsdir.set(\r\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\r\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\r\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttdir.set(\r\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\r\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\r\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttan1[ a ].add( sdir );\r\n\t\t\ttan1[ b ].add( sdir );\r\n\t\t\ttan1[ c ].add( sdir );\r\n\r\n\t\t\ttan2[ a ].add( tdir );\r\n\t\t\ttan2[ b ].add( tdir );\r\n\t\t\ttan2[ c ].add( tdir );\r\n\r\n\t\t}\r\n\r\n\t\tvar i, il;\r\n\t\tvar j, jl;\r\n\t\tvar iA, iB, iC;\r\n\r\n\t\tif ( this.drawcalls.length === 0 ) {\r\n\r\n\t\t\tthis.addDrawCall( 0, indices.length, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tvar drawcalls = this.drawcalls;\r\n\r\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\r\n\r\n\t\t\tvar start = drawcalls[ j ].start;\r\n\t\t\tvar count = drawcalls[ j ].count;\r\n\t\t\tvar index = drawcalls[ j ].index;\r\n\r\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\tiA = index + indices[ i ];\r\n\t\t\t\tiB = index + indices[ i + 1 ];\r\n\t\t\t\tiC = index + indices[ i + 2 ];\r\n\r\n\t\t\t\thandleTriangle( iA, iB, iC );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\r\n\t\tvar w, t, test;\r\n\r\n\t\tfunction handleVertex( v ) {\r\n\r\n\t\t\tn.fromArray( normals, v * 3 );\r\n\t\t\tn2.copy( n );\r\n\r\n\t\t\tt = tan1[ v ];\r\n\r\n\t\t\t// Gram-Schmidt orthogonalize\r\n\r\n\t\t\ttmp.copy( t );\r\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n\t\t\t// Calculate handedness\r\n\r\n\t\t\ttmp2.crossVectors( n2, t );\r\n\t\t\ttest = tmp2.dot( tan2[ v ] );\r\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n\t\t\ttangents[ v * 4     ] = tmp.x;\r\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\r\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\r\n\t\t\ttangents[ v * 4 + 3 ] = w;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\r\n\r\n\t\t\tvar start = drawcalls[ j ].start;\r\n\t\t\tvar count = drawcalls[ j ].count;\r\n\t\t\tvar index = drawcalls[ j ].index;\r\n\r\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\tiA = index + indices[ i ];\r\n\t\t\t\tiB = index + indices[ i + 1 ];\r\n\t\t\t\tiC = index + indices[ i + 2 ];\r\n\r\n\t\t\t\thandleVertex( iA );\r\n\t\t\t\thandleVertex( iB );\r\n\t\t\t\thandleVertex( iC );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/*\r\n\t\tcomputeOffsets\r\n\t\tCompute the draw offset for large models by chunking the index buffer into chunks of 65k addressable vertices.\r\n\t\tThis method will effectively rewrite the index buffer and remap all attributes to match the new indices.\r\n\t\tWARNING: This method will also expand the vertex count to prevent sprawled triangles across draw offsets.\r\n\t\tindexBufferSize - Defaults to 65535, but allows for larger or smaller chunks.\r\n\t*/\r\n\tcomputeOffsets: function ( indexBufferSize ) {\r\n\r\n\t\tvar size = indexBufferSize;\r\n\t\tif ( indexBufferSize === undefined )\r\n\t\t\tsize = 65535; //WebGL limits type of index buffer values to 16-bit.\r\n\r\n\t\tvar s = Date.now();\r\n\r\n\t\tvar indices = this.attributes.index.array;\r\n\t\tvar vertices = this.attributes.position.array;\r\n\r\n\t\tvar verticesCount = ( vertices.length / 3 );\r\n\t\tvar facesCount = ( indices.length / 3 );\r\n\r\n\t\t/*\r\n\t\tconsole.log(\"Computing buffers in offsets of \"+size+\" -> indices:\"+indices.length+\" vertices:\"+vertices.length);\r\n\t\tconsole.log(\"Faces to process: \"+(indices.length/3));\r\n\t\tconsole.log(\"Reordering \"+verticesCount+\" vertices.\");\r\n\t\t*/\r\n\r\n\t\tvar sortedIndices = new Uint16Array( indices.length ); //16-bit buffers\r\n\t\tvar indexPtr = 0;\r\n\t\tvar vertexPtr = 0;\r\n\r\n\t\tvar offsets = [ { start:0, count:0, index:0 } ];\r\n\t\tvar offset = offsets[ 0 ];\r\n\r\n\t\tvar duplicatedVertices = 0;\r\n\t\tvar newVerticeMaps = 0;\r\n\t\tvar faceVertices = new Int32Array( 6 );\r\n\t\tvar vertexMap = new Int32Array( vertices.length );\r\n\t\tvar revVertexMap = new Int32Array( vertices.length );\r\n\t\tfor ( var j = 0; j < vertices.length; j ++ ) { vertexMap[ j ] = - 1; revVertexMap[ j ] = - 1; }\r\n\r\n\t\t/*\r\n\t\t\tTraverse every face and reorder vertices in the proper offsets of 65k.\r\n\t\t\tWe can have more than 65k entries in the index buffer per offset, but only reference 65k values.\r\n\t\t*/\r\n\t\tfor ( var findex = 0; findex < facesCount; findex ++ ) {\r\n\t\t\tnewVerticeMaps = 0;\r\n\r\n\t\t\tfor ( var vo = 0; vo < 3; vo ++ ) {\r\n\t\t\t\tvar vid = indices[ findex * 3 + vo ];\r\n\t\t\t\tif ( vertexMap[ vid ] == - 1 ) {\r\n\t\t\t\t\t//Unmapped vertice\r\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\r\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\r\n\t\t\t\t\tnewVerticeMaps ++;\r\n\t\t\t\t} else if ( vertexMap[ vid ] < offset.index ) {\r\n\t\t\t\t\t//Reused vertices from previous block (duplicate)\r\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\r\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\r\n\t\t\t\t\tduplicatedVertices ++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//Reused vertice in the current block\r\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\r\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = vertexMap[ vid ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar faceMax = vertexPtr + newVerticeMaps;\r\n\t\t\tif ( faceMax > ( offset.index + size ) ) {\r\n\t\t\t\tvar new_offset = { start:indexPtr, count:0, index:vertexPtr };\r\n\t\t\t\toffsets.push( new_offset );\r\n\t\t\t\toffset = new_offset;\r\n\r\n\t\t\t\t//Re-evaluate reused vertices in light of new offset.\r\n\t\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\r\n\t\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\r\n\t\t\t\t\tif ( new_vid > - 1 && new_vid < offset.index )\r\n\t\t\t\t\t\tfaceVertices[ v + 1 ] = - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Reindex the face.\r\n\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\r\n\t\t\t\tvar vid = faceVertices[ v ];\r\n\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\r\n\r\n\t\t\t\tif ( new_vid === - 1 )\r\n\t\t\t\t\tnew_vid = vertexPtr ++;\r\n\r\n\t\t\t\tvertexMap[ vid ] = new_vid;\r\n\t\t\t\trevVertexMap[ new_vid ] = vid;\r\n\t\t\t\tsortedIndices[ indexPtr ++ ] = new_vid - offset.index; //XXX overflows at 16bit\r\n\t\t\t\toffset.count ++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Move all attribute values to map to the new computed indices , also expand the vertice stack to match our new vertexPtr. */\r\n\t\tthis.reorderBuffers( sortedIndices, revVertexMap, vertexPtr );\r\n\t\tthis.offsets = offsets;\r\n\r\n\t\t/*\r\n\t\tvar orderTime = Date.now();\r\n\t\tconsole.log(\"Reorder time: \"+(orderTime-s)+\"ms\");\r\n\t\tconsole.log(\"Duplicated \"+duplicatedVertices+\" vertices.\");\r\n\t\tconsole.log(\"Compute Buffers time: \"+(Date.now()-s)+\"ms\");\r\n\t\tconsole.log(\"Draw offsets: \"+offsets.length);\r\n\t\t*/\r\n\r\n\t\treturn offsets;\r\n\t},\r\n\r\n\tmerge: function () {\r\n\r\n\t\tconsole.log( 'BufferGeometry.merge(): TODO' );\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i     ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/*\r\n\t\treoderBuffers:\r\n\t\tReorder attributes based on a new indexBuffer and indexMap.\r\n\t\tindexBuffer - Uint16Array of the new ordered indices.\r\n\t\tindexMap - Int32Array where the position is the new vertex ID and the value the old vertex ID for each vertex.\r\n\t\tvertexCount - Amount of total vertices considered in this reordering (in case you want to grow the vertice stack).\r\n\t*/\r\n\treorderBuffers: function ( indexBuffer, indexMap, vertexCount ) {\r\n\r\n\t\t/* Create a copy of all attributes for reordering. */\r\n\t\tvar sortedAttributes = {};\r\n\t\tfor ( var attr in this.attributes ) {\r\n\t\t\tif ( attr == 'index' )\r\n\t\t\t\tcontinue;\r\n\t\t\tvar sourceArray = this.attributes[ attr ].array;\r\n\t\t\tsortedAttributes[ attr ] = new sourceArray.constructor( this.attributes[ attr ].itemSize * vertexCount );\r\n\t\t}\r\n\r\n\t\t/* Move attribute positions based on the new index map */\r\n\t\tfor ( var new_vid = 0; new_vid < vertexCount; new_vid ++ ) {\r\n\t\t\tvar vid = indexMap[ new_vid ];\r\n\t\t\tfor ( var attr in this.attributes ) {\r\n\t\t\t\tif ( attr == 'index' )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tvar attrArray = this.attributes[ attr ].array;\r\n\t\t\t\tvar attrSize = this.attributes[ attr ].itemSize;\r\n\t\t\t\tvar sortedAttr = sortedAttributes[ attr ];\r\n\t\t\t\tfor ( var k = 0; k < attrSize; k ++ )\r\n\t\t\t\t\tsortedAttr[ new_vid * attrSize + k ] = attrArray[ vid * attrSize + k ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Carry the new sorted buffers locally */\r\n\t\tthis.attributes[ 'index' ].array = indexBuffer;\r\n\t\tfor ( var attr in this.attributes ) {\r\n\t\t\tif ( attr == 'index' )\r\n\t\t\t\tcontinue;\r\n\t\t\tthis.attributes[ attr ].array = sortedAttributes[ attr ];\r\n\t\t\tthis.attributes[ attr ].numItems = this.attributes[ attr ].itemSize * vertexCount;\r\n\t\t}\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.0,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometryExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tdata: {\r\n\t\t\t\tattributes: {}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar offsets = this.offsets;\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = [], typeArray = attribute.array;\r\n\r\n\t\t\tfor ( var i = 0, l = typeArray.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = typeArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( offsets.length > 0 ) {\r\n\r\n\t\t\toutput.data.offsets = JSON.parse( JSON.stringify( offsets ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\toutput.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tfor ( var attr in this.attributes ) {\r\n\r\n\t\t\tvar sourceAttr = this.attributes[ attr ];\r\n\t\t\tgeometry.addAttribute( attr, sourceAttr.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar offset = this.offsets[ i ];\r\n\r\n\t\t\tgeometry.offsets.push( {\r\n\r\n\t\t\t\tstart: offset.start,\r\n\t\t\t\tindex: offset.index,\r\n\t\t\t\tcount: offset.count\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];  // one-to-one vertex colors, used in Points and Line\r\n\r\n\tthis.faces = [];\r\n\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphColors = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.hasTangents = false;\r\n\r\n\tthis.dynamic = true; // the intermediate typed arrays will be deleted when set to false\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.tangentsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.Geometry.prototype = {\r\n\r\n\tconstructor: THREE.Geometry,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox instanceof THREE.Box3 ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere instanceof THREE.Sphere ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar vertices = attributes.position.array;\r\n\t\tvar indices = attributes.index !== undefined ? attributes.index.array : undefined;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\r\n\t\tfor ( var i = 0, j = 0; i < vertices.length; i += 3, j += 2 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar addFace = function ( a, b, c ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tscope.faces.push( new THREE.Face3( a, b, c, vertexNormals, vertexColors ) );\r\n\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ], tempUVs[ b ], tempUVs[ c ] ] );\r\n\r\n\t\t};\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\toffset.addVectors( this.boundingBox.min, this.boundingBox.max );\r\n\t\toffset.multiplyScalar( - 0.5 );\r\n\r\n\t\tthis.applyMatrix( new THREE.Matrix4().makeTranslation( offset.x, offset.y, offset.z ) );\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC, vD;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3(),\r\n\t\t\t\tdb = new THREE.Vector3(), dc = new THREE.Vector3(), bc = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.vertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\tface.vertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\tface.vertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\t// based on http://www.terathon.com/code/tangent.html\r\n\t\t// tangents go to vertices\r\n\r\n\t\tvar f, fl, v, vl, i, il, vertexIndex,\r\n\t\t\tface, uv, vA, vB, vC, uvA, uvB, uvC,\r\n\t\t\tx1, x2, y1, y2, z1, z2,\r\n\t\t\ts1, s2, t1, t2, r, t, test,\r\n\t\t\ttan1 = [], tan2 = [],\r\n\t\t\tsdir = new THREE.Vector3(), tdir = new THREE.Vector3(),\r\n\t\t\ttmp = new THREE.Vector3(), tmp2 = new THREE.Vector3(),\r\n\t\t\tn = new THREE.Vector3(), w;\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\ttan1[ v ] = new THREE.Vector3();\r\n\t\t\ttan2[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTriangle( context, a, b, c, ua, ub, uc ) {\r\n\r\n\t\t\tvA = context.vertices[ a ];\r\n\t\t\tvB = context.vertices[ b ];\r\n\t\t\tvC = context.vertices[ c ];\r\n\r\n\t\t\tuvA = uv[ ua ];\r\n\t\t\tuvB = uv[ ub ];\r\n\t\t\tuvC = uv[ uc ];\r\n\r\n\t\t\tx1 = vB.x - vA.x;\r\n\t\t\tx2 = vC.x - vA.x;\r\n\t\t\ty1 = vB.y - vA.y;\r\n\t\t\ty2 = vC.y - vA.y;\r\n\t\t\tz1 = vB.z - vA.z;\r\n\t\t\tz2 = vC.z - vA.z;\r\n\r\n\t\t\ts1 = uvB.x - uvA.x;\r\n\t\t\ts2 = uvC.x - uvA.x;\r\n\t\t\tt1 = uvB.y - uvA.y;\r\n\t\t\tt2 = uvC.y - uvA.y;\r\n\r\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\r\n\t\t\tsdir.set( ( t2 * x1 - t1 * x2 ) * r,\r\n\t\t\t\t\t  ( t2 * y1 - t1 * y2 ) * r,\r\n\t\t\t\t\t  ( t2 * z1 - t1 * z2 ) * r );\r\n\t\t\ttdir.set( ( s1 * x2 - s2 * x1 ) * r,\r\n\t\t\t\t\t  ( s1 * y2 - s2 * y1 ) * r,\r\n\t\t\t\t\t  ( s1 * z2 - s2 * z1 ) * r );\r\n\r\n\t\t\ttan1[ a ].add( sdir );\r\n\t\t\ttan1[ b ].add( sdir );\r\n\t\t\ttan1[ c ].add( sdir );\r\n\r\n\t\t\ttan2[ a ].add( tdir );\r\n\t\t\ttan2[ b ].add( tdir );\r\n\t\t\ttan2[ c ].add( tdir );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\t\t\tuv = this.faceVertexUvs[ 0 ][ f ]; // use UV layer 0 for tangents\r\n\r\n\t\t\thandleTriangle( this, face.a, face.b, face.c, 0, 1, 2 );\r\n\r\n\t\t}\r\n\r\n\t\tvar faceIndex = [ 'a', 'b', 'c', 'd' ];\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tfor ( i = 0; i < Math.min( face.vertexNormals.length, 3 ); i ++ ) {\r\n\r\n\t\t\t\tn.copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\tvertexIndex = face[ faceIndex[ i ] ];\r\n\r\n\t\t\t\tt = tan1[ vertexIndex ];\r\n\r\n\t\t\t\t// Gram-Schmidt orthogonalize\r\n\r\n\t\t\t\ttmp.copy( t );\r\n\t\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n\t\t\t\t// Calculate handedness\r\n\r\n\t\t\t\ttmp2.crossVectors( face.vertexNormals[ i ], t );\r\n\t\t\t\ttest = tmp2.dot( tan2[ vertexIndex ] );\r\n\t\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n\t\t\t\tface.vertexTangents[ i ] = new THREE.Vector4( tmp.x, tmp.y, tmp.z, w );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.hasTangents = true;\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( new THREE.Vector2( uv[ j ].x, uv[ j ].y ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertice by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, eg. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i,il, face;\r\n\t\tvar indices, k, j, jl, u;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\t\t\t\tif ( indices[ n ] == indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.0,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometryExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type\r\n\t\t};\r\n\r\n\t\tif ( this.name !== \"\" ) output.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) output[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 );\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\r\n\r\n\t\t\t/*\r\n\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\toutput.data = {};\r\n\r\n\t\toutput.data.vertices = vertices;\r\n\t\toutput.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) output.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) output.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\toutput.data.faces = faces;\r\n\r\n\t\t//\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar geometry = new THREE.Geometry();\r\n\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tgeometry.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = this.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tgeometry.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\t\tfor ( var i = 0, il = uvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs[ i ], uvCopy = [];\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( new THREE.Vector2( uv[ j ].x, uv[ j ].y ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.faceVertexUvs[ 0 ].push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t}\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function ( camera ) {\r\n\r\n\tif ( camera === undefined ) camera = new THREE.Camera();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, camera );\r\n\r\n\tcamera.matrixWorldInverse.copy( this.matrixWorldInverse );\r\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\r\n\r\n\treturn camera;\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.generateMipmaps;\r\n\r\n\t\trenderTarget.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\n\r\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\tvar cx = ( this.right + this.left ) / 2;\r\n\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.clone = function () {\r\n\r\n\tvar camera = new THREE.OrthographicCamera();\r\n\r\n\tTHREE.Camera.prototype.clone.call( this, camera );\r\n\r\n\tcamera.zoom = this.zoom;\r\n\r\n\tcamera.left = this.left;\r\n\tcamera.right = this.right;\r\n\tcamera.top = this.top;\r\n\tcamera.bottom = this.bottom;\r\n\r\n\tcamera.near = this.near;\r\n\tcamera.far = this.far;\r\n\r\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\r\n\r\n\treturn camera;\r\n};\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\n\r\n\r\n/**\r\n * Uses Focal Length (in mm) to estimate and set FOV\r\n * 35mm (fullframe) camera is used if frame size is not specified;\r\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\r\n\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\r\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\n\r\n/**\r\n * Sets an offset in a larger frustum. This is useful for multi-window or\r\n * multi-monitor/multi-machine setups.\r\n *\r\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n * the monitors are in grid like this\r\n *\r\n *   +---+---+---+\r\n *   | A | B | C |\r\n *   +---+---+---+\r\n *   | D | E | F |\r\n *   +---+---+---+\r\n *\r\n * then for each monitor you would call it like this\r\n *\r\n *   var w = 1920;\r\n *   var h = 1080;\r\n *   var fullWidth = w * 3;\r\n *   var fullHeight = h * 2;\r\n *\r\n *   --A--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n *   --B--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n *   --C--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n *   --D--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n *   --E--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n *   --F--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n *\r\n *   Note there is no reason monitors have to be the same size or in a grid.\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\tthis.fullWidth = fullWidth;\r\n\tthis.fullHeight = fullHeight;\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\r\n\tif ( this.fullWidth ) {\r\n\r\n\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\tvar bottom = - top;\r\n\t\tvar left = aspect * bottom;\r\n\t\tvar right = aspect * top;\r\n\t\tvar width = Math.abs( right - left );\r\n\t\tvar height = Math.abs( top - bottom );\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\tthis.near,\r\n\t\t\tthis.far\r\n\t\t);\r\n\r\n\t} else {\r\n\r\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.clone = function () {\r\n\r\n\tvar camera = new THREE.PerspectiveCamera();\r\n\r\n\tTHREE.Camera.prototype.clone.call( this, camera );\r\n\r\n\tcamera.zoom = this.zoom;\r\n\r\n\tcamera.fov = this.fov;\r\n\tcamera.aspect = this.aspect;\r\n\tcamera.near = this.near;\r\n\tcamera.far = this.far;\r\n\r\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\r\n\r\n\treturn camera;\r\n\r\n};\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\t\r\n\tthis.color = new THREE.Color( color );\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Light.prototype.clone = function ( light ) {\r\n\r\n\tif ( light === undefined ) light = new THREE.Light();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, light );\r\n\r\n\tlight.color.copy( this.color );\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\n\r\nTHREE.AmbientLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.AmbientLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/AreaLight.js\r\n\r\n/**\r\n * @author MPanknin / http://www.redplant.de/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.AreaLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'AreaLight';\r\n\r\n\tthis.normal = new THREE.Vector3( 0, - 1, 0 );\r\n\tthis.right = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n\tthis.width = 1.0;\r\n\tthis.height = 1.0;\r\n\r\n\tthis.constantAttenuation = 1.5;\r\n\tthis.linearAttenuation = 0.5;\r\n\tthis.quadraticAttenuation = 0.1;\r\n\r\n};\r\n\r\nTHREE.AreaLight.prototype = Object.create( THREE.Light.prototype );\r\n\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\t//\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\r\n\tthis.shadowCameraLeft = - 500;\r\n\tthis.shadowCameraRight = 500;\r\n\tthis.shadowCameraTop = 500;\r\n\tthis.shadowCameraBottom = - 500;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\t//\r\n\r\n\tthis.shadowCascade = false;\r\n\r\n\tthis.shadowCascadeOffset = new THREE.Vector3( 0, 0, - 1000 );\r\n\tthis.shadowCascadeCount = 2;\r\n\r\n\tthis.shadowCascadeBias = [ 0, 0, 0 ];\r\n\tthis.shadowCascadeWidth = [ 512, 512, 512 ];\r\n\tthis.shadowCascadeHeight = [ 512, 512, 512 ];\r\n\r\n\tthis.shadowCascadeNearZ = [ - 1.000, 0.990, 0.998 ];\r\n\tthis.shadowCascadeFarZ  = [  0.990, 0.998, 1.000 ];\r\n\r\n\tthis.shadowCascadeArray = [];\r\n\r\n\t//\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\n\r\nTHREE.DirectionalLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.DirectionalLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.target = this.target.clone();\r\n\r\n\tlight.intensity = this.intensity;\r\n\r\n\tlight.castShadow = this.castShadow;\r\n\tlight.onlyShadow = this.onlyShadow;\r\n\r\n\t//\r\n\r\n\tlight.shadowCameraNear = this.shadowCameraNear;\r\n\tlight.shadowCameraFar = this.shadowCameraFar;\r\n\r\n\tlight.shadowCameraLeft = this.shadowCameraLeft;\r\n\tlight.shadowCameraRight = this.shadowCameraRight;\r\n\tlight.shadowCameraTop = this.shadowCameraTop;\r\n\tlight.shadowCameraBottom = this.shadowCameraBottom;\r\n\r\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\r\n\r\n\tlight.shadowBias = this.shadowBias;\r\n\tlight.shadowDarkness = this.shadowDarkness;\r\n\r\n\tlight.shadowMapWidth = this.shadowMapWidth;\r\n\tlight.shadowMapHeight = this.shadowMapHeight;\r\n\r\n\t//\r\n\r\n\tlight.shadowCascade = this.shadowCascade;\r\n\r\n\tlight.shadowCascadeOffset.copy( this.shadowCascadeOffset );\r\n\tlight.shadowCascadeCount = this.shadowCascadeCount;\r\n\r\n\tlight.shadowCascadeBias = this.shadowCascadeBias.slice( 0 );\r\n\tlight.shadowCascadeWidth = this.shadowCascadeWidth.slice( 0 );\r\n\tlight.shadowCascadeHeight = this.shadowCascadeHeight.slice( 0 );\r\n\r\n\tlight.shadowCascadeNearZ = this.shadowCascadeNearZ.slice( 0 );\r\n\tlight.shadowCascadeFarZ  = this.shadowCascadeFarZ.slice( 0 );\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.position.set( 0, 100, 0 );\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\n\r\nTHREE.HemisphereLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.HemisphereLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.groundColor.copy( this.groundColor );\r\n\tlight.intensity = this.intensity;\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLight = function ( color, intensity, distance ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\n\r\nTHREE.PointLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.PointLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.intensity = this.intensity;\r\n\tlight.distance = this.distance;\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\t//\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\tthis.shadowCameraFov = 50;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\t//\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\n\r\nTHREE.SpotLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.SpotLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.target = this.target.clone();\r\n\r\n\tlight.intensity = this.intensity;\r\n\tlight.distance = this.distance;\r\n\tlight.angle = this.angle;\r\n\tlight.exponent = this.exponent;\r\n\r\n\tlight.castShadow = this.castShadow;\r\n\tlight.onlyShadow = this.onlyShadow;\r\n\r\n\t//\r\n\r\n\tlight.shadowCameraNear = this.shadowCameraNear;\r\n\tlight.shadowCameraFar = this.shadowCameraFar;\r\n\tlight.shadowCameraFov = this.shadowCameraFov;\r\n\r\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\r\n\r\n\tlight.shadowBias = this.shadowBias;\r\n\tlight.shadowDarkness = this.shadowDarkness;\r\n\r\n\tlight.shadowMapWidth = this.shadowMapWidth;\r\n\tlight.shadowMapHeight = this.shadowMapHeight;\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = function () {\r\n\r\n\tthis.files = {};\r\n\r\n};\r\n\r\nTHREE.Cache.prototype = {\r\n\r\n\tconstructor: THREE.Cache,\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function ( showStatus ) {\r\n\r\n\tthis.showStatus = showStatus;\r\n\tthis.statusDomElement = showStatus ? THREE.Loader.prototype.addStatusElement() : null;\r\n\r\n\tthis.imageLoader = new THREE.ImageLoader();\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\taddStatusElement: function () {\r\n\r\n\t\tvar e = document.createElement( 'div' );\r\n\r\n\t\te.style.position = 'absolute';\r\n\t\te.style.right = '0px';\r\n\t\te.style.top = '0px';\r\n\t\te.style.fontSize = '0.8em';\r\n\t\te.style.textAlign = 'left';\r\n\t\te.style.background = 'rgba(0,0,0,0.25)';\r\n\t\te.style.color = '#fff';\r\n\t\te.style.width = '120px';\r\n\t\te.style.padding = '0.5em 0.5em 0.5em 0.5em';\r\n\t\te.style.zIndex = 1000;\r\n\r\n\t\te.innerHTML = 'Loading ...';\r\n\r\n\t\treturn e;\r\n\r\n\t},\r\n\r\n\tupdateProgress: function ( progress ) {\r\n\r\n\t\tvar message = 'Loaded ';\r\n\r\n\t\tif ( progress.total ) {\r\n\r\n\t\t\tmessage += ( 100 * progress.loaded / progress.total ).toFixed( 0 ) + '%';\r\n\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmessage += ( progress.loaded / 1024 ).toFixed( 2 ) + ' KB';\r\n\r\n\t\t}\r\n\r\n\t\tthis.statusDomElement.innerHTML = message;\r\n\r\n\t},\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tneedsTangents: function ( materials ) {\r\n\r\n\t\tfor ( var i = 0, il = materials.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar m = materials[ i ];\r\n\r\n\t\t\tif ( m instanceof THREE.ShaderMaterial ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: function ( m, texturePath ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tfunction nearest_pow2( n ) {\r\n\r\n\t\t\tvar l = Math.log( n ) / Math.LN2;\r\n\t\t\treturn Math.pow( 2, Math.round(  l ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\tvar fullPath = texturePath + sourceFile;\r\n\r\n\t\t\tvar texture;\r\n\r\n\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\ttexture = new THREE.Texture();\r\n\r\n\t\t\t\tloader = scope.imageLoader;\r\n\t\t\t\tloader.crossOrigin = scope.crossOrigin;\r\n\t\t\t\tloader.load( fullPath, function ( image ) {\r\n\r\n\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\r\n\t\t\t\t\t\t THREE.Math.isPowerOfTwo( image.height ) === false ) {\r\n\r\n\t\t\t\t\t\tvar width = nearest_pow2( image.width );\r\n\t\t\t\t\t\tvar height = nearest_pow2( image.height );\r\n\r\n\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\r\n\t\t\t\t\t\ttexture.image = canvas;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ttexture.image = image;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.sourceFile = sourceFile;\r\n\r\n\t\t\tif ( repeat ) {\r\n\r\n\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\r\n\r\n\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset ) {\r\n\r\n\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( wrap ) {\r\n\r\n\t\t\t\tvar wrapMap = {\r\n\t\t\t\t\t'repeat': THREE.RepeatWrapping,\r\n\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\r\n\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( anisotropy ) {\r\n\r\n\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhere[ name ] = texture;\r\n\r\n\t\t}\r\n\r\n\t\tfunction rgb2hex( rgb ) {\r\n\r\n\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\r\n\r\n\t\t}\r\n\r\n\t\t// defaults\r\n\r\n\t\tvar mtype = 'MeshLambertMaterial';\r\n\t\tvar mpars = { color: 0xeeeeee, opacity: 1.0, map: null, lightMap: null, normalMap: null, bumpMap: null, wireframe: false };\r\n\r\n\t\t// parameters from model file\r\n\r\n\t\tif ( m.shading ) {\r\n\r\n\t\t\tvar shading = m.shading.toLowerCase();\r\n\r\n\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\r\n\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\r\n\r\n\t\t\tmpars.blending = THREE[ m.blending ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.transparent !== undefined || m.opacity < 1.0 ) {\r\n\r\n\t\t\tmpars.transparent = m.transparent;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.depthTest !== undefined ) {\r\n\r\n\t\t\tmpars.depthTest = m.depthTest;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.depthWrite !== undefined ) {\r\n\r\n\t\t\tmpars.depthWrite = m.depthWrite;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.visible !== undefined ) {\r\n\r\n\t\t\tmpars.visible = m.visible;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.flipSided !== undefined ) {\r\n\r\n\t\t\tmpars.side = THREE.BackSide;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.doubleSided !== undefined ) {\r\n\r\n\t\t\tmpars.side = THREE.DoubleSide;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.wireframe !== undefined ) {\r\n\r\n\t\t\tmpars.wireframe = m.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.vertexColors !== undefined ) {\r\n\r\n\t\t\tif ( m.vertexColors === 'face' ) {\r\n\r\n\t\t\t\tmpars.vertexColors = THREE.FaceColors;\r\n\r\n\t\t\t} else if ( m.vertexColors ) {\r\n\r\n\t\t\t\tmpars.vertexColors = THREE.VertexColors;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tif ( m.colorDiffuse ) {\r\n\r\n\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\r\n\r\n\t\t} else if ( m.DbgColor ) {\r\n\r\n\t\t\tmpars.color = m.DbgColor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.colorSpecular ) {\r\n\r\n\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.colorAmbient ) {\r\n\r\n\t\t\tmpars.ambient = rgb2hex( m.colorAmbient );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.colorEmissive ) {\r\n\r\n\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\r\n\r\n\t\t}\r\n\r\n\t\t// modifiers\r\n\r\n\t\tif ( m.transparency ) {\r\n\r\n\t\t\tmpars.opacity = m.transparency;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.specularCoef ) {\r\n\r\n\t\t\tmpars.shininess = m.specularCoef;\r\n\r\n\t\t}\r\n\r\n\t\t// textures\r\n\r\n\t\tif ( m.mapDiffuse && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapLight && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapBump && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapNormal && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapSpecular && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapAlpha && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( m.mapBumpScale ) {\r\n\r\n\t\t\tmpars.bumpScale = m.mapBumpScale;\r\n\r\n\t\t}\r\n\r\n\t\t// special case for normal mapped material\r\n\r\n\t\tif ( m.mapNormal ) {\r\n\r\n\t\t\tvar shader = THREE.ShaderLib[ 'normalmap' ];\r\n\t\t\tvar uniforms = THREE.UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t\tuniforms[ 'tNormal' ].value = mpars.normalMap;\r\n\r\n\t\t\tif ( m.mapNormalFactor ) {\r\n\r\n\t\t\t\tuniforms[ 'uNormalScale' ].value.set( m.mapNormalFactor, m.mapNormalFactor );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( mpars.map ) {\r\n\r\n\t\t\t\tuniforms[ 'tDiffuse' ].value = mpars.map;\r\n\t\t\t\tuniforms[ 'enableDiffuse' ].value = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( mpars.specularMap ) {\r\n\r\n\t\t\t\tuniforms[ 'tSpecular' ].value = mpars.specularMap;\r\n\t\t\t\tuniforms[ 'enableSpecular' ].value = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( mpars.lightMap ) {\r\n\r\n\t\t\t\tuniforms[ 'tAO' ].value = mpars.lightMap;\r\n\t\t\t\tuniforms[ 'enableAO' ].value = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// for the moment don't handle displacement texture\r\n\r\n\t\t\tuniforms[ 'diffuse' ].value.setHex( mpars.color );\r\n\t\t\tuniforms[ 'specular' ].value.setHex( mpars.specular );\r\n\t\t\tuniforms[ 'ambient' ].value.setHex( mpars.ambient );\r\n\r\n\t\t\tuniforms[ 'shininess' ].value = mpars.shininess;\r\n\r\n\t\t\tif ( mpars.opacity !== undefined ) {\r\n\r\n\t\t\t\tuniforms[ 'opacity' ].value = mpars.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar parameters = { fragmentShader: shader.fragmentShader, vertexShader: shader.vertexShader, uniforms: uniforms, lights: true, fog: true };\r\n\t\t\tvar material = new THREE.ShaderMaterial( parameters );\r\n\r\n\t\t\tif ( mpars.transparent ) {\r\n\r\n\t\t\t\tmaterial.transparent = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar material = new THREE[ mtype ]( mpars );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = this.handlers[ i ];\r\n\t\t\tvar loader  = this.handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.cache = new THREE.Cache();\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = scope.cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) onLoad( cached );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tscope.cache.add( url, this.response );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this.response );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onError !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\t\tonError( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.cache = new THREE.Cache();\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = scope.cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tonLoad( cached );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\t\tscope.cache.add( url, this );\r\n\r\n\t\t\t\tonLoad( this );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onError !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\t\tonError( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\timage.src = url;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( showStatus ) {\r\n\r\n\tTHREE.Loader.call( this, showStatus );\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = Object.create( THREE.Loader.prototype );\r\n\r\nTHREE.JSONLoader.prototype.load = function ( url, callback, texturePath ) {\r\n\r\n\tvar scope = this;\r\n\r\n\t// todo: unify load API to for easier SceneLoader use\r\n\r\n\ttexturePath = texturePath && ( typeof texturePath === 'string' ) ? texturePath : this.extractUrlBase( url );\r\n\r\n\tthis.onLoadStart();\r\n\tthis.loadAjaxJSON( this, url, callback, texturePath );\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype.loadAjaxJSON = function ( context, url, callback, texturePath, callbackProgress ) {\r\n\r\n\tvar xhr = new XMLHttpRequest();\r\n\r\n\tvar length = 0;\r\n\r\n\txhr.onreadystatechange = function () {\r\n\r\n\t\tif ( xhr.readyState === xhr.DONE ) {\r\n\r\n\t\t\tif ( xhr.status === 200 || xhr.status === 0 ) {\r\n\r\n\t\t\t\tif ( xhr.responseText ) {\r\n\r\n\t\t\t\t\tvar json = JSON.parse( xhr.responseText );\r\n\r\n\t\t\t\t\tif ( json.metadata !== undefined && json.metadata.type === 'scene' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be a Scene. Use THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar result = context.parse( json, texturePath );\r\n\t\t\t\t\tcallback( result.geometry, result.materials );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be unreachable or the file is empty.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// in context of more complex asset initialization\r\n\t\t\t\t// do not block on single failed file\r\n\t\t\t\t// maybe should go even one more level up\r\n\r\n\t\t\t\tcontext.onLoadComplete();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.JSONLoader: Couldn\\'t load \"' + url + '\" (' + xhr.status + ')' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( xhr.readyState === xhr.LOADING ) {\r\n\r\n\t\t\tif ( callbackProgress ) {\r\n\r\n\t\t\t\tif ( length === 0 ) {\r\n\r\n\t\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcallbackProgress( { total: length, loaded: xhr.responseText.length } );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( xhr.readyState === xhr.HEADERS_RECEIVED ) {\r\n\r\n\t\t\tif ( callbackProgress !== undefined ) {\r\n\r\n\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\txhr.open( 'GET', url, true );\r\n\txhr.withCredentials = this.withCredentials;\r\n\txhr.send( null );\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype.parse = function ( json, texturePath ) {\r\n\r\n\tvar scope = this,\r\n\tgeometry = new THREE.Geometry(),\r\n\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\tparseModel( scale );\r\n\r\n\tparseSkin();\r\n\tparseMorphing( scale );\r\n\r\n\tgeometry.computeFaceNormals();\r\n\tgeometry.computeBoundingSphere();\r\n\r\n\tfunction parseModel( scale ) {\r\n\r\n\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t}\r\n\r\n\t\tvar i, j, fi,\r\n\r\n\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\ttype,\r\n\t\tisQuad,\r\n\t\thasMaterial,\r\n\t\thasFaceVertexUv,\r\n\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, color, hex, normal,\r\n\r\n\t\tuvLayer, uv, u, v,\r\n\r\n\t\tfaces = json.faces,\r\n\t\tvertices = json.vertices,\r\n\t\tnormals = json.normals,\r\n\t\tcolors = json.colors,\r\n\r\n\t\tnUvLayers = 0;\r\n\r\n\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t// disregard empty arrays\r\n\r\n\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\toffset = 0;\r\n\t\tzLength = vertices.length;\r\n\r\n\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t}\r\n\r\n\t\toffset = 0;\r\n\t\tzLength = faces.length;\r\n\r\n\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\toffset += 4;\r\n\r\n\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = []\r\n\r\n\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction parseSkin() {\r\n\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\tvar x =                               json.skinWeights[ i     ];\r\n\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\tvar a =                               json.skinIndices[ i     ];\r\n\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.bones = json.bones;\r\n\r\n\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// could change this to json.animations[0] or remove completely\r\n\r\n\t\tgeometry.animation = json.animation;\r\n\t\tgeometry.animations = json.animations;\r\n\r\n\t};\r\n\r\n\tfunction parseMorphing( scale ) {\r\n\r\n\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\r\n\r\n\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\tsrcVertices = json.morphTargets [ i ].vertices;\r\n\r\n\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.morphColors !== undefined ) {\r\n\r\n\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\r\n\r\n\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tgeometry.morphColors[ i ] = {};\r\n\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\r\n\t\t\t\tgeometry.morphColors[ i ].colors = [];\r\n\r\n\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\r\n\t\t\t\tsrcColors = json.morphColors [ i ].colors;\r\n\r\n\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\r\n\r\n\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\r\n\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\r\n\t\t\t\t\tdstColors.push( color );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\treturn { geometry: geometry };\r\n\r\n\t} else {\r\n\r\n\t\tvar materials = this.initMaterials( json.materials, texturePath );\r\n\r\n\t\tif ( this.needsTangents( materials ) ) {\r\n\r\n\t\t\tgeometry.computeTangents();\r\n\r\n\t\t}\r\n\r\n\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar loaded = 0, total = 0;\r\n\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\ttotal ++;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\tloaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, loaded, total );\r\n\r\n\t\t}\r\n\r\n\t\tif ( loaded === total && scope.onLoad !== undefined ) {\r\n\r\n\t\t\tscope.onLoad();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar attributes = json.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar offsets = json.offsets;\r\n\r\n\t\tif ( offsets !== undefined ) {\r\n\r\n\t\t\tgeometry.offsets = JSON.parse( JSON.stringify( offsets ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.ambient !== undefined ) material.ambient.setHex( json.ambient );\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\t\t\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\t\tvar materials = this.parseMaterials( json.materials );\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.PlaneGeometry(\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q,\r\n\t\t\t\t\t\t\tdata.heightScale\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data.data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\t\t\t\tvar material = loader.parse( data );\r\n\r\n\t\t\t\tmaterial.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) material.name = data.name;\r\n\r\n\t\t\t\tmaterials[ data.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\r\n\t\t\t\t\tvar material = materials[ data.material ];\r\n\r\n\t\t\t\t\tif ( geometry === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( material === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\r\n\t\t\t\t\tvar material = materials[ data.material ];\r\n\r\n\t\t\t\t\tif ( geometry === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( material === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject = new THREE.Line( geometry, material );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tvar material = materials[ data.material ];\r\n\r\n\t\t\t\t\tif ( material === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( material );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t}\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.ImageLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\tvar texture = new THREE.Texture( image );\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function () {\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader();\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tif ( url instanceof Array ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\t\timages[ i ] = {\r\n\t\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\t\tif ( loaded === 6 ) {\r\n\r\n \t\t\t\t\t\tif (texDatas.mipmapCount == 1)\r\n \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.side = THREE.FrontSide;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( key in this ) {\r\n\r\n\t\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t\t} else if ( key == 'overdraw' ) {\r\n\r\n\t\t\t\t\t// ensure overdraw is backwards-compatable with legacy boolean type\r\n\t\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type\r\n\t\t};\r\n\r\n\t\tif ( this.name !== \"\" ) output.name = this.name;\r\n\r\n\t\tif ( this instanceof THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\t\t\toutput.ambient = this.ambient.getHex();\r\n\t\t\toutput.emissive = this.emissive.getHex();\r\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\t\t\toutput.ambient = this.ambient.getHex();\r\n\t\t\toutput.emissive = this.emissive.getHex();\r\n\t\t\toutput.specular = this.specular.getHex();\r\n\t\t\toutput.shininess = this.shininess;\r\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\tif ( this.shading !== THREE.FlatShading ) output.shading = this.shading;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.ShaderMaterial ) {\r\n\r\n\t\t\toutput.uniforms = this.uniforms;\r\n\t\t\toutput.vertexShader = this.vertexShader;\r\n\t\t\toutput.fragmentShader = this.fragmentShader;\r\n\r\n\t\t} else if ( this instanceof THREE.SpriteMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.opacity < 1 ) output.opacity = this.opacity;\r\n\t\tif ( this.transparent !== false ) output.transparent = this.transparent;\r\n\t\tif ( this.wireframe !== false ) output.wireframe = this.wireframe;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function ( material ) {\r\n\r\n\t\tif ( material === undefined ) material = new THREE.Material();\r\n\r\n\t\tmaterial.name = this.name;\r\n\r\n\t\tmaterial.side = this.side;\r\n\r\n\t\tmaterial.opacity = this.opacity;\r\n\t\tmaterial.transparent = this.transparent;\r\n\r\n\t\tmaterial.blending = this.blending;\r\n\r\n\t\tmaterial.blendSrc = this.blendSrc;\r\n\t\tmaterial.blendDst = this.blendDst;\r\n\t\tmaterial.blendEquation = this.blendEquation;\r\n\r\n\t\tmaterial.depthTest = this.depthTest;\r\n\t\tmaterial.depthWrite = this.depthWrite;\r\n\r\n\t\tmaterial.polygonOffset = this.polygonOffset;\r\n\t\tmaterial.polygonOffsetFactor = this.polygonOffsetFactor;\r\n\t\tmaterial.polygonOffsetUnits = this.polygonOffsetUnits;\r\n\r\n\t\tmaterial.alphaTest = this.alphaTest;\r\n\r\n\t\tmaterial.overdraw = this.overdraw;\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\",\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.LineBasicMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.LineBasicMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.linewidth = this.linewidth;\r\n\tmaterial.linecap = this.linecap;\r\n\tmaterial.linejoin = this.linejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>,\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.vertexColors = false;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.LineDashedMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.LineDashedMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.linewidth = this.linewidth;\r\n\r\n\tmaterial.scale = this.scale;\r\n\tmaterial.dashSize = this.dashSize;\r\n\tmaterial.gapSize = this.gapSize;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.MeshBasicMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshBasicMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.lightMap = this.lightMap;\r\n\r\n\tmaterial.specularMap = this.specularMap;\r\n\r\n\tmaterial.alphaMap = this.alphaMap;\r\n\r\n\tmaterial.envMap = this.envMap;\r\n\tmaterial.combine = this.combine;\r\n\tmaterial.reflectivity = this.reflectivity;\r\n\tmaterial.refractionRatio = this.refractionRatio;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\r\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  ambient: <hex>,\r\n *  emissive: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.ambient = new THREE.Color( 0xffffff );\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\r\n\tthis.wrapAround = false;\r\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.MeshLambertMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshLambertMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\tmaterial.ambient.copy( this.ambient );\r\n\tmaterial.emissive.copy( this.emissive );\r\n\r\n\tmaterial.wrapAround = this.wrapAround;\r\n\tmaterial.wrapRGB.copy( this.wrapRGB );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.lightMap = this.lightMap;\r\n\r\n\tmaterial.specularMap = this.specularMap;\r\n\r\n\tmaterial.alphaMap = this.alphaMap;\r\n\r\n\tmaterial.envMap = this.envMap;\r\n\tmaterial.combine = this.combine;\r\n\tmaterial.reflectivity = this.reflectivity;\r\n\tmaterial.refractionRatio = this.refractionRatio;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\r\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\tmaterial.morphNormals = this.morphNormals;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  ambient: <hex>,\r\n *  emissive: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.ambient = new THREE.Color( 0xffffff );\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.metal = false;\r\n\r\n\tthis.wrapAround = false;\r\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.MeshPhongMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshPhongMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\tmaterial.ambient.copy( this.ambient );\r\n\tmaterial.emissive.copy( this.emissive );\r\n\tmaterial.specular.copy( this.specular );\r\n\tmaterial.shininess = this.shininess;\r\n\r\n\tmaterial.metal = this.metal;\r\n\r\n\tmaterial.wrapAround = this.wrapAround;\r\n\tmaterial.wrapRGB.copy( this.wrapRGB );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.lightMap = this.lightMap;\r\n\r\n\tmaterial.bumpMap = this.bumpMap;\r\n\tmaterial.bumpScale = this.bumpScale;\r\n\r\n\tmaterial.normalMap = this.normalMap;\r\n\tmaterial.normalScale.copy( this.normalScale );\r\n\r\n\tmaterial.specularMap = this.specularMap;\r\n\r\n\tmaterial.alphaMap = this.alphaMap;\r\n\r\n\tmaterial.envMap = this.envMap;\r\n\tmaterial.combine = this.combine;\r\n\tmaterial.reflectivity = this.reflectivity;\r\n\tmaterial.refractionRatio = this.refractionRatio;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\r\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\tmaterial.morphNormals = this.morphNormals;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.morphTargets = false;\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.MeshDepthMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshDepthMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  shading: THREE.FlatShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.shading = THREE.FlatShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.MeshNormalMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshNormalMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshFaceMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MeshFaceMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MeshFaceMaterial';\r\n\t\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n};\r\n\r\nTHREE.MeshFaceMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MeshFaceMaterial,\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new THREE.MeshFaceMaterial();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/PointCloudMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointCloudMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointCloudMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointCloudMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.PointCloudMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.PointCloudMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.size = this.size;\r\n\tmaterial.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// backwards compatibility\r\n\r\nTHREE.ParticleBasicMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.' );\r\n\treturn new THREE.PointCloudMaterial( parameters );\r\n\r\n};\r\n\r\nTHREE.ParticleSystemMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.' );\r\n\treturn new THREE.PointCloudMaterial( parameters );\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\tthis.attributes = null;\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\r\n\tthis.lights = false; // set to use scene lights\r\n\r\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.ShaderMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.ShaderMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.fragmentShader = this.fragmentShader;\r\n\tmaterial.vertexShader = this.vertexShader;\r\n\r\n\tmaterial.uniforms = THREE.UniformsUtils.clone( this.uniforms );\r\n\r\n\tmaterial.attributes = this.attributes;\r\n\tmaterial.defines = this.defines;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.lights = this.lights;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\tmaterial.morphNormals = this.morphNormals;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\n\r\nTHREE.RawShaderMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.RawShaderMaterial();\r\n\r\n\tTHREE.ShaderMaterial.prototype.clone.call( this, material );\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2(),\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\t// set parameters\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\r\nTHREE.SpriteMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.SpriteMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.rotation = this.rotation;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\tthis._needsUpdate = false;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = new THREE.UVMapping();\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tget needsUpdate () {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tclone: function ( texture ) {\r\n\r\n\t\tif ( texture === undefined ) texture = new THREE.Texture();\r\n\r\n\t\ttexture.image = this.image;\r\n\t\ttexture.mipmaps = this.mipmaps.slice( 0 );\r\n\r\n\t\ttexture.mapping = this.mapping;\r\n\r\n\t\ttexture.wrapS = this.wrapS;\r\n\t\ttexture.wrapT = this.wrapT;\r\n\r\n\t\ttexture.magFilter = this.magFilter;\r\n\t\ttexture.minFilter = this.minFilter;\r\n\r\n\t\ttexture.anisotropy = this.anisotropy;\r\n\r\n\t\ttexture.format = this.format;\r\n\t\ttexture.type = this.type;\r\n\r\n\t\ttexture.offset.copy( this.offset );\r\n\t\ttexture.repeat.copy( this.repeat );\r\n\r\n\t\ttexture.generateMipmaps = this.generateMipmaps;\r\n\t\ttexture.premultiplyAlpha = this.premultiplyAlpha;\r\n\t\ttexture.flipY = this.flipY;\r\n\t\ttexture.unpackAlignment = this.unpackAlignment;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.images = images;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\r\nTHREE.CubeTexture.clone = function ( texture ) {\r\n\r\n\tif ( texture === undefined ) texture = new THREE.CubeTexture();\r\n\r\n\tTHREE.Texture.prototype.clone.call( this, texture );\r\n\r\n\ttexture.images = this.images;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\r\nTHREE.CompressedTexture.prototype.clone = function () {\r\n\r\n\tvar texture = new THREE.CompressedTexture();\r\n\r\n\tTHREE.Texture.prototype.clone.call( this, texture );\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\r\nTHREE.DataTexture.prototype.clone = function () {\r\n\r\n\tvar texture = new THREE.DataTexture();\r\n\r\n\tTHREE.Texture.prototype.clone.call( this, texture );\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar update = function () {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\n// File:src/objects/PointCloud.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.PointCloud = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'PointCloud';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointCloudMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.sortParticles = false;\r\n\r\n};\r\n\r\nTHREE.PointCloud.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.PointCloud.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tvar object = this;\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar threshold = raycaster.params.PointCloud.threshold;\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\tvar testPoint = function ( point, index ) {\r\n\r\n\t\t\tvar rayPointDistance = ray.distanceToPoint( point );\r\n\r\n\t\t\tif ( rayPointDistance < localThreshold ) {\r\n\r\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tdistanceToRay: rayPointDistance,\r\n\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.index !== undefined ) {\r\n\r\n\t\t\t\tvar indices = attributes.index.array;\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\tvar offset = {\r\n\t\t\t\t\t\tstart: 0,\r\n\t\t\t\t\t\tcount: indices.length,\r\n\t\t\t\t\t\tindex: 0\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\toffsets = [ offset ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\r\n\r\n\t\t\t\t\tvar start = offsets[ oi ].start;\r\n\t\t\t\t\tvar count = offsets[ oi ].count;\r\n\t\t\t\t\tvar index = offsets[ oi ].index;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar a = index + indices[ i ];\r\n\r\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar pointCount = positions.length / 3;\r\n\r\n\t\t\t\tfor ( var i = 0; i < pointCount; i ++ ) {\r\n\r\n\t\t\t\t\tposition.set(\r\n\t\t\t\t\t\tpositions[ 3 * i ],\r\n\t\t\t\t\t\tpositions[ 3 * i + 1 ],\r\n\t\t\t\t\t\tpositions[ 3 * i + 2 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar vertices = this.geometry.vertices;\r\n\r\n\t\t\tfor ( var i = 0; i < vertices.length; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.PointCloud.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.PointCloud( this.geometry, this.material );\r\n\r\n\tobject.sortParticles = this.sortParticles;\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.ParticleSystem = function ( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.PointCloud.' );\r\n\treturn new THREE.PointCloud( geometry, material );\r\n\r\n};\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.mode = ( mode !== undefined ) ? mode : THREE.LineStrip;\r\n\r\n};\r\n\r\nTHREE.LineStrip = 0;\r\nTHREE.LinePieces = 1;\r\n\r\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Line.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tvar precision = raycaster.linePrecision;\r\n\t\tvar precisionSq = precision * precision;\r\n\r\n\t\tvar geometry = this.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t/* if ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t} else */ if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar nbVertices = vertices.length;\r\n\t\t\tvar interSegment = new THREE.Vector3();\r\n\t\t\tvar interRay = new THREE.Vector3();\r\n\t\t\tvar step = this.mode === THREE.LineStrip ? 1 : 2;\r\n\r\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i = i + step ) {\r\n\r\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Line.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Line( this.geometry, this.material, this.mode );\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\t\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\r\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\tthis.morphTargetBase = - 1;\r\n\t\tthis.morphTargetForcedOrder = [];\r\n\t\tthis.morphTargetInfluences = [];\r\n\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\r\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t}\r\n\r\n\tconsole.log( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\treturn 0;\r\n\r\n};\r\n\r\n\r\nTHREE.Mesh.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\tvar vA = new THREE.Vector3();\r\n\tvar vB = new THREE.Vector3();\r\n\tvar vC = new THREE.Vector3();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tvar geometry = this.geometry;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false )  {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar material = this.material;\r\n\r\n\t\t\tif ( material === undefined ) return;\r\n\r\n\t\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t\tvar a, b, c;\r\n\t\t\tvar precision = raycaster.precision;\r\n\r\n\t\t\tif ( attributes.index !== undefined ) {\r\n\r\n\t\t\t\tvar indices = attributes.index.array;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\r\n\r\n\t\t\t\t\tvar start = offsets[ oi ].start;\r\n\t\t\t\t\tvar count = offsets[ oi ].count;\r\n\t\t\t\t\tvar index = offsets[ oi ].index;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\ta = index + indices[ i ];\r\n\t\t\t\t\t\tb = index + indices[ i + 1 ];\r\n\t\t\t\t\t\tc = index + indices[ i + 2 ];\r\n\r\n\t\t\t\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\t\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( intersectionPoint === null ) continue;\r\n\r\n\t\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\r\n\r\n\t\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\tpoint: intersectionPoint,\r\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, j = 0, il = positions.length; i < il; i += 3, j += 9 ) {\r\n\r\n\t\t\t\t\ta = i;\r\n\t\t\t\t\tb = i + 1;\r\n\t\t\t\t\tc = i + 2;\r\n\r\n\t\t\t\t\tvA.fromArray( positions, j );\r\n\t\t\t\t\tvB.fromArray( positions, j + 3 );\r\n\t\t\t\t\tvC.fromArray( positions, j + 6 );\r\n\r\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( intersectionPoint === null ) continue;\r\n\r\n\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\r\n\r\n\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPoint,\r\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar isFaceMaterial = this.material instanceof THREE.MeshFaceMaterial;\r\n\t\t\tvar objectMaterials = isFaceMaterial === true ? this.material.materials : null;\r\n\r\n\t\t\tvar a, b, c, d;\r\n\t\t\tvar precision = raycaster.precision;\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tvar face = geometry.faces[ f ];\r\n\r\n\t\t\t\tvar material = isFaceMaterial === true ? objectMaterials[ face.materialIndex ] : this.material;\r\n\r\n\t\t\t\tif ( material === undefined ) continue;\r\n\r\n\t\t\t\ta = vertices[ face.a ];\r\n\t\t\t\tb = vertices[ face.b ];\r\n\t\t\t\tc = vertices[ face.c ];\r\n\r\n\t\t\t\tif ( material.morphTargets === true ) {\r\n\r\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\tvA.x += ( targets[ face.a ].x - a.x ) * influence;\r\n\t\t\t\t\t\tvA.y += ( targets[ face.a ].y - a.y ) * influence;\r\n\t\t\t\t\t\tvA.z += ( targets[ face.a ].z - a.z ) * influence;\r\n\r\n\t\t\t\t\t\tvB.x += ( targets[ face.b ].x - b.x ) * influence;\r\n\t\t\t\t\t\tvB.y += ( targets[ face.b ].y - b.y ) * influence;\r\n\t\t\t\t\t\tvB.z += ( targets[ face.b ].z - b.z ) * influence;\r\n\r\n\t\t\t\t\t\tvC.x += ( targets[ face.c ].x - c.x ) * influence;\r\n\t\t\t\t\t\tvC.y += ( targets[ face.c ].y - c.y ) * influence;\r\n\t\t\t\t\t\tvC.z += ( targets[ face.c ].z - c.z ) * influence;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvA.add( a );\r\n\t\t\t\t\tvB.add( b );\r\n\t\t\t\t\tvC.add( c );\r\n\r\n\t\t\t\t\ta = vA;\r\n\t\t\t\t\tb = vB;\r\n\t\t\t\t\tc = vC;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( c, b, a, true );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( a, b, c, material.side !== THREE.DoubleSide );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( intersectionPoint === null ) continue;\r\n\r\n\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\r\n\r\n\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tpoint: intersectionPoint,\r\n\t\t\t\t\tface: face,\r\n\t\t\t\t\tfaceIndex: f,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Mesh.prototype.clone = function ( object, recursive ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Mesh( this.geometry, this.material );\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object, recursive );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( belongsToSkin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.skin = belongsToSkin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones  (8 * 8  / 4)\r\n\t\t//       16x16 pixel texture max   64 bones (16 * 16 / 4)\r\n\t\t//       32x32 pixel texture max  256 bones (32 * 32 / 4)\r\n\t\t//       64x64 pixel texture max 1024 bones (64 * 64 / 4)\r\n\r\n\t\tvar size;\r\n\r\n\t\tif ( this.bones.length > 256 )\r\n\t\t\tsize = 64;\r\n\t\telse if ( this.bones.length > 64 )\r\n\t\t\tsize = 32;\r\n\t\telse if ( this.bones.length > 16 )\r\n\t\t\tsize = 16;\r\n\t\telse\r\n\t\t\tsize = 8;\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\t\tthis.boneTexture.minFilter = THREE.NearestFilter;\r\n\t\tthis.boneTexture.magFilter = THREE.NearestFilter;\r\n\t\tthis.boneTexture.generateMipmaps = false;\r\n\t\tthis.boneTexture.flipY = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\r\n\tthis.boneInverses = [];\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tthis.boneInverses.push( inverse );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.pose = function () {\r\n\r\n\tvar bone;\r\n\r\n\t// recover the bind-time world matrices\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// compute the local matrices, positions, rotations and scales\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.update = ( function () {\r\n\r\n\tvar offsetMatrix = new THREE.Matrix4();\r\n\t\r\n\treturn function () {\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n} )();\r\n\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone, p, q, s;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tp = gbone.pos;\r\n\t\t\tq = gbone.rotq;\r\n\t\t\ts = gbone.scl;\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.set( p[ 0 ], p[ 1 ], p[ 2 ] );\r\n\t\t\tbone.quaternion.set( q[ 0 ], q[ 1 ], q[ 2 ], q[ 3 ] );\r\n\r\n\t\t\tif ( s !== undefined ) {\r\n\r\n\t\t\t\tbone.scale.set( s[ 0 ], s[ 1 ], s[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.scale.set( 1, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ) );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\r\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\r\n\tthis.skeleton = skeleton;\r\n\r\n\tif ( bindMatrix === undefined ) {\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t}\r\n\r\n\tthis.bindMatrix.copy( bindMatrix );\r\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.pose = function () {\r\n\r\n\tthis.skeleton.pose();\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\r\n\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\r\n\r\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\r\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.SkinnedMesh unreckognized bindMode: ' + this.bindMode );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.clone = function( object ) {\r\n\r\n\tif ( object === undefined ) {\r\n\r\n\t\tobject = new THREE.SkinnedMesh( this.geometry, this.material, this.useVertexTexture );\r\n\r\n\t}\r\n\r\n\tTHREE.Mesh.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n\r\n// File:src/objects/MorphAnimMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphAnimMesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'MorphAnimMesh';\r\n\r\n\t// API\r\n\r\n\tthis.duration = 1000; // milliseconds\r\n\tthis.mirroredLoop = false;\r\n\tthis.time = 0;\r\n\r\n\t// internals\r\n\r\n\tthis.lastKeyframe = 0;\r\n\tthis.currentKeyframe = 0;\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n\tthis.setFrameRange( 0, this.geometry.morphTargets.length - 1 );\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\r\nTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\r\n\r\n\tthis.startKeyframe = start;\r\n\tthis.endKeyframe = end;\r\n\r\n\tthis.length = this.endKeyframe - this.startKeyframe + 1;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\r\n\r\n\tthis.direction = - 1;\r\n\tthis.directionBackwards = true;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tif ( ! geometry.animations ) geometry.animations = {};\r\n\r\n\tvar firstAnimation, animations = geometry.animations;\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar parts = morph.name.match( pattern );\r\n\r\n\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\tvar label = parts[ 1 ];\r\n\t\t\tvar num = parts[ 2 ];\r\n\r\n\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar animation = animations[ label ];\r\n\r\n\t\t\tif ( i < animation.start ) animation.start = i;\r\n\t\t\tif ( i > animation.end ) animation.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = label;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\r\n\r\n\tif ( ! this.geometry.animations ) this.geometry.animations = {};\r\n\r\n\tthis.geometry.animations[ label ] = { start: start, end: end };\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\r\n\r\n\tvar animation = this.geometry.animations[ label ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tthis.setFrameRange( animation.start, animation.end );\r\n\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\r\n\t\tthis.time = 0;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'animation[' + label + '] undefined' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\r\n\r\n\tvar frameTime = this.duration / this.length;\r\n\r\n\tthis.time += this.direction * delta;\r\n\r\n\tif ( this.mirroredLoop ) {\r\n\r\n\t\tif ( this.time > this.duration || this.time < 0 ) {\r\n\r\n\t\t\tthis.direction *= - 1;\r\n\r\n\t\t\tif ( this.time > this.duration ) {\r\n\r\n\t\t\t\tthis.time = this.duration;\r\n\t\t\t\tthis.directionBackwards = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.time < 0 ) {\r\n\r\n\t\t\t\tthis.time = 0;\r\n\t\t\t\tthis.directionBackwards = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tthis.time = this.time % this.duration;\r\n\r\n\t\tif ( this.time < 0 ) this.time += this.duration;\r\n\r\n\t}\r\n\r\n\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\r\n\r\n\tif ( keyframe !== this.currentKeyframe ) {\r\n\r\n\t\tthis.morphTargetInfluences[ this.lastKeyframe ] = 0;\r\n\t\tthis.morphTargetInfluences[ this.currentKeyframe ] = 1;\r\n\r\n\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\tthis.lastKeyframe = this.currentKeyframe;\r\n\t\tthis.currentKeyframe = keyframe;\r\n\r\n\t}\r\n\r\n\tvar mix = ( this.time % frameTime ) / frameTime;\r\n\r\n\tif ( this.directionBackwards ) {\r\n\r\n\t\tmix = 1 - mix;\r\n\r\n\t}\r\n\r\n\tthis.morphTargetInfluences[ this.currentKeyframe ] = mix;\r\n\tthis.morphTargetInfluences[ this.lastKeyframe ] = 1 - mix;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\r\n\r\n\tvar influences = this.morphTargetInfluences;\r\n\r\n\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\r\n\r\n\t\tinfluences[ i ] = 0;\r\n\r\n\t}\r\n\r\n\tif ( a > -1 ) influences[ a ] = 1 - t;\r\n\tif ( b > -1 ) influences[ b ] = t;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.MorphAnimMesh( this.geometry, this.material );\r\n\r\n\tobject.duration = this.duration;\r\n\tobject.mirroredLoop = this.mirroredLoop;\r\n\tobject.time = this.time;\r\n\r\n\tobject.lastKeyframe = this.lastKeyframe;\r\n\tobject.currentKeyframe = this.currentKeyframe;\r\n\r\n\tobject.direction = this.direction;\r\n\tobject.directionBackwards = this.directionBackwards;\r\n\r\n\tTHREE.Mesh.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.objects = [];\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\r\n\tif ( distance === undefined ) distance = 0;\r\n\r\n\tdistance = Math.abs( distance );\r\n\r\n\tfor ( var l = 0; l < this.objects.length; l ++ ) {\r\n\r\n\t\tif ( distance < this.objects[ l ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.objects.splice( l, 0, { distance: distance, object: object } );\r\n\tthis.add( object );\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\r\n\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\r\n\r\n\t\tif ( distance < this.objects[ i ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn this.objects[ i - 1 ].object;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.LOD.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( camera ) {\r\n\r\n\t\tif ( this.objects.length > 1 ) {\r\n\r\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\tthis.objects[ 0 ].object.visible = true;\r\n\r\n\t\t\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= this.objects[ i ].distance ) {\r\n\r\n\t\t\t\t\tthis.objects[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tthis.objects[ i     ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.objects[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.LOD.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.LOD();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\tfor ( var i = 0, l = this.objects.length; i < l; i ++ ) {\r\n\t\tvar x = this.objects[ i ].object.clone();\r\n\t\tx.visible = i === 0;\r\n\t\tobject.addLevel( x, this.objects[ i ].distance );\r\n\t}\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = ( function () {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\treturn function ( material ) {\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tthis.type = 'Sprite';\r\n\r\n\t\tthis.geometry = geometry;\r\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Sprite.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.distanceToPoint( matrixPosition );\r\n\r\n\t\tif ( distance > this.scale.x ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tpoint: this.position,\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Sprite.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Sprite( this.material );\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.Particle = THREE.Sprite;\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\n\r\n/*\r\n * Add: adds another flare\r\n */\r\n\r\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\tif ( size === undefined ) size = - 1;\r\n\tif ( distance === undefined ) distance = 0;\r\n\tif ( opacity === undefined ) opacity = 1;\r\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\tthis.lensFlares.push( {\r\n\t\ttexture: texture, \t\t\t// THREE.Texture\r\n\t\tsize: size, \t\t\t\t// size in pixels (-1 = use texture.width)\r\n\t\tdistance: distance, \t\t// distance (0-1) from light source (0=at light source)\r\n\t\tx: 0, y: 0, z: 0,\t\t\t// screen position (-1 => 1) z = 0 is ontop z = 1 is back\r\n\t\tscale: 1, \t\t\t\t\t// scale\r\n\t\trotation: 1, \t\t\t\t// rotation\r\n\t\topacity: opacity,\t\t\t// opacity\r\n\t\tcolor: color,\t\t\t\t// color\r\n\t\tblending: blending\t\t\t// blending\r\n\t} );\r\n\r\n};\r\n\r\n/*\r\n * Update lens flares update positions on all flares based on the screen position\r\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n */\r\n\r\nTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\r\n\tvar f, fl = this.lensFlares.length;\r\n\tvar flare;\r\n\tvar vecX = - this.positionScreen.x * 2;\r\n\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\tfor( f = 0; f < fl; f ++ ) {\r\n\r\n\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Scene.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Scene();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\tif ( this.fog !== null ) object.fog = this.fog.clone();\r\n\tif ( this.overrideMaterial !== null ) object.overrideMaterial = this.overrideMaterial.clone();\r\n\r\n\tobject.autoUpdate = this.autoUpdate;\r\n\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\ntransformedNormal = normalize( transformedNormal );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\tfloat dotProduct = dot( transformedNormal, dirVector );\\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\t#ifdef WRAP_AROUND\\n\\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\\n\\n\t#endif\\n\\n}\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\tfloat lDistance = 1.0;\\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\t\tlVector = normalize( lVector );\\n\\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\\n\\n\t\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/default_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'default_vertex'] = \"vec4 mvPosition;\\n\\n#ifdef USE_SKINNING\\n\\n\tmvPosition = modelViewMatrix * skinned;\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\\n\\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\\n\\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\\n\\n#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\t#ifdef USE_MORPHNORMALS\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\\n\\n\t#else\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"vec3 normal = normalize( vNormal );\\nvec3 viewPosition = normalize( vViewPosition );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tvec3 pointDiffuse = vec3( 0.0 );\\n\tvec3 pointSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\\n\\n\t\t\t\t// specular\\n\\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tvec3 spotDiffuse = vec3( 0.0 );\\n\tvec3 spotSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t\t#else\\n\\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t\t#endif\\n\\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\\n\\n\t\t\t\t\t// specular\\n\\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tvec3 dirDiffuse = vec3( 0.0 );\\n\tvec3 dirSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\t\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, dirVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\\n\\n\t\t// specular\\n\\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t/*\\n\t\t// fresnel term from skin shader\\n\t\tconst float F0 = 0.128;\\n\\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\\n\t\tfloat exponential = pow( base, 5.0 );\\n\\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\\n\t\t*/\\n\\n\t\t/*\\n\t\t// fresnel term from fresnel shader\\n\t\tconst float mFresnelBias = 0.08;\\n\t\tconst float mFresnelScale = 0.3;\\n\t\tconst float mFresnelPower = 5.0;\\n\\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\\n\t\t*/\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tvec3 hemiDiffuse = vec3( 0.0 );\\n\tvec3 hemiSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\themiDiffuse += diffuse * hemiColor;\\n\\n\t\t// specular (sky light)\\n\\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\\n\\n\t\t// specular (ground light)\\n\\n\t\tvec3 lVectorGround = -lVector;\\n\\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\\n\\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\\n\\n\t}\\n\\n#endif\\n\\nvec3 totalDiffuse = vec3( 0.0 );\\nvec3 totalSpecular = vec3( 0.0 );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\ttotalDiffuse += dirDiffuse;\\n\ttotalSpecular += dirSpecular;\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\ttotalDiffuse += hemiDiffuse;\\n\ttotalSpecular += hemiSpecular;\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\ttotalDiffuse += pointDiffuse;\\n\ttotalSpecular += pointSpecular;\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\ttotalDiffuse += spotDiffuse;\\n\ttotalSpecular += spotSpecular;\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\\n\\n#else\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tvec3 morphedNormal = vec3( 0.0 );\\n\\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n\tmorphedNormal += normal;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\tuniform samplerCube envMap;\\n\tuniform float flipEnvMap;\\n\tuniform int combine;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform bool useRefract;\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\tuniform sampler2D lightMap;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\ttexelColor.xyz *= texelColor.xyz;\\n\\n\t#endif\\n\\n\tgl_FragColor = gl_FragColor * texelColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tvColor = color * color;\\n\\n\t#else\\n\\n\t\tvColor = color;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\t#ifdef USE_MORPHTARGETS\\n\\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\tuniform bool useRefract;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"#ifdef GAMMA_OUTPUT\\n\\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambient;\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\n\\nuniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tvec3 reflectVec;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\\n\\n\t\tif ( useRefract ) {\\n\\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t} else { \\n\\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\treflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#else\\n\\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#endif\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tcubeColor.xyz *= cubeColor.xyz;\\n\\n\t#endif\\n\\n\tif ( combine == 1 ) {\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\\n\\n\t} else if ( combine == 2 ) {\\n\\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\\n\\n\t} else {\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tconst float LOG2 = 1.442695;\\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"vec3 objectNormal;\\n\\n#ifdef USE_SKINNING\\n\\n\tobjectNormal = skinnedNormal.xyz;\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\\n\\n\tobjectNormal = morphedNormal;\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\\n\\n\tobjectNormal = normal;\\n\\n#endif\\n\\n#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\nvarying vec3 vNormal;\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\tvec3 morphed = vec3( 0.0 );\\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n\tmorphed += position;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\\n\tworldNormal = normalize( worldNormal );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\tif ( useRefract ) {\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t} else {\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\tint inFrustumCount = 0;\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\t\t\t// don't shadow pixels outside of light frustum\\n\t\t\t\t// use just first frustum (for cascades)\\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\\n\\n\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\tinFrustumCount += int( inFrustum );\\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\\n\\n\t\t#else\\n\\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\t#endif\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#else\\n\\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t}\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\tshadowColor *= shadowColor;\\n\\n\t#endif\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#endif\\n\\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\\n\\n\t#endif\\n\\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\t#extension GL_EXT_frag_depth : enable\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( parameter_src instanceof Array ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"lightMap\" : { type: \"t\", value: null },\r\n\t\t\"specularMap\" : { type: \"t\", value: null },\r\n\t\t\"alphaMap\" : { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\" : { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\r\n\t\t\"useRefract\" : { type: \"i\", value: 0 },\r\n\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 },\r\n\t\t\"combine\" : { type: \"i\", value: 0 },\r\n\r\n\t\t\"morphTargetInfluences\" : { type: \"f\", value: 0 }\r\n\r\n\t},\r\n\r\n\tbump: {\r\n\r\n\t\t\"bumpMap\" : { type: \"t\", value: null },\r\n\t\t\"bumpScale\" : { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\" : { type: \"t\", value: null },\r\n\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\t},\r\n\r\n\tfog : {\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\r\n\r\n\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] }\r\n\r\n\t},\r\n\r\n\tparticle: {\r\n\r\n\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"size\" : { type: \"f\", value: 1.0 },\r\n\t\t\"scale\" : { type: \"f\", value: 1.0 },\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tshadowmap: {\r\n\r\n\t\t\"shadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\r\n\r\n\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\r\n\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\r\n\r\n\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_ENVMAP\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define LAMBERT\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\t\t//\"float isFront = float( gl_FrontFacing );\",\r\n\t\t\t\t\t//\"gl_FragColor.xyz *= isFront * vLightFront + ( 1.0 - isFront ) * vLightBack;\",\r\n\r\n\t\t\t\"\t\tif ( gl_FrontFacing )\",\r\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightFront;\",\r\n\t\t\t\"\t\telse\",\r\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightBack;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragColor.xyz *= vLightFront;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bump\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 },\r\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"\tvViewPosition = -mvPosition.xyz;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform vec3 ambient;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\"uniform float shininess;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'particle_basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"particle\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float size;\",\r\n\t\t\t\"uniform float scale;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\r\n\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\r\n\t\t\t\"\t#else\",\r\n\t\t\t\"\t\tgl_PointSize = size;\",\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 psColor;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( psColor, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float scale;\",\r\n\t\t\t\"attribute float lineDistance;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform float dashSize;\",\r\n\t\t\t\"uniform float totalSize;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\r\n\r\n\t\t\t\"\t\tdiscard;\",\r\n\r\n\t\t\t\"\t}\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float mNear;\",\r\n\t\t\t\"uniform float mFar;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float opacity;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tNormal map shader\r\n\t//\t\t- Blinn-Phong\r\n\t//\t\t- normal + diffuse + specular + AO + displacement + reflection + shadow maps\r\n\t//\t\t- point and directional lights (use with \"lights: true\" material option)\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'normalmap' : {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\r\n\t\t\t\"enableAO\"          : { type: \"i\", value: 0 },\r\n\t\t\t\"enableDiffuse\"     : { type: \"i\", value: 0 },\r\n\t\t\t\"enableSpecular\"    : { type: \"i\", value: 0 },\r\n\t\t\t\"enableReflection\"  : { type: \"i\", value: 0 },\r\n\t\t\t\"enableDisplacement\": { type: \"i\", value: 0 },\r\n\r\n\t\t\t\"tDisplacement\": { type: \"t\", value: null }, // must go first as this is vertex texture\r\n\t\t\t\"tDiffuse\"     : { type: \"t\", value: null },\r\n\t\t\t\"tCube\"        : { type: \"t\", value: null },\r\n\t\t\t\"tNormal\"      : { type: \"t\", value: null },\r\n\t\t\t\"tSpecular\"    : { type: \"t\", value: null },\r\n\t\t\t\"tAO\"          : { type: \"t\", value: null },\r\n\r\n\t\t\t\"uNormalScale\": { type: \"v2\", value: new THREE.Vector2( 1, 1 ) },\r\n\r\n\t\t\t\"uDisplacementBias\": { type: \"f\", value: 0.0 },\r\n\t\t\t\"uDisplacementScale\": { type: \"f\", value: 1.0 },\r\n\r\n\t\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xffffff ) },\r\n\t\t\t\"specular\": { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\"ambient\": { type: \"c\", value: new THREE.Color( 0xffffff ) },\r\n\t\t\t\"shininess\": { type: \"f\", value: 30 },\r\n\t\t\t\"opacity\": { type: \"f\", value: 1 },\r\n\r\n\t\t\t\"useRefract\": { type: \"i\", value: 0 },\r\n\t\t\t\"refractionRatio\": { type: \"f\", value: 0.98 },\r\n\t\t\t\"reflectivity\": { type: \"f\", value: 0.5 },\r\n\r\n\t\t\t\"uOffset\" : { type: \"v2\", value: new THREE.Vector2( 0, 0 ) },\r\n\t\t\t\"uRepeat\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) },\r\n\r\n\t\t\t\"wrapRGB\" : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\r\n\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 ambient;\",\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\"uniform float shininess;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform bool enableDiffuse;\",\r\n\t\t\t\"uniform bool enableSpecular;\",\r\n\t\t\t\"uniform bool enableAO;\",\r\n\t\t\t\"uniform bool enableReflection;\",\r\n\r\n\t\t\t\"uniform sampler2D tDiffuse;\",\r\n\t\t\t\"uniform sampler2D tNormal;\",\r\n\t\t\t\"uniform sampler2D tSpecular;\",\r\n\t\t\t\"uniform sampler2D tAO;\",\r\n\r\n\t\t\t\"uniform samplerCube tCube;\",\r\n\r\n\t\t\t\"uniform vec2 uNormalScale;\",\r\n\r\n\t\t\t\"uniform bool useRefract;\",\r\n\t\t\t\"uniform float refractionRatio;\",\r\n\t\t\t\"uniform float reflectivity;\",\r\n\r\n\t\t\t\"varying vec3 vTangent;\",\r\n\t\t\t\"varying vec3 vBinormal;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\t\t\t\"varying vec2 vUv;\",\r\n\r\n\t\t\t\"uniform vec3 ambientLightColor;\",\r\n\r\n\t\t\t\"#if MAX_DIR_LIGHTS > 0\",\r\n\r\n\t\t\t\"\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\",\r\n\t\t\t\"\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\"#if MAX_HEMI_LIGHTS > 0\",\r\n\r\n\t\t\t\"\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\",\r\n\t\t\t\"\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\",\r\n\t\t\t\"\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\"#if MAX_POINT_LIGHTS > 0\",\r\n\r\n\t\t\t\"\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\",\r\n\t\t\t\"\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\",\r\n\t\t\t\"\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\"#if MAX_SPOT_LIGHTS > 0\",\r\n\r\n\t\t\t\"\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\",\r\n\t\t\t\"\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\",\r\n\t\t\t\"\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\",\r\n\t\t\t\"\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\",\r\n\t\t\t\"\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\",\r\n\t\t\t\"\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\"#ifdef WRAP_AROUND\",\r\n\r\n\t\t\t\"\tuniform vec3 wrapRGB;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\r\n\r\n\t\t\t\"\tvec3 specularTex = vec3( 1.0 );\",\r\n\r\n\t\t\t\"\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\",\r\n\t\t\t\"\tnormalTex.xy *= uNormalScale;\",\r\n\t\t\t\"\tnormalTex = normalize( normalTex );\",\r\n\r\n\t\t\t\"\tif( enableDiffuse ) {\",\r\n\r\n\t\t\t\"\t\t#ifdef GAMMA_INPUT\",\r\n\r\n\t\t\t\"\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\",\r\n\t\t\t\"\t\t\ttexelColor.xyz *= texelColor.xyz;\",\r\n\r\n\t\t\t\"\t\t\tgl_FragColor = gl_FragColor * texelColor;\",\r\n\r\n\t\t\t\"\t\t#else\",\r\n\r\n\t\t\t\"\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\",\r\n\r\n\t\t\t\"\t\t#endif\",\r\n\r\n\t\t\t\"\t}\",\r\n\r\n\t\t\t\"\tif( enableAO ) {\",\r\n\r\n\t\t\t\"\t\t#ifdef GAMMA_INPUT\",\r\n\r\n\t\t\t\"\t\t\tvec4 aoColor = texture2D( tAO, vUv );\",\r\n\t\t\t\"\t\t\taoColor.xyz *= aoColor.xyz;\",\r\n\r\n\t\t\t\"\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\",\r\n\r\n\t\t\t\"\t\t#else\",\r\n\r\n\t\t\t\"\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\",\r\n\r\n\t\t\t\"\t\t#endif\",\r\n\r\n\t\t\t\"\t}\",\r\n\t\t\t\r\n\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\r\n\t\t\t\"\tif( enableSpecular )\",\r\n\t\t\t\"\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\",\r\n\r\n\t\t\t\"\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\",\r\n\t\t\t\"\tvec3 finalNormal = tsb * normalTex;\",\r\n\r\n\t\t\t\"\t#ifdef FLIP_SIDED\",\r\n\r\n\t\t\t\"\t\tfinalNormal = -finalNormal;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tvec3 normal = normalize( finalNormal );\",\r\n\t\t\t\"\tvec3 viewPosition = normalize( vViewPosition );\",\r\n\r\n\t\t\t\t// point lights\r\n\r\n\t\t\t\"\t#if MAX_POINT_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\tvec3 pointDiffuse = vec3( 0.0 );\",\r\n\t\t\t\"\t\tvec3 pointSpecular = vec3( 0.0 );\",\r\n\r\n\t\t\t\"\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\",\r\n\r\n\t\t\t\"\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\",\r\n\t\t\t\"\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\",\r\n\r\n\t\t\t\"\t\t\tfloat pointDistance = 1.0;\",\r\n\t\t\t\"\t\t\tif ( pointLightDistance[ i ] > 0.0 )\",\r\n\t\t\t\"\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\",\r\n\r\n\t\t\t\"\t\t\tpointVector = normalize( pointVector );\",\r\n\r\n\t\t\t\t\t\t// diffuse\r\n\r\n\t\t\t\"\t\t\t#ifdef WRAP_AROUND\",\r\n\r\n\t\t\t\"\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\",\r\n\t\t\t\"\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\",\r\n\r\n\t\t\t\"\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\",\r\n\r\n\t\t\t\"\t\t\t#else\",\r\n\r\n\t\t\t\"\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\",\r\n\r\n\t\t\t\"\t\t\t#endif\",\r\n\r\n\t\t\t\"\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\",\r\n\r\n\t\t\t\t\t\t// specular\r\n\r\n\t\t\t\"\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\",\r\n\t\t\t\"\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\",\r\n\t\t\t\"\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\",\r\n\r\n\t\t\t\"\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\r\n\r\n\t\t\t\"\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\",\r\n\t\t\t\"\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\",\r\n\r\n\t\t\t\"\t\t}\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t// spot lights\r\n\r\n\t\t\t\"\t#if MAX_SPOT_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\tvec3 spotDiffuse = vec3( 0.0 );\",\r\n\t\t\t\"\t\tvec3 spotSpecular = vec3( 0.0 );\",\r\n\r\n\t\t\t\"\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\",\r\n\r\n\t\t\t\"\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\",\r\n\t\t\t\"\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\",\r\n\r\n\t\t\t\"\t\t\tfloat spotDistance = 1.0;\",\r\n\t\t\t\"\t\t\tif ( spotLightDistance[ i ] > 0.0 )\",\r\n\t\t\t\"\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\",\r\n\r\n\t\t\t\"\t\t\tspotVector = normalize( spotVector );\",\r\n\r\n\t\t\t\"\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\",\r\n\r\n\t\t\t\"\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\",\r\n\r\n\t\t\t\"\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\",\r\n\r\n\t\t\t\t\t\t\t// diffuse\r\n\r\n\t\t\t\"\t\t\t\t#ifdef WRAP_AROUND\",\r\n\r\n\t\t\t\"\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\",\r\n\t\t\t\"\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\",\r\n\r\n\t\t\t\"\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\",\r\n\r\n\t\t\t\"\t\t\t\t#else\",\r\n\r\n\t\t\t\"\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\",\r\n\r\n\t\t\t\"\t\t\t\t#endif\",\r\n\r\n\t\t\t\"\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\",\r\n\r\n\t\t\t\t\t\t\t// specular\r\n\r\n\t\t\t\"\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\",\r\n\t\t\t\"\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\",\r\n\t\t\t\"\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\",\r\n\r\n\t\t\t\"\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\r\n\r\n\t\t\t\"\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\",\r\n\t\t\t\"\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\",\r\n\r\n\t\t\t\"\t\t\t}\",\r\n\r\n\t\t\t\"\t\t}\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t// directional lights\r\n\r\n\t\t\t\"\t#if MAX_DIR_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\tvec3 dirDiffuse = vec3( 0.0 );\",\r\n\t\t\t\"\t\tvec3 dirSpecular = vec3( 0.0 );\",\r\n\r\n\t\t\t\"\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\",\r\n\r\n\t\t\t\"\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\",\r\n\t\t\t\"\t\t\tvec3 dirVector = normalize( lDirection.xyz );\",\r\n\r\n\t\t\t\t\t\t// diffuse\r\n\r\n\t\t\t\"\t\t\t#ifdef WRAP_AROUND\",\r\n\r\n\t\t\t\"\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\",\r\n\t\t\t\"\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\",\r\n\r\n\t\t\t\"\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\",\r\n\r\n\t\t\t\"\t\t\t#else\",\r\n\r\n\t\t\t\"\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\",\r\n\r\n\t\t\t\"\t\t\t#endif\",\r\n\r\n\t\t\t\"\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\",\r\n\r\n\t\t\t\t\t\t// specular\r\n\r\n\t\t\t\"\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\",\r\n\t\t\t\"\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\",\r\n\t\t\t\"\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\",\r\n\r\n\t\t\t\"\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\r\n\r\n\t\t\t\"\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\",\r\n\t\t\t\"\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\",\r\n\r\n\t\t\t\"\t\t}\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t// hemisphere lights\r\n\r\n\t\t\t\"\t#if MAX_HEMI_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\tvec3 hemiDiffuse = vec3( 0.0 );\",\r\n\t\t\t\"\t\tvec3 hemiSpecular = vec3( 0.0 );\" ,\r\n\r\n\t\t\t\"\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\",\r\n\r\n\t\t\t\"\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\",\r\n\t\t\t\"\t\t\tvec3 lVector = normalize( lDirection.xyz );\",\r\n\r\n\t\t\t\t\t\t// diffuse\r\n\r\n\t\t\t\"\t\t\tfloat dotProduct = dot( normal, lVector );\",\r\n\t\t\t\"\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\",\r\n\r\n\t\t\t\"\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\",\r\n\r\n\t\t\t\"\t\t\themiDiffuse += diffuse * hemiColor;\",\r\n\r\n\t\t\t\t\t\t// specular (sky light)\r\n\r\n\r\n\t\t\t\"\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\",\r\n\t\t\t\"\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\",\r\n\t\t\t\"\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\",\r\n\r\n\t\t\t\t\t\t// specular (ground light)\r\n\r\n\t\t\t\"\t\t\tvec3 lVectorGround = -lVector;\",\r\n\r\n\t\t\t\"\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\",\r\n\t\t\t\"\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\",\r\n\t\t\t\"\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\",\r\n\r\n\t\t\t\"\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\",\r\n\r\n\t\t\t\"\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\r\n\r\n\t\t\t\"\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\",\r\n\t\t\t\"\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\",\r\n\t\t\t\"\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\",\r\n\r\n\t\t\t\"\t\t}\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t// all lights contribution summation\r\n\r\n\t\t\t\"\tvec3 totalDiffuse = vec3( 0.0 );\",\r\n\t\t\t\"\tvec3 totalSpecular = vec3( 0.0 );\",\r\n\r\n\t\t\t\"\t#if MAX_DIR_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\ttotalDiffuse += dirDiffuse;\",\r\n\t\t\t\"\t\ttotalSpecular += dirSpecular;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\t#if MAX_HEMI_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\ttotalDiffuse += hemiDiffuse;\",\r\n\t\t\t\"\t\ttotalSpecular += hemiSpecular;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\t#if MAX_POINT_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\ttotalDiffuse += pointDiffuse;\",\r\n\t\t\t\"\t\ttotalSpecular += pointSpecular;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\t#if MAX_SPOT_LIGHTS > 0\",\r\n\r\n\t\t\t\"\t\ttotalDiffuse += spotDiffuse;\",\r\n\t\t\t\"\t\ttotalSpecular += spotSpecular;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\t#ifdef METAL\",\r\n\r\n\t\t\t\"\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tif ( enableReflection ) {\",\r\n\r\n\t\t\t\"\t\tvec3 vReflect;\",\r\n\t\t\t\"\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\",\r\n\r\n\t\t\t\"\t\tif ( useRefract ) {\",\r\n\r\n\t\t\t\"\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\",\r\n\r\n\t\t\t\"\t\t} else {\",\r\n\r\n\t\t\t\"\t\t\tvReflect = reflect( cameraToVertex, normal );\",\r\n\r\n\t\t\t\"\t\t}\",\r\n\r\n\t\t\t\"\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\",\r\n\r\n\t\t\t\"\t\t#ifdef GAMMA_INPUT\",\r\n\r\n\t\t\t\"\t\t\tcubeColor.xyz *= cubeColor.xyz;\",\r\n\r\n\t\t\t\"\t\t#endif\",\r\n\r\n\t\t\t\"\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\",\r\n\r\n\t\t\t\"\t}\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"attribute vec4 tangent;\",\r\n\r\n\t\t\t\"uniform vec2 uOffset;\",\r\n\t\t\t\"uniform vec2 uRepeat;\",\r\n\r\n\t\t\t\"uniform bool enableDisplacement;\",\r\n\r\n\t\t\t\"#ifdef VERTEX_TEXTURES\",\r\n\r\n\t\t\t\"\tuniform sampler2D tDisplacement;\",\r\n\t\t\t\"\tuniform float uDisplacementScale;\",\r\n\t\t\t\"\tuniform float uDisplacementBias;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\"varying vec3 vTangent;\",\r\n\t\t\t\"varying vec3 vBinormal;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\t\t\t\"varying vec2 vUv;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\r\n\t\t\t\t// normal, tangent and binormal vectors\r\n\r\n\t\t\t\"\t#ifdef USE_SKINNING\",\r\n\r\n\t\t\t\"\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\",\r\n\r\n\t\t\t\"\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\",\r\n\t\t\t\"\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tvNormal = normalize( normalMatrix * normal );\",\r\n\t\t\t\"\t\tvTangent = normalize( normalMatrix * tangent.xyz );\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\",\r\n\r\n\t\t\t\"\tvUv = uv * uRepeat + uOffset;\",\r\n\r\n\t\t\t\t// displacement mapping\r\n\r\n\t\t\t\"\tvec3 displacedPosition;\",\r\n\r\n\t\t\t\"\t#ifdef VERTEX_TEXTURES\",\r\n\r\n\t\t\t\"\t\tif ( enableDisplacement ) {\",\r\n\r\n\t\t\t\"\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\",\r\n\t\t\t\"\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\",\r\n\t\t\t\"\t\t\tdisplacedPosition = position + normalize( normal ) * df;\",\r\n\r\n\t\t\t\"\t\t} else {\",\r\n\r\n\t\t\t\"\t\t\t#ifdef USE_SKINNING\",\r\n\r\n\t\t\t\"\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\"\t\t\t\tvec4 skinned = vec4( 0.0 );\",\r\n\t\t\t\"\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\",\r\n\t\t\t\"\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\",\r\n\t\t\t\"\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\",\r\n\t\t\t\"\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\",\r\n\t\t\t\"\t\t\t\tskinned  = bindMatrixInverse * skinned;\",\r\n\r\n\t\t\t\"\t\t\t\tdisplacedPosition = skinned.xyz;\",\r\n\r\n\t\t\t\"\t\t\t#else\",\r\n\r\n\t\t\t\"\t\t\t\tdisplacedPosition = position;\",\r\n\r\n\t\t\t\"\t\t\t#endif\",\r\n\r\n\t\t\t\"\t\t}\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\t#ifdef USE_SKINNING\",\r\n\r\n\t\t\t\"\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\"\t\t\tvec4 skinned = vec4( 0.0 );\",\r\n\t\t\t\"\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\",\r\n\t\t\t\"\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\",\r\n\t\t\t\"\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\",\r\n\t\t\t\"\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\",\r\n\t\t\t\"\t\t\tskinned  = bindMatrixInverse * skinned;\",\r\n\r\n\t\t\t\"\t\t\tdisplacedPosition = skinned.xyz;\",\r\n\r\n\t\t\t\"\t\t#else\",\r\n\r\n\t\t\t\"\t\t\tdisplacedPosition = position;\",\r\n\r\n\t\t\t\"\t\t#endif\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\",\r\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\r\n\t\t\t\"\tvViewPosition = -mvPosition.xyz;\",\r\n\r\n\t\t\t\t// shadows\r\n\r\n\t\t\t\"\t#ifdef USE_SHADOWMAP\",\r\n\r\n\t\t\t\"\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\",\r\n\r\n\t\t\t\"\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\",\r\n\r\n\t\t\t\"\t\t}\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\r\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform samplerCube tCube;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t/* Depth encoding into RGBA texture\r\n\t *\r\n\t * based on SpiderGL shadow map example\r\n\t * http://spidergl.org/example.php?id=6\r\n\t *\r\n\t * originally from\r\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t *\r\n\t * see also\r\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t */\r\n\r\n\t'depthRGBA': {\r\n\r\n\t\tuniforms: {},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\r\n\r\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\r\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\r\n\t\t\t\"\treturn res;\",\r\n\r\n\t\t\t\"}\",\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\r\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t_precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\t_logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false,\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar _webglObjects = {};\r\n\tvar _webglObjectsImmediate = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar transparentObjects = [];\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\tthis.devicePixelRatio = parameters.devicePixelRatio !== undefined\r\n\t\t\t\t ? parameters.devicePixelRatio\r\n\t\t\t\t : self.devicePixelRatio !== undefined\r\n\t\t\t\t\t ? self.devicePixelRatio\r\n\t\t\t\t\t : 1;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// shadow map\r\n\r\n\tthis.shadowMapEnabled = false;\r\n\tthis.shadowMapType = THREE.PCFShadowMap;\r\n\tthis.shadowMapCullFace = THREE.CullFaceFront;\r\n\tthis.shadowMapDebug = false;\r\n\tthis.shadowMapCascade = false;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// info\r\n\r\n\tthis.info = {\r\n\r\n\t\tmemory: {\r\n\r\n\t\t\tprograms: 0,\r\n\t\t\tgeometries: 0,\r\n\t\t\ttextures: 0\r\n\r\n\t\t},\r\n\r\n\t\trender: {\r\n\r\n\t\t\tcalls: 0,\r\n\t\t\tvertices: 0,\r\n\t\t\tfaces: 0,\r\n\t\t\tpoints: 0\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t_programs = [],\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryGroupHash = - 1,\r\n\t_currentCamera = null,\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t// GL state cache\r\n\r\n\t_oldDoubleSided = - 1,\r\n\t_oldFlipSided = - 1,\r\n\r\n\t_oldBlending = - 1,\r\n\r\n\t_oldBlendEquation = - 1,\r\n\t_oldBlendSrc = - 1,\r\n\t_oldBlendDst = - 1,\r\n\r\n\t_oldDepthTest = - 1,\r\n\t_oldDepthWrite = - 1,\r\n\r\n\t_oldPolygonOffset = null,\r\n\t_oldPolygonOffsetFactor = null,\r\n\t_oldPolygonOffsetUnits = null,\r\n\r\n\t_oldLineWidth = null,\r\n\r\n\t_viewportX = 0,\r\n\t_viewportY = 0,\r\n\t_viewportWidth = _canvas.width,\r\n\t_viewportHeight = _canvas.height,\r\n\t_currentWidth = 0,\r\n\t_currentHeight = 0,\r\n\r\n\t_newAttributes = new Uint8Array( 16 ),\r\n\t_enabledAttributes = new Uint8Array( 16 ),\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t // camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\t_projScreenMatrixPS = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_direction = new THREE.Vector3(),\r\n\r\n\t_lightsNeedUpdate = true,\r\n\r\n\t_lights = {\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: { length: 0, colors:[], positions: [] },\r\n\t\tpoint: { length: 0, colors: [], positions: [], distances: [] },\r\n\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [] },\r\n\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\r\n\r\n\t};\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl') !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( error );\r\n\r\n\t}\r\n\r\n\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\treturn {\r\n\t\t\t\t'rangeMin': 1,\r\n\t\t\t\t'rangeMax': 1,\r\n\t\t\t\t'precision': 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\r\n\tif ( _logarithmicDepthBuffer ) {\r\n\r\n\t\textensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setDefaultGLState() {\r\n\r\n\t\t_gl.clearColor( 0, 0, 0, 1 );\r\n\t\t_gl.clearDepth( 1 );\r\n\t\t_gl.clearStencil( 0 );\r\n\r\n\t\t_gl.enable( _gl.DEPTH_TEST );\r\n\t\t_gl.depthFunc( _gl.LEQUAL );\r\n\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\t\t_gl.cullFace( _gl.BACK );\r\n\t\t_gl.enable( _gl.CULL_FACE );\r\n\r\n\t\t_gl.enable( _gl.BLEND );\r\n\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t}\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\r\n\t// GPU capabilities\r\n\r\n\tvar _maxTextures = _gl.getParameter( _gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tvar _maxVertexTextures = _gl.getParameter( _gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tvar _maxTextureSize = _gl.getParameter( _gl.MAX_TEXTURE_SIZE );\r\n\tvar _maxCubemapSize = _gl.getParameter( _gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tvar _supportsVertexTextures = _maxVertexTextures > 0;\r\n\tvar _supportsBoneTextures = _supportsVertexTextures && extensions.get( 'OES_texture_float' );\r\n\r\n\t//\r\n\r\n\tvar _vertexShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.HIGH_FLOAT );\r\n\tvar _vertexShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.MEDIUM_FLOAT );\r\n\tvar _vertexShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.LOW_FLOAT );\r\n\r\n\tvar _fragmentShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.HIGH_FLOAT );\r\n\tvar _fragmentShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.MEDIUM_FLOAT );\r\n\tvar _fragmentShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.LOW_FLOAT );\r\n\r\n\tvar getCompressedTextureFormats = ( function () {\r\n\r\n\t\tvar array;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( array !== undefined ) {\r\n\r\n\t\t\t\treturn array;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) || extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\r\n\r\n\t\t\t\tvar formats = _gl.getParameter( _gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ){\r\n\r\n\t\t\t\t\tarray.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n\t// clamp precision to maximum available\r\n\r\n\tvar highpAvailable = _vertexShaderPrecisionHighpFloat.precision > 0 && _fragmentShaderPrecisionHighpFloat.precision > 0;\r\n\tvar mediumpAvailable = _vertexShaderPrecisionMediumpFloat.precision > 0 && _fragmentShaderPrecisionMediumpFloat.precision > 0;\r\n\r\n\tif ( _precision === 'highp' && ! highpAvailable ) {\r\n\r\n\t\tif ( mediumpAvailable ) {\r\n\r\n\t\t\t_precision = 'mediump';\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp not supported, using mediump.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_precision = 'lowp';\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp and mediump not supported, using lowp.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( _precision === 'mediump' && ! mediumpAvailable ) {\r\n\r\n\t\t_precision = 'lowp';\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: mediump not supported, using lowp.' );\r\n\r\n\t}\r\n\r\n\t// Plugins\r\n\r\n\tvar shadowMapPlugin = new THREE.ShadowMapPlugin( this, lights, _webglObjects, _webglObjectsImmediate );\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.supportsVertexTextures = function () {\r\n\r\n\t\treturn _supportsVertexTextures;\r\n\r\n\t};\r\n\r\n\tthis.supportsFloatTextures = function () {\r\n\r\n\t\treturn extensions.get( 'OES_texture_float' );\r\n\r\n\t};\r\n\r\n\tthis.supportsStandardDerivatives = function () {\r\n\r\n\t\treturn extensions.get( 'OES_standard_derivatives' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTextureS3TC = function () {\r\n\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTexturePVRTC = function () {\r\n\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsBlendMinMax = function () {\r\n\r\n\t\treturn extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tvalue = extension !== null ? _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT ) : 0;\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t}\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn _precision;\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_canvas.width = width * this.devicePixelRatio;\r\n\t\t_canvas.height = height * this.devicePixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\t_viewportX = x * this.devicePixelRatio;\r\n\t\t_viewportY = y * this.devicePixelRatio;\r\n\r\n\t\t_viewportWidth = width * this.devicePixelRatio;\r\n\t\t_viewportHeight = height * this.devicePixelRatio;\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\t_gl.scissor(\r\n\t\t\tx * this.devicePixelRatio,\r\n\t\t\ty * this.devicePixelRatio,\r\n\t\t\twidth * this.devicePixelRatio,\r\n\t\t\theight * this.devicePixelRatio\r\n\t\t);\r\n\r\n\t};\r\n\r\n\tthis.enableScissorTest = function ( enable ) {\r\n\r\n\t\tenable ? _gl.enable( _gl.SCISSOR_TEST ) : _gl.disable( _gl.SCISSOR_TEST );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.setClearColorHex = function ( hex, alpha ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.' );\r\n\t\tthis.setClearColor( hex, alpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = function () {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_oldBlending = - 1;\r\n\t\t_oldDepthTest = - 1;\r\n\t\t_oldDepthWrite = - 1;\r\n\t\t_oldDoubleSided = - 1;\r\n\t\t_oldFlipSided = - 1;\r\n\t\t_currentGeometryGroupHash = - 1;\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t};\r\n\r\n\t// Buffer allocation\r\n\r\n\tfunction createParticleBuffers ( geometry ) {\r\n\r\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\r\n\r\n\t\t_this.info.memory.geometries ++;\r\n\r\n\t};\r\n\r\n\tfunction createLineBuffers ( geometry ) {\r\n\r\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\r\n\t\tgeometry.__webglLineDistanceBuffer = _gl.createBuffer();\r\n\r\n\t\t_this.info.memory.geometries ++;\r\n\r\n\t};\r\n\r\n\tfunction createMeshBuffers ( geometryGroup ) {\r\n\r\n\t\tgeometryGroup.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglNormalBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglTangentBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglColorBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglUVBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglUV2Buffer = _gl.createBuffer();\r\n\r\n\t\tgeometryGroup.__webglSkinIndicesBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglSkinWeightsBuffer = _gl.createBuffer();\r\n\r\n\t\tgeometryGroup.__webglFaceBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglLineBuffer = _gl.createBuffer();\r\n\r\n\t\tvar m, ml;\r\n\r\n\t\tif ( geometryGroup.numMorphTargets ) {\r\n\r\n\t\t\tgeometryGroup.__webglMorphTargetsBuffers = [];\r\n\r\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__webglMorphTargetsBuffers.push( _gl.createBuffer() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometryGroup.numMorphNormals ) {\r\n\r\n\t\t\tgeometryGroup.__webglMorphNormalsBuffers = [];\r\n\r\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__webglMorphNormalsBuffers.push( _gl.createBuffer() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_this.info.memory.geometries ++;\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tvar onObjectRemoved = function ( event ) {\r\n\r\n\t\tvar object = event.target;\r\n\r\n\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\tchild.removeEventListener( 'remove', onObjectRemoved );\r\n\r\n\t\t\tremoveObject( child );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tvar onGeometryDispose = function ( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdeallocateGeometry( geometry );\r\n\r\n\t};\r\n\r\n\tvar onTextureDispose = function ( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_this.info.memory.textures --;\r\n\r\n\r\n\t};\r\n\r\n\tvar onRenderTargetDispose = function ( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_this.info.memory.textures --;\r\n\r\n\t};\r\n\r\n\tvar onMaterialDispose = function ( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t};\r\n\r\n\t// Buffer deallocation\r\n\r\n\tvar deleteBuffers = function ( geometry ) {\r\n\t\r\n\t\tvar buffers = [\r\n\t\t\t'__webglVertexBuffer',\r\n\t\t\t'__webglNormalBuffer',\r\n\t\t\t'__webglTangentBuffer',\r\n\t\t\t'__webglColorBuffer',\r\n\t\t\t'__webglUVBuffer',\r\n\t\t\t'__webglUV2Buffer',\r\n\t\t\t\r\n\t\t\t'__webglSkinIndicesBuffer',\r\n\t\t\t'__webglSkinWeightsBuffer',\r\n\t\t\t\r\n\t\t\t'__webglFaceBuffer',\r\n\t\t\t'__webglLineBuffer',\r\n\t\t\t\r\n\t\t\t'__webglLineDistanceBuffer'\r\n\t\t];\r\n\r\n\t\tfor ( var i = 0, l = buffers.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar name = buffers[ i ];\r\n\r\n\t\t\tif ( geometry[ name ] !== undefined ) {\r\n\r\n\t\t\t\t_gl.deleteBuffer( geometry[ name ] );\r\n\r\n\t\t\t\tdelete geometry[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// custom attributes\r\n\r\n\t\tif ( geometry.__webglCustomAttributesList !== undefined ) {\r\n\r\n\t\t\tfor ( var name in geometry.__webglCustomAttributesList ) {\r\n\r\n\t\t\t\t_gl.deleteBuffer( geometry.__webglCustomAttributesList[ name ].buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete geometry.__webglCustomAttributesList;\r\n\r\n\t\t}\r\n\r\n\t\t_this.info.memory.geometries --;\r\n\r\n\t};\r\n\r\n\tvar deallocateGeometry = function ( geometry ) {\r\n\r\n\t\tdelete geometry.__webglInit;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tfor ( var name in geometry.attributes ) {\r\n\t\t\t\r\n\t\t\t\tvar attribute = geometry.attributes[ name ];\r\n\r\n\t\t\t\tif ( attribute.buffer !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.deleteBuffer( attribute.buffer );\r\n\r\n\t\t\t\t\tdelete attribute.buffer;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.info.memory.geometries --;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t\tif ( geometryGroupsList !== undefined ) {\r\n\r\n\t\t\t\tfor ( var i = 0,l = geometryGroupsList.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\r\n\r\n\t\t\t\t\tif ( geometryGroup.numMorphTargets !== undefined ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphTargetsBuffers[ m ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphTargetsBuffers;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( geometryGroup.numMorphNormals !== undefined ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphNormalsBuffers[ m ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphNormalsBuffers;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeleteBuffers( geometryGroup );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete geometryGroups[ geometry.id ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdeleteBuffers( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// TOFIX: Workaround for deleted geometry being currently bound\r\n\r\n\t\t_currentGeometryGroupHash = - 1;\r\n\r\n\t};\r\n\r\n\tvar deallocateTexture = function ( texture ) {\r\n\r\n\t\tif ( texture.image && texture.image.__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( texture.image.__webglTextureCube );\r\n\r\n\t\t\tdelete texture.image.__webglTextureCube;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( texture.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( texture.__webglTexture );\r\n\r\n\t\t\tdelete texture.__webglTexture;\r\n\t\t\tdelete texture.__webglInit;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar deallocateRenderTarget = function ( renderTarget ) {\r\n\r\n\t\tif ( ! renderTarget || renderTarget.__webglTexture === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( renderTarget.__webglTexture );\r\n\r\n\t\tdelete renderTarget.__webglTexture;\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer[ i ] );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer );\r\n\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tdelete renderTarget.__webglFramebuffer;\r\n\t\tdelete renderTarget.__webglRenderbuffer;\r\n\r\n\t};\r\n\r\n\tvar deallocateMaterial = function ( material ) {\r\n\r\n\t\tvar program = material.program.program;\r\n\r\n\t\tif ( program === undefined ) return;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\t// only deallocate GL program if this was the last use of shared program\r\n\t\t// assumed there is only single copy of any program in the _programs list\r\n\t\t// (that's how it's constructed)\r\n\r\n\t\tvar i, il, programInfo;\r\n\t\tvar deleteProgram = false;\r\n\r\n\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\r\n\r\n\t\t\tprogramInfo = _programs[ i ];\r\n\r\n\t\t\tif ( programInfo.program === program ) {\r\n\r\n\t\t\t\tprogramInfo.usedTimes --;\r\n\r\n\t\t\t\tif ( programInfo.usedTimes === 0 ) {\r\n\r\n\t\t\t\t\tdeleteProgram = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( deleteProgram === true ) {\r\n\r\n\t\t\t// avoid using array.splice, this is costlier than creating new array from scratch\r\n\r\n\t\t\tvar newPrograms = [];\r\n\r\n\t\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tprogramInfo = _programs[ i ];\r\n\r\n\t\t\t\tif ( programInfo.program !== program ) {\r\n\r\n\t\t\t\t\tnewPrograms.push( programInfo );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_programs = newPrograms;\r\n\r\n\t\t\t_gl.deleteProgram( program );\r\n\r\n\t\t\t_this.info.memory.programs --;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Buffer initialization\r\n\r\n\tfunction initCustomAttributes ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar material = object.material;\r\n\r\n\t\tvar nvertices = geometry.vertices.length;\r\n\r\n\t\tif ( material.attributes ) {\r\n\r\n\t\t\tif ( geometry.__webglCustomAttributesList === undefined ) {\r\n\r\n\t\t\t\tgeometry.__webglCustomAttributesList = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\t\tvar attribute = material.attributes[ name ];\r\n\r\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\r\n\r\n\t\t\t\t\tattribute.__webglInitialized = true;\r\n\r\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\r\n\r\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\r\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\r\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\r\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\r\n\r\n\t\t\t\t\tattribute.size = size;\r\n\r\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\r\n\r\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\r\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\r\n\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.__webglCustomAttributesList.push( attribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction initParticleBuffers ( geometry, object ) {\r\n\r\n\t\tvar nvertices = geometry.vertices.length;\r\n\r\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\r\n\r\n\t\tgeometry.__sortArray = [];\r\n\r\n\t\tgeometry.__webglParticleCount = nvertices;\r\n\r\n\t\tinitCustomAttributes( object );\r\n\r\n\t};\r\n\r\n\tfunction initLineBuffers ( geometry, object ) {\r\n\r\n\t\tvar nvertices = geometry.vertices.length;\r\n\r\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometry.__lineDistanceArray = new Float32Array( nvertices * 1 );\r\n\r\n\t\tgeometry.__webglLineCount = nvertices;\r\n\r\n\t\tinitCustomAttributes( object );\r\n\r\n\t};\r\n\r\n\tfunction initMeshBuffers ( geometryGroup, object ) {\r\n\r\n\t\tvar geometry = object.geometry,\r\n\t\t\tfaces3 = geometryGroup.faces3,\r\n\r\n\t\t\tnvertices = faces3.length * 3,\r\n\t\t\tntris     = faces3.length * 1,\r\n\t\t\tnlines    = faces3.length * 3,\r\n\r\n\t\t\tmaterial = getBufferMaterial( object, geometryGroup );\r\n\r\n\t\tgeometryGroup.__vertexArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometryGroup.__normalArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometryGroup.__colorArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometryGroup.__uvArray = new Float32Array( nvertices * 2 );\r\n\r\n\t\tif ( geometry.faceVertexUvs.length > 1 ) {\r\n\r\n\t\t\tgeometryGroup.__uv2Array = new Float32Array( nvertices * 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.hasTangents ) {\r\n\r\n\t\t\tgeometryGroup.__tangentArray = new Float32Array( nvertices * 4 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.geometry.skinWeights.length && object.geometry.skinIndices.length ) {\r\n\r\n\t\t\tgeometryGroup.__skinIndexArray = new Float32Array( nvertices * 4 );\r\n\t\t\tgeometryGroup.__skinWeightArray = new Float32Array( nvertices * 4 );\r\n\r\n\t\t}\r\n\r\n\t\tvar UintArray = extensions.get( 'OES_element_index_uint' ) !== null && ntris > 21845 ? Uint32Array : Uint16Array; // 65535 / 3\r\n\r\n\t\tgeometryGroup.__typeArray = UintArray;\r\n\t\tgeometryGroup.__faceArray = new UintArray( ntris * 3 );\r\n\t\tgeometryGroup.__lineArray = new UintArray( nlines * 2 );\r\n\r\n\t\tvar m, ml;\r\n\r\n\t\tif ( geometryGroup.numMorphTargets ) {\r\n\r\n\t\t\tgeometryGroup.__morphTargetsArrays = [];\r\n\r\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__morphTargetsArrays.push( new Float32Array( nvertices * 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometryGroup.numMorphNormals ) {\r\n\r\n\t\t\tgeometryGroup.__morphNormalsArrays = [];\r\n\r\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__morphNormalsArrays.push( new Float32Array( nvertices * 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometryGroup.__webglFaceCount = ntris * 3;\r\n\t\tgeometryGroup.__webglLineCount = nlines * 2;\r\n\r\n\r\n\t\t// custom attributes\r\n\r\n\t\tif ( material.attributes ) {\r\n\r\n\t\t\tif ( geometryGroup.__webglCustomAttributesList === undefined ) {\r\n\r\n\t\t\t\tgeometryGroup.__webglCustomAttributesList = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\t\t// Do a shallow copy of the attribute object so different geometryGroup chunks use different\r\n\t\t\t\t// attribute buffers which are correctly indexed in the setMeshBuffers function\r\n\r\n\t\t\t\tvar originalAttribute = material.attributes[ name ];\r\n\r\n\t\t\t\tvar attribute = {};\r\n\r\n\t\t\t\tfor ( var property in originalAttribute ) {\r\n\r\n\t\t\t\t\tattribute[ property ] = originalAttribute[ property ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\r\n\r\n\t\t\t\t\tattribute.__webglInitialized = true;\r\n\r\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\r\n\r\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\r\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\r\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\r\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\r\n\r\n\t\t\t\t\tattribute.size = size;\r\n\r\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\r\n\r\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\r\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\r\n\r\n\t\t\t\t\toriginalAttribute.needsUpdate = true;\r\n\t\t\t\t\tattribute.__original = originalAttribute;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometryGroup.__webglCustomAttributesList.push( attribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometryGroup.__inittedArrays = true;\r\n\r\n\t};\r\n\r\n\tfunction getBufferMaterial( object, geometryGroup ) {\r\n\r\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\r\n\t\t\t ? object.material.materials[ geometryGroup.materialIndex ]\r\n\t\t\t : object.material;\r\n\r\n\t};\r\n\r\n\tfunction materialNeedsSmoothNormals ( material ) {\r\n\r\n\t\treturn material && material.shading !== undefined && material.shading === THREE.SmoothShading;\r\n\r\n\t};\r\n\r\n\t// Buffer setting\r\n\r\n\tfunction setParticleBuffers ( geometry, hint, object ) {\r\n\r\n\t\tvar v, c, vertex, offset, index, color,\r\n\r\n\t\tvertices = geometry.vertices,\r\n\t\tvl = vertices.length,\r\n\r\n\t\tcolors = geometry.colors,\r\n\t\tcl = colors.length,\r\n\r\n\t\tvertexArray = geometry.__vertexArray,\r\n\t\tcolorArray = geometry.__colorArray,\r\n\r\n\t\tsortArray = geometry.__sortArray,\r\n\r\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\r\n\t\tdirtyElements = geometry.elementsNeedUpdate,\r\n\t\tdirtyColors = geometry.colorsNeedUpdate,\r\n\r\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\r\n\t\ti, il,\r\n\t\ta, ca, cal, value,\r\n\t\tcustomAttribute;\r\n\r\n\t\tif ( object.sortParticles ) {\r\n\r\n\t\t\t_projScreenMatrixPS.copy( _projScreenMatrix );\r\n\t\t\t_projScreenMatrixPS.multiply( object.matrixWorld );\r\n\r\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\r\n\r\n\t\t\t\tvertex = vertices[ v ];\r\n\r\n\t\t\t\t_vector3.copy( vertex );\r\n\t\t\t\t_vector3.applyProjection( _projScreenMatrixPS );\r\n\r\n\t\t\t\tsortArray[ v ] = [ _vector3.z, v ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsortArray.sort( numericalSort );\r\n\r\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\r\n\r\n\t\t\t\tvertex = vertices[ sortArray[ v ][ 1 ] ];\r\n\r\n\t\t\t\toffset = v * 3;\r\n\r\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\r\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\r\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\r\n\r\n\t\t\t\toffset = c * 3;\r\n\r\n\t\t\t\tcolor = colors[ sortArray[ c ][ 1 ] ];\r\n\r\n\t\t\t\tcolorArray[ offset ]     = color.r;\r\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\r\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( customAttributes ) {\r\n\r\n\t\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\t\tif ( ! ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) ) continue;\r\n\r\n\t\t\t\t\toffset = 0;\r\n\r\n\t\t\t\t\tcal = customAttribute.value.length;\r\n\r\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ index ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\r\n\t\t\t\t\t\t\toffset += 2;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\r\n\r\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]     = value.r;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]      = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\r\n\r\n\t\t\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( dirtyVertices ) {\r\n\r\n\t\t\t\tfor ( v = 0; v < vl; v ++ ) {\r\n\r\n\t\t\t\t\tvertex = vertices[ v ];\r\n\r\n\t\t\t\t\toffset = v * 3;\r\n\r\n\t\t\t\t\tvertexArray[ offset ]     = vertex.x;\r\n\t\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\r\n\t\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( dirtyColors ) {\r\n\r\n\t\t\t\tfor ( c = 0; c < cl; c ++ ) {\r\n\r\n\t\t\t\t\tcolor = colors[ c ];\r\n\r\n\t\t\t\t\toffset = c * 3;\r\n\r\n\t\t\t\t\tcolorArray[ offset ]     = color.r;\r\n\t\t\t\t\tcolorArray[ offset + 1 ] = color.g;\r\n\t\t\t\t\tcolorArray[ offset + 2 ] = color.b;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( customAttributes ) {\r\n\r\n\t\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\t\tif ( customAttribute.needsUpdate &&\r\n\t\t\t\t\t\t ( customAttribute.boundTo === undefined ||\r\n\t\t\t\t\t\t\t customAttribute.boundTo === 'vertices' ) ) {\r\n\r\n\t\t\t\t\t\tcal = customAttribute.value.length;\r\n\r\n\t\t\t\t\t\toffset = 0;\r\n\r\n\t\t\t\t\t\tif ( customAttribute.size === 1 ) {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\r\n\t\t\t\t\t\t\t\toffset += 2;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\r\n\r\n\t\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\r\n\r\n\t\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\r\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\r\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\r\n\r\n\t\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\r\n\r\n\t\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]      = value.x;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\r\n\r\n\t\t\t\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyVertices || object.sortParticles ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyColors || object.sortParticles ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( customAttributes ) {\r\n\r\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\tif ( customAttribute.needsUpdate || object.sortParticles ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\r\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setLineBuffers ( geometry, hint ) {\r\n\r\n\t\tvar v, c, d, vertex, offset, color,\r\n\r\n\t\tvertices = geometry.vertices,\r\n\t\tcolors = geometry.colors,\r\n\t\tlineDistances = geometry.lineDistances,\r\n\r\n\t\tvl = vertices.length,\r\n\t\tcl = colors.length,\r\n\t\tdl = lineDistances.length,\r\n\r\n\t\tvertexArray = geometry.__vertexArray,\r\n\t\tcolorArray = geometry.__colorArray,\r\n\t\tlineDistanceArray = geometry.__lineDistanceArray,\r\n\r\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\r\n\t\tdirtyColors = geometry.colorsNeedUpdate,\r\n\t\tdirtyLineDistances = geometry.lineDistancesNeedUpdate,\r\n\r\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\r\n\r\n\t\ti, il,\r\n\t\ta, ca, cal, value,\r\n\t\tcustomAttribute;\r\n\r\n\t\tif ( dirtyVertices ) {\r\n\r\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\r\n\r\n\t\t\t\tvertex = vertices[ v ];\r\n\r\n\t\t\t\toffset = v * 3;\r\n\r\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\r\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\r\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyColors ) {\r\n\r\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\r\n\r\n\t\t\t\tcolor = colors[ c ];\r\n\r\n\t\t\t\toffset = c * 3;\r\n\r\n\t\t\t\tcolorArray[ offset ]     = color.r;\r\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\r\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyLineDistances ) {\r\n\r\n\t\t\tfor ( d = 0; d < dl; d ++ ) {\r\n\r\n\t\t\t\tlineDistanceArray[ d ] = lineDistances[ d ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglLineDistanceBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, lineDistanceArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( customAttributes ) {\r\n\r\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\tif ( customAttribute.needsUpdate &&\r\n\t\t\t\t\t ( customAttribute.boundTo === undefined ||\r\n\t\t\t\t\t\t customAttribute.boundTo === 'vertices' ) ) {\r\n\r\n\t\t\t\t\toffset = 0;\r\n\r\n\t\t\t\t\tcal = customAttribute.value.length;\r\n\r\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\r\n\t\t\t\t\t\t\toffset += 2;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\r\n\r\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]    = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\r\n\r\n\t\t\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\r\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setMeshBuffers( geometryGroup, object, hint, dispose, material ) {\r\n\r\n\t\tif ( ! geometryGroup.__inittedArrays ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar needsSmoothNormals = materialNeedsSmoothNormals( material );\r\n\r\n\t\tvar f, fl, fi, face,\r\n\t\tvertexNormals, faceNormal, normal,\r\n\t\tvertexColors, faceColor,\r\n\t\tvertexTangents,\r\n\t\tuv, uv2, v1, v2, v3, v4, t1, t2, t3, t4, n1, n2, n3, n4,\r\n\t\tc1, c2, c3,\r\n\t\tsw1, sw2, sw3, sw4,\r\n\t\tsi1, si2, si3, si4,\r\n\t\tsa1, sa2, sa3, sa4,\r\n\t\tsb1, sb2, sb3, sb4,\r\n\t\tm, ml, i, il,\r\n\t\tvn, uvi, uv2i,\r\n\t\tvk, vkl, vka,\r\n\t\tnka, chf, faceVertexNormals,\r\n\t\ta,\r\n\r\n\t\tvertexIndex = 0,\r\n\r\n\t\toffset = 0,\r\n\t\toffset_uv = 0,\r\n\t\toffset_uv2 = 0,\r\n\t\toffset_face = 0,\r\n\t\toffset_normal = 0,\r\n\t\toffset_tangent = 0,\r\n\t\toffset_line = 0,\r\n\t\toffset_color = 0,\r\n\t\toffset_skin = 0,\r\n\t\toffset_morphTarget = 0,\r\n\t\toffset_custom = 0,\r\n\t\toffset_customSrc = 0,\r\n\r\n\t\tvalue,\r\n\r\n\t\tvertexArray = geometryGroup.__vertexArray,\r\n\t\tuvArray = geometryGroup.__uvArray,\r\n\t\tuv2Array = geometryGroup.__uv2Array,\r\n\t\tnormalArray = geometryGroup.__normalArray,\r\n\t\ttangentArray = geometryGroup.__tangentArray,\r\n\t\tcolorArray = geometryGroup.__colorArray,\r\n\r\n\t\tskinIndexArray = geometryGroup.__skinIndexArray,\r\n\t\tskinWeightArray = geometryGroup.__skinWeightArray,\r\n\r\n\t\tmorphTargetsArrays = geometryGroup.__morphTargetsArrays,\r\n\t\tmorphNormalsArrays = geometryGroup.__morphNormalsArrays,\r\n\r\n\t\tcustomAttributes = geometryGroup.__webglCustomAttributesList,\r\n\t\tcustomAttribute,\r\n\r\n\t\tfaceArray = geometryGroup.__faceArray,\r\n\t\tlineArray = geometryGroup.__lineArray,\r\n\r\n\t\tgeometry = object.geometry, // this is shared for all chunks\r\n\r\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\r\n\t\tdirtyElements = geometry.elementsNeedUpdate,\r\n\t\tdirtyUvs = geometry.uvsNeedUpdate,\r\n\t\tdirtyNormals = geometry.normalsNeedUpdate,\r\n\t\tdirtyTangents = geometry.tangentsNeedUpdate,\r\n\t\tdirtyColors = geometry.colorsNeedUpdate,\r\n\t\tdirtyMorphTargets = geometry.morphTargetsNeedUpdate,\r\n\r\n\t\tvertices = geometry.vertices,\r\n\t\tchunk_faces3 = geometryGroup.faces3,\r\n\t\tobj_faces = geometry.faces,\r\n\r\n\t\tobj_uvs  = geometry.faceVertexUvs[ 0 ],\r\n\t\tobj_uvs2 = geometry.faceVertexUvs[ 1 ],\r\n\r\n\t\tobj_colors = geometry.colors,\r\n\r\n\t\tobj_skinIndices = geometry.skinIndices,\r\n\t\tobj_skinWeights = geometry.skinWeights,\r\n\r\n\t\tmorphTargets = geometry.morphTargets,\r\n\t\tmorphNormals = geometry.morphNormals;\r\n\r\n\t\tif ( dirtyVertices ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tv1 = vertices[ face.a ];\r\n\t\t\t\tv2 = vertices[ face.b ];\r\n\t\t\t\tv3 = vertices[ face.c ];\r\n\r\n\t\t\t\tvertexArray[ offset ]     = v1.x;\r\n\t\t\t\tvertexArray[ offset + 1 ] = v1.y;\r\n\t\t\t\tvertexArray[ offset + 2 ] = v1.z;\r\n\r\n\t\t\t\tvertexArray[ offset + 3 ] = v2.x;\r\n\t\t\t\tvertexArray[ offset + 4 ] = v2.y;\r\n\t\t\t\tvertexArray[ offset + 5 ] = v2.z;\r\n\r\n\t\t\t\tvertexArray[ offset + 6 ] = v3.x;\r\n\t\t\t\tvertexArray[ offset + 7 ] = v3.y;\r\n\t\t\t\tvertexArray[ offset + 8 ] = v3.z;\r\n\r\n\t\t\t\toffset += 9;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyMorphTargets ) {\r\n\r\n\t\t\tfor ( vk = 0, vkl = morphTargets.length; vk < vkl; vk ++ ) {\r\n\r\n\t\t\t\toffset_morphTarget = 0;\r\n\r\n\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tchf = chunk_faces3[ f ];\r\n\t\t\t\t\tface = obj_faces[ chf ];\r\n\r\n\t\t\t\t\t// morph positions\r\n\r\n\t\t\t\t\tv1 = morphTargets[ vk ].vertices[ face.a ];\r\n\t\t\t\t\tv2 = morphTargets[ vk ].vertices[ face.b ];\r\n\t\t\t\t\tv3 = morphTargets[ vk ].vertices[ face.c ];\r\n\r\n\t\t\t\t\tvka = morphTargetsArrays[ vk ];\r\n\r\n\t\t\t\t\tvka[ offset_morphTarget ]     = v1.x;\r\n\t\t\t\t\tvka[ offset_morphTarget + 1 ] = v1.y;\r\n\t\t\t\t\tvka[ offset_morphTarget + 2 ] = v1.z;\r\n\r\n\t\t\t\t\tvka[ offset_morphTarget + 3 ] = v2.x;\r\n\t\t\t\t\tvka[ offset_morphTarget + 4 ] = v2.y;\r\n\t\t\t\t\tvka[ offset_morphTarget + 5 ] = v2.z;\r\n\r\n\t\t\t\t\tvka[ offset_morphTarget + 6 ] = v3.x;\r\n\t\t\t\t\tvka[ offset_morphTarget + 7 ] = v3.y;\r\n\t\t\t\t\tvka[ offset_morphTarget + 8 ] = v3.z;\r\n\r\n\t\t\t\t\t// morph normals\r\n\r\n\t\t\t\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\t\t\t\tif ( needsSmoothNormals ) {\r\n\r\n\t\t\t\t\t\t\tfaceVertexNormals = morphNormals[ vk ].vertexNormals[ chf ];\r\n\r\n\t\t\t\t\t\t\tn1 = faceVertexNormals.a;\r\n\t\t\t\t\t\t\tn2 = faceVertexNormals.b;\r\n\t\t\t\t\t\t\tn3 = faceVertexNormals.c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tn1 = morphNormals[ vk ].faceNormals[ chf ];\r\n\t\t\t\t\t\t\tn2 = n1;\r\n\t\t\t\t\t\t\tn3 = n1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnka = morphNormalsArrays[ vk ];\r\n\r\n\t\t\t\t\t\tnka[ offset_morphTarget ]     = n1.x;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 1 ] = n1.y;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 2 ] = n1.z;\r\n\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 3 ] = n2.x;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 4 ] = n2.y;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 5 ] = n2.z;\r\n\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 6 ] = n3.x;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 7 ] = n3.y;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 8 ] = n3.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//\r\n\r\n\t\t\t\t\toffset_morphTarget += 9;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ vk ] );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphTargetsArrays[ vk ], hint );\r\n\r\n\t\t\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ vk ] );\r\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphNormalsArrays[ vk ], hint );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( obj_skinWeights.length ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t// weights\r\n\r\n\t\t\t\tsw1 = obj_skinWeights[ face.a ];\r\n\t\t\t\tsw2 = obj_skinWeights[ face.b ];\r\n\t\t\t\tsw3 = obj_skinWeights[ face.c ];\r\n\r\n\t\t\t\tskinWeightArray[ offset_skin ]     = sw1.x;\r\n\t\t\t\tskinWeightArray[ offset_skin + 1 ] = sw1.y;\r\n\t\t\t\tskinWeightArray[ offset_skin + 2 ] = sw1.z;\r\n\t\t\t\tskinWeightArray[ offset_skin + 3 ] = sw1.w;\r\n\r\n\t\t\t\tskinWeightArray[ offset_skin + 4 ] = sw2.x;\r\n\t\t\t\tskinWeightArray[ offset_skin + 5 ] = sw2.y;\r\n\t\t\t\tskinWeightArray[ offset_skin + 6 ] = sw2.z;\r\n\t\t\t\tskinWeightArray[ offset_skin + 7 ] = sw2.w;\r\n\r\n\t\t\t\tskinWeightArray[ offset_skin + 8 ]  = sw3.x;\r\n\t\t\t\tskinWeightArray[ offset_skin + 9 ]  = sw3.y;\r\n\t\t\t\tskinWeightArray[ offset_skin + 10 ] = sw3.z;\r\n\t\t\t\tskinWeightArray[ offset_skin + 11 ] = sw3.w;\r\n\r\n\t\t\t\t// indices\r\n\r\n\t\t\t\tsi1 = obj_skinIndices[ face.a ];\r\n\t\t\t\tsi2 = obj_skinIndices[ face.b ];\r\n\t\t\t\tsi3 = obj_skinIndices[ face.c ];\r\n\r\n\t\t\t\tskinIndexArray[ offset_skin ]     = si1.x;\r\n\t\t\t\tskinIndexArray[ offset_skin + 1 ] = si1.y;\r\n\t\t\t\tskinIndexArray[ offset_skin + 2 ] = si1.z;\r\n\t\t\t\tskinIndexArray[ offset_skin + 3 ] = si1.w;\r\n\r\n\t\t\t\tskinIndexArray[ offset_skin + 4 ] = si2.x;\r\n\t\t\t\tskinIndexArray[ offset_skin + 5 ] = si2.y;\r\n\t\t\t\tskinIndexArray[ offset_skin + 6 ] = si2.z;\r\n\t\t\t\tskinIndexArray[ offset_skin + 7 ] = si2.w;\r\n\r\n\t\t\t\tskinIndexArray[ offset_skin + 8 ]  = si3.x;\r\n\t\t\t\tskinIndexArray[ offset_skin + 9 ]  = si3.y;\r\n\t\t\t\tskinIndexArray[ offset_skin + 10 ] = si3.z;\r\n\t\t\t\tskinIndexArray[ offset_skin + 11 ] = si3.w;\r\n\r\n\t\t\t\toffset_skin += 12;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_skin > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinIndexArray, hint );\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinWeightArray, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyColors ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tvertexColors = face.vertexColors;\r\n\t\t\t\tfaceColor = face.color;\r\n\r\n\t\t\t\tif ( vertexColors.length === 3 && material.vertexColors === THREE.VertexColors ) {\r\n\r\n\t\t\t\t\tc1 = vertexColors[ 0 ];\r\n\t\t\t\t\tc2 = vertexColors[ 1 ];\r\n\t\t\t\t\tc3 = vertexColors[ 2 ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tc1 = faceColor;\r\n\t\t\t\t\tc2 = faceColor;\r\n\t\t\t\t\tc3 = faceColor;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolorArray[ offset_color ]     = c1.r;\r\n\t\t\t\tcolorArray[ offset_color + 1 ] = c1.g;\r\n\t\t\t\tcolorArray[ offset_color + 2 ] = c1.b;\r\n\r\n\t\t\t\tcolorArray[ offset_color + 3 ] = c2.r;\r\n\t\t\t\tcolorArray[ offset_color + 4 ] = c2.g;\r\n\t\t\t\tcolorArray[ offset_color + 5 ] = c2.b;\r\n\r\n\t\t\t\tcolorArray[ offset_color + 6 ] = c3.r;\r\n\t\t\t\tcolorArray[ offset_color + 7 ] = c3.g;\r\n\t\t\t\tcolorArray[ offset_color + 8 ] = c3.b;\r\n\r\n\t\t\t\toffset_color += 9;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_color > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyTangents && geometry.hasTangents ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tvertexTangents = face.vertexTangents;\r\n\r\n\t\t\t\tt1 = vertexTangents[ 0 ];\r\n\t\t\t\tt2 = vertexTangents[ 1 ];\r\n\t\t\t\tt3 = vertexTangents[ 2 ];\r\n\r\n\t\t\t\ttangentArray[ offset_tangent ]     = t1.x;\r\n\t\t\t\ttangentArray[ offset_tangent + 1 ] = t1.y;\r\n\t\t\t\ttangentArray[ offset_tangent + 2 ] = t1.z;\r\n\t\t\t\ttangentArray[ offset_tangent + 3 ] = t1.w;\r\n\r\n\t\t\t\ttangentArray[ offset_tangent + 4 ] = t2.x;\r\n\t\t\t\ttangentArray[ offset_tangent + 5 ] = t2.y;\r\n\t\t\t\ttangentArray[ offset_tangent + 6 ] = t2.z;\r\n\t\t\t\ttangentArray[ offset_tangent + 7 ] = t2.w;\r\n\r\n\t\t\t\ttangentArray[ offset_tangent + 8 ]  = t3.x;\r\n\t\t\t\ttangentArray[ offset_tangent + 9 ]  = t3.y;\r\n\t\t\t\ttangentArray[ offset_tangent + 10 ] = t3.z;\r\n\t\t\t\ttangentArray[ offset_tangent + 11 ] = t3.w;\r\n\r\n\t\t\t\toffset_tangent += 12;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, tangentArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyNormals ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tvertexNormals = face.vertexNormals;\r\n\t\t\t\tfaceNormal = face.normal;\r\n\r\n\t\t\t\tif ( vertexNormals.length === 3 && needsSmoothNormals ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tvn = vertexNormals[ i ];\r\n\r\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = vn.x;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = vn.y;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = vn.z;\r\n\r\n\t\t\t\t\t\toffset_normal += 3;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = faceNormal.x;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = faceNormal.y;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = faceNormal.z;\r\n\r\n\t\t\t\t\t\toffset_normal += 3;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, normalArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyUvs && obj_uvs ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tfi = chunk_faces3[ f ];\r\n\r\n\t\t\t\tuv = obj_uvs[ fi ];\r\n\r\n\t\t\t\tif ( uv === undefined ) continue;\r\n\r\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\tuvi = uv[ i ];\r\n\r\n\t\t\t\t\tuvArray[ offset_uv ]     = uvi.x;\r\n\t\t\t\t\tuvArray[ offset_uv + 1 ] = uvi.y;\r\n\r\n\t\t\t\t\toffset_uv += 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_uv > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uvArray, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyUvs && obj_uvs2 ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tfi = chunk_faces3[ f ];\r\n\r\n\t\t\t\tuv2 = obj_uvs2[ fi ];\r\n\r\n\t\t\t\tif ( uv2 === undefined ) continue;\r\n\r\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\tuv2i = uv2[ i ];\r\n\r\n\t\t\t\t\tuv2Array[ offset_uv2 ]     = uv2i.x;\r\n\t\t\t\t\tuv2Array[ offset_uv2 + 1 ] = uv2i.y;\r\n\r\n\t\t\t\t\toffset_uv2 += 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_uv2 > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uv2Array, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyElements ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tfaceArray[ offset_face ]   = vertexIndex;\r\n\t\t\t\tfaceArray[ offset_face + 1 ] = vertexIndex + 1;\r\n\t\t\t\tfaceArray[ offset_face + 2 ] = vertexIndex + 2;\r\n\r\n\t\t\t\toffset_face += 3;\r\n\r\n\t\t\t\tlineArray[ offset_line ]     = vertexIndex;\r\n\t\t\t\tlineArray[ offset_line + 1 ] = vertexIndex + 1;\r\n\r\n\t\t\t\tlineArray[ offset_line + 2 ] = vertexIndex;\r\n\t\t\t\tlineArray[ offset_line + 3 ] = vertexIndex + 2;\r\n\r\n\t\t\t\tlineArray[ offset_line + 4 ] = vertexIndex + 1;\r\n\t\t\t\tlineArray[ offset_line + 5 ] = vertexIndex + 2;\r\n\r\n\t\t\t\toffset_line += 6;\r\n\r\n\t\t\t\tvertexIndex += 3;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\r\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, faceArray, hint );\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\r\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, lineArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( customAttributes ) {\r\n\r\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\tif ( ! customAttribute.__original.needsUpdate ) continue;\r\n\r\n\t\t\t\toffset_custom = 0;\r\n\t\t\t\toffset_customSrc = 0;\r\n\r\n\t\t\t\tif ( customAttribute.size === 1 ) {\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 3;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = value;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = value;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = value;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 3;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( customAttribute.size === 2 ) {\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 6;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value;\r\n\t\t\t\t\t\t\tv2 = value;\r\n\t\t\t\t\t\t\tv3 = value;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 6;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( customAttribute.size === 3 ) {\r\n\r\n\t\t\t\t\tvar pp;\r\n\r\n\t\t\t\t\tif ( customAttribute.type === 'c' ) {\r\n\r\n\t\t\t\t\t\tpp = [ 'r', 'g', 'b' ];\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tpp = [ 'x', 'y', 'z' ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 9;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value;\r\n\t\t\t\t\t\t\tv2 = value;\r\n\t\t\t\t\t\t\tv3 = value;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 9;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value[ 0 ];\r\n\t\t\t\t\t\t\tv2 = value[ 1 ];\r\n\t\t\t\t\t\t\tv3 = value[ 2 ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 9;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( customAttribute.size === 4 ) {\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 12;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value;\r\n\t\t\t\t\t\t\tv2 = value;\r\n\t\t\t\t\t\t\tv3 = value;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 12;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value[ 0 ];\r\n\t\t\t\t\t\t\tv2 = value[ 1 ];\r\n\t\t\t\t\t\t\tv3 = value[ 2 ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 12;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dispose ) {\r\n\r\n\t\t\tdelete geometryGroup.__inittedArrays;\r\n\t\t\tdelete geometryGroup.__colorArray;\r\n\t\t\tdelete geometryGroup.__normalArray;\r\n\t\t\tdelete geometryGroup.__tangentArray;\r\n\t\t\tdelete geometryGroup.__uvArray;\r\n\t\t\tdelete geometryGroup.__uv2Array;\r\n\t\t\tdelete geometryGroup.__faceArray;\r\n\t\t\tdelete geometryGroup.__vertexArray;\r\n\t\t\tdelete geometryGroup.__lineArray;\r\n\t\t\tdelete geometryGroup.__skinIndexArray;\r\n\t\t\tdelete geometryGroup.__skinWeightArray;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setDirectBuffers( geometry ) {\r\n\r\n\t\tvar attributes = geometry.attributes;\r\n\t\tvar attributesKeys = geometry.attributesKeys;\r\n\r\n\t\tfor ( var i = 0, l = attributesKeys.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar key = attributesKeys[ i ];\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tif ( attribute.buffer === undefined ) {\r\n\r\n\t\t\t\tattribute.buffer = _gl.createBuffer();\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( attribute.needsUpdate === true ) {\r\n\r\n\t\t\t\tvar bufferType = ( key === 'index' ) ? _gl.ELEMENT_ARRAY_BUFFER : _gl.ARRAY_BUFFER;\r\n\r\n\t\t\t\t_gl.bindBuffer( bufferType, attribute.buffer );\r\n\t\t\t\t_gl.bufferData( bufferType, attribute.array, _gl.STATIC_DRAW );\r\n\r\n\t\t\t\tattribute.needsUpdate = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tinitAttributes();\r\n\r\n\t\tif ( object.hasPositions && ! object.__webglVertexBuffer ) object.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! object.__webglNormalBuffer ) object.__webglNormalBuffer = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! object.__webglUvBuffer ) object.__webglUvBuffer = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! object.__webglColorBuffer ) object.__webglColorBuffer = _gl.createBuffer();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglNormalBuffer );\r\n\r\n\t\t\tif ( material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tvar nx, ny, nz,\r\n\t\t\t\t\tnax, nbx, ncx, nay, nby, ncy, naz, nbz, ncz,\r\n\t\t\t\t\tnormalArray,\r\n\t\t\t\t\ti, il = object.count * 3;\r\n\r\n\t\t\t\tfor ( i = 0; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tnormalArray = object.normalArray;\r\n\r\n\t\t\t\t\tnax  = normalArray[ i ];\r\n\t\t\t\t\tnay  = normalArray[ i + 1 ];\r\n\t\t\t\t\tnaz  = normalArray[ i + 2 ];\r\n\r\n\t\t\t\t\tnbx  = normalArray[ i + 3 ];\r\n\t\t\t\t\tnby  = normalArray[ i + 4 ];\r\n\t\t\t\t\tnbz  = normalArray[ i + 5 ];\r\n\r\n\t\t\t\t\tncx  = normalArray[ i + 6 ];\r\n\t\t\t\t\tncy  = normalArray[ i + 7 ];\r\n\t\t\t\t\tncz  = normalArray[ i + 8 ];\r\n\r\n\t\t\t\t\tnx = ( nax + nbx + ncx ) / 3;\r\n\t\t\t\t\tny = ( nay + nby + ncy ) / 3;\r\n\t\t\t\t\tnz = ( naz + nbz + ncz ) / 3;\r\n\r\n\t\t\t\t\tnormalArray[ i ]   = nx;\r\n\t\t\t\t\tnormalArray[ i + 1 ] = ny;\r\n\t\t\t\t\tnormalArray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tnormalArray[ i + 3 ] = nx;\r\n\t\t\t\t\tnormalArray[ i + 4 ] = ny;\r\n\t\t\t\t\tnormalArray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tnormalArray[ i + 6 ] = nx;\r\n\t\t\t\t\tnormalArray[ i + 7 ] = ny;\r\n\t\t\t\t\tnormalArray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.normal );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglUvBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.uv );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglColorBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.color );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.attributes;\r\n\t\tvar programAttributesKeys = program.attributesKeys;\r\n\r\n\t\tfor ( var i = 0, l = programAttributesKeys.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar key = programAttributesKeys[ i ];\r\n\t\t\tvar programAttribute = programAttributes[ key ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ key ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryAttribute.buffer );\r\n\r\n\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tif ( material.defaultAttributeValues[ key ].length === 2 ) {\r\n\r\n\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, material.defaultAttributeValues[ key ] );\r\n\r\n\t\t\t\t\t} else if ( material.defaultAttributeValues[ key ].length === 3 ) {\r\n\r\n\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, material.defaultAttributeValues[ key ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\tthis.renderBufferDirect = function ( camera, lights, fog, material, geometry, object ) {\r\n\r\n\t\tif ( material.visible === false ) return;\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false,\r\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\r\n\t\t\tgeometryHash = ( geometry.id * 0xffffff ) + ( program.id * 2 ) + wireframeBit;\r\n\r\n\t\tif ( geometryHash !== _currentGeometryGroupHash ) {\r\n\r\n\t\t\t_currentGeometryGroupHash = geometryHash;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tinitAttributes();\r\n\r\n\t\t}\r\n\r\n\t\t// render mesh\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar mode = material.wireframe === true ? _gl.LINES : _gl.TRIANGLES;\r\n\r\n\t\t\tvar index = geometry.attributes.index;\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\t// indexed triangles\r\n\r\n\t\t\t\tvar type, size;\r\n\r\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\t\t\tsize = 4;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\t\t\tsize = 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 );\r\n\r\n\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\r\n\t\t\t\t\t_this.info.render.faces += index.array.length / 3;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// if there is more than 1 chunk\r\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\r\n\t\t\t\t\t// even if geometry and materials didn't change\r\n\r\n\t\t\t\t\tupdateBuffers = true;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\r\n\r\n\t\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// render indexed triangles\r\n\r\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\r\n\r\n\t\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\r\n\t\t\t\t\t\t_this.info.render.faces += offsets[ i ].count / 3;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed triangles\r\n\r\n\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar position = geometry.attributes[ 'position' ];\r\n\r\n\t\t\t\t// render non-indexed triangles\r\n\r\n\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\r\n\r\n\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t_this.info.render.vertices += position.array.length / 3;\r\n\t\t\t\t_this.info.render.faces += position.array.length / 9;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t// render particles\r\n\r\n\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar position = geometry.attributes.position;\r\n\r\n\t\t\t// render particles\r\n\r\n\t\t\t_gl.drawArrays( _gl.POINTS, 0, position.array.length / 3 );\r\n\r\n\t\t\t_this.info.render.calls ++;\r\n\t\t\t_this.info.render.points += position.array.length / 3;\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\r\n\r\n\t\t\tsetLineWidth( material.linewidth );\r\n\r\n\t\t\tvar index = geometry.attributes.index;\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\t// indexed lines\r\n\r\n\t\t\t\tvar type, size;\r\n\r\n\t\t\t\tif ( index.array instanceof Uint32Array ) {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\t\t\tsize = 4;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\t\t\tsize = 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 ); // 2 bytes per Uint16Array\r\n\r\n\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// if there is more than 1 chunk\r\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\r\n\t\t\t\t\t// even if geometry and materials didn't change\r\n\r\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\r\n\r\n\t\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// render indexed lines\r\n\r\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size ); // 2 bytes per Uint16Array\r\n\r\n\t\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed lines\r\n\r\n\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar position = geometry.attributes.position;\r\n\r\n\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\r\n\r\n\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t_this.info.render.points += position.array.length / 3;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.renderBuffer = function ( camera, lights, fog, material, geometryGroup, object ) {\r\n\r\n\t\tif ( material.visible === false ) return;\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\tvar attributes = program.attributes;\r\n\r\n\t\tvar updateBuffers = false,\r\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\r\n\t\t\tgeometryGroupHash = ( geometryGroup.id * 0xffffff ) + ( program.id * 2 ) + wireframeBit;\r\n\r\n\t\tif ( geometryGroupHash !== _currentGeometryGroupHash ) {\r\n\r\n\t\t\t_currentGeometryGroupHash = geometryGroupHash;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tinitAttributes();\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tif ( ! material.morphTargets && attributes.position >= 0 ) {\r\n\r\n\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\r\n\t\t\t\tenableAttribute( attributes.position );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( object.morphTargetBase ) {\r\n\r\n\t\t\t\tsetupMorphTargets( material, geometryGroup, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t// custom attributes\r\n\r\n\t\t\t// Use the per-geometryGroup custom attribute arrays which are setup in initMeshBuffers\r\n\r\n\t\t\tif ( geometryGroup.__webglCustomAttributesList ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = geometryGroup.__webglCustomAttributesList.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar attribute = geometryGroup.__webglCustomAttributesList[ i ];\r\n\r\n\t\t\t\t\tif ( attributes[ attribute.buffer.belongsToAttribute ] >= 0 ) {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, attribute.buffer );\r\n\t\t\t\t\t\tenableAttribute( attributes[ attribute.buffer.belongsToAttribute ] );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ attribute.buffer.belongsToAttribute ], attribute.size, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// colors\r\n\r\n\t\t\tif ( attributes.color >= 0 ) {\r\n\r\n\t\t\t\tif ( object.geometry.colors.length > 0 || object.geometry.faces.length > 0 ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\r\n\t\t\t\t\tenableAttribute( attributes.color );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\r\n\t\t\t\t\t_gl.vertexAttrib3fv( attributes.color, material.defaultAttributeValues.color );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// normals\r\n\r\n\t\t\tif ( attributes.normal >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\r\n\t\t\t\tenableAttribute( attributes.normal );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// tangents\r\n\r\n\t\t\tif ( attributes.tangent >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\r\n\t\t\t\tenableAttribute( attributes.tangent );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.tangent, 4, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// uvs\r\n\r\n\t\t\tif ( attributes.uv >= 0 ) {\r\n\r\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 0 ] ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\r\n\t\t\t\t\tenableAttribute( attributes.uv );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\r\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv, material.defaultAttributeValues.uv );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( attributes.uv2 >= 0 ) {\r\n\r\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 1 ] ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\r\n\t\t\t\t\tenableAttribute( attributes.uv2 );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv2, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\r\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv2, material.defaultAttributeValues.uv2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.skinning &&\r\n\t\t\t\t attributes.skinIndex >= 0 && attributes.skinWeight >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\r\n\t\t\t\tenableAttribute( attributes.skinIndex );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinIndex, 4, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\r\n\t\t\t\tenableAttribute( attributes.skinWeight );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinWeight, 4, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// line distances\r\n\r\n\t\t\tif ( attributes.lineDistance >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglLineDistanceBuffer );\r\n\t\t\t\tenableAttribute( attributes.lineDistance );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.lineDistance, 1, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t\t// render mesh\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar type = geometryGroup.__typeArray === Uint32Array ? _gl.UNSIGNED_INT : _gl.UNSIGNED_SHORT;\r\n\r\n\t\t\t// wireframe\r\n\r\n\t\t\tif ( material.wireframe ) {\r\n\r\n\t\t\t\tsetLineWidth( material.wireframeLinewidth );\r\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\r\n\t\t\t\t_gl.drawElements( _gl.LINES, geometryGroup.__webglLineCount, type, 0 );\r\n\r\n\t\t\t// triangles\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\r\n\t\t\t\t_gl.drawElements( _gl.TRIANGLES, geometryGroup.__webglFaceCount, type, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.info.render.calls ++;\r\n\t\t\t_this.info.render.vertices += geometryGroup.__webglFaceCount;\r\n\t\t\t_this.info.render.faces += geometryGroup.__webglFaceCount / 3;\r\n\r\n\t\t// render lines\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\r\n\r\n\t\t\tsetLineWidth( material.linewidth );\r\n\r\n\t\t\t_gl.drawArrays( mode, 0, geometryGroup.__webglLineCount );\r\n\r\n\t\t\t_this.info.render.calls ++;\r\n\r\n\t\t// render particles\r\n\r\n\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t_gl.drawArrays( _gl.POINTS, 0, geometryGroup.__webglParticleCount );\r\n\r\n\t\t\t_this.info.render.calls ++;\r\n\t\t\t_this.info.render.points += geometryGroup.__webglParticleCount;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction initAttributes() {\r\n\r\n\t\tfor ( var i = 0, l = _newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\t_newAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction enableAttribute( attribute ) {\r\n\r\n\t\t_newAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( _enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\t_gl.enableVertexAttribArray( attribute );\r\n\t\t\t_enabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disableUnusedAttributes() {\r\n\r\n\t\tfor ( var i = 0, l = _enabledAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( _enabledAttributes[ i ] !== _newAttributes[ i ] ) {\r\n\r\n\t\t\t\t_gl.disableVertexAttribArray( i );\r\n\t\t\t\t_enabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupMorphTargets ( material, geometryGroup, object ) {\r\n\r\n\t\t// set base\r\n\r\n\t\tvar attributes = material.program.attributes;\r\n\r\n\t\tif ( object.morphTargetBase !== - 1 && attributes.position >= 0 ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ object.morphTargetBase ] );\r\n\t\t\tenableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t} else if ( attributes.position >= 0 ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\r\n\t\t\tenableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.morphTargetForcedOrder.length ) {\r\n\r\n\t\t\t// set forced order\r\n\r\n\t\t\tvar m = 0;\r\n\t\t\tvar order = object.morphTargetForcedOrder;\r\n\t\t\tvar influences = object.morphTargetInfluences;\r\n\r\n\t\t\twhile ( m < material.numSupportedMorphTargets && m < order.length ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphTarget' + m ] >= 0 ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ order[ m ] ] );\r\n\t\t\t\t\tenableAttribute( attributes[ 'morphTarget' + m ] );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphTarget' + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( attributes[ 'morphNormal' + m ] >= 0 && material.morphNormals ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ order[ m ] ] );\r\n\t\t\t\t\tenableAttribute( attributes[ 'morphNormal' + m ] );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphNormal' + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ order[ m ] ];\r\n\r\n\t\t\t\tm ++;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// find the most influencing\r\n\r\n\t\t\tvar influence, activeInfluenceIndices = [];\r\n\t\t\tvar influences = object.morphTargetInfluences;\r\n\t\t\tvar i, il = influences.length;\r\n\r\n\t\t\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\t\t\tinfluence = influences[ i ];\r\n\r\n\t\t\t\tif ( influence > 0 ) {\r\n\r\n\t\t\t\t\tactiveInfluenceIndices.push( [ influence, i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( activeInfluenceIndices.length > material.numSupportedMorphTargets ) {\r\n\r\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\r\n\t\t\t\tactiveInfluenceIndices.length = material.numSupportedMorphTargets;\r\n\r\n\t\t\t} else if ( activeInfluenceIndices.length > material.numSupportedMorphNormals ) {\r\n\r\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\r\n\r\n\t\t\t} else if ( activeInfluenceIndices.length === 0 ) {\r\n\r\n\t\t\t\tactiveInfluenceIndices.push( [ 0, 0 ] );\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar influenceIndex, m = 0;\r\n\r\n\t\t\twhile ( m < material.numSupportedMorphTargets ) {\r\n\r\n\t\t\t\tif ( activeInfluenceIndices[ m ] ) {\r\n\r\n\t\t\t\t\tinfluenceIndex = activeInfluenceIndices[ m ][ 1 ];\r\n\r\n\t\t\t\t\tif ( attributes[ 'morphTarget' + m ] >= 0 ) {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ influenceIndex ] );\r\n\t\t\t\t\t\tenableAttribute( attributes[ 'morphTarget' + m ] );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphTarget' + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( attributes[ 'morphNormal' + m ] >= 0 && material.morphNormals ) {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ influenceIndex ] );\r\n\t\t\t\t\t\tenableAttribute( attributes[ 'morphNormal' + m ] );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphNormal' + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ influenceIndex ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphTarget\" + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphNormal\" + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\r\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// load updated influences uniform\r\n\r\n\t\tif ( material.program.uniforms.morphTargetInfluences !== null ) {\r\n\r\n\t\t\t_gl.uniform1fv( material.program.uniforms.morphTargetInfluences, object.__webglMorphTargetInfluences );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn b.material.id - a.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction numericalSort ( a, b ) {\r\n\r\n\t\treturn b[ 0 ] - a[ 0 ];\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryGroupHash = - 1;\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === undefined ) camera.updateMatrixWorld();\r\n\r\n\t\t// update Skeleton objects\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\t\topaqueObjects.length = 0;\r\n\t\ttransparentObjects.length = 0;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\tprojectObject( scene, scene );\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (pre pass)\r\n\r\n\t\tshadowMapPlugin.render( scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\t_this.info.render.calls = 0;\r\n\t\t_this.info.render.vertices = 0;\r\n\t\t_this.info.render.faces = 0;\r\n\t\t_this.info.render.points = 0;\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t// set matrices for immediate objects\r\n\r\n\t\tfor ( var i = 0, il = _webglObjectsImmediate.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar webglObject = _webglObjectsImmediate[ i ];\r\n\t\t\tvar object = webglObject.object;\r\n\r\n\t\t\tif ( object.visible ) {\r\n\r\n\t\t\t\tsetupMatrices( object, camera );\r\n\r\n\t\t\t\tunrollImmediateBufferMaterial( webglObject );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar material = scene.overrideMaterial;\r\n\r\n\t\t\tthis.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tthis.setDepthTest( material.depthTest );\r\n\t\t\tthis.setDepthWrite( material.depthWrite );\r\n\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, true, material );\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\r\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, '', camera, lights, fog, false, material );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar material = null;\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tthis.setBlending( THREE.NoBlending );\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, false, material );\r\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'opaque', camera, lights, fog, false, material );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\r\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'transparent', camera, lights, fog, true, material );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tthis.setDepthTest( true );\r\n\t\tthis.setDepthWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction projectObject( scene, object ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object instanceof THREE.Scene || object instanceof THREE.Group ) {\r\n\r\n\t\t\t// skip\r\n\r\n\t\t} else {\r\n\r\n\t\t\tinitObject( object, scene );\r\n\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\t\tlights.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tsprites.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\t\tlensFlares.push( object );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar webglObjects = _webglObjects[ object.id ];\r\n\r\n\t\t\t\tif ( webglObjects && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\t\tupdateObject( object, scene );\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar webglObject = webglObjects[i];\r\n\r\n\t\t\t\t\t\tunrollBufferMaterial( webglObject );\r\n\r\n\t\t\t\t\t\twebglObject.render = true;\r\n\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t\tif ( object.renderDepth !== null ) {\r\n\r\n\t\t\t\t\t\t\t\twebglObject.z = object.renderDepth;\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t\t\t\twebglObject.z = _vector3.z;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( scene, object.children[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, lights, fog, useBlending, overrideMaterial ) {\r\n\r\n\t\tvar material;\r\n\r\n\t\tfor ( var i = renderList.length - 1; i !== - 1; i -- ) {\r\n\r\n\t\t\tvar webglObject = renderList[ i ];\r\n\r\n\t\t\tvar object = webglObject.object;\r\n\t\t\tvar buffer = webglObject.buffer;\r\n\r\n\t\t\tsetupMatrices( object, camera );\r\n\r\n\t\t\tif ( overrideMaterial ) {\r\n\r\n\t\t\t\tmaterial = overrideMaterial;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial = webglObject.material;\r\n\r\n\t\t\t\tif ( ! material ) continue;\r\n\r\n\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\r\n\t\t\t\t_this.setDepthTest( material.depthTest );\r\n\t\t\t\t_this.setDepthWrite( material.depthWrite );\r\n\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.setMaterialFaces( material );\r\n\r\n\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t_this.renderBufferDirect( camera, lights, fog, material, buffer, object );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.renderBuffer( camera, lights, fog, material, buffer, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjectsImmediate ( renderList, materialType, camera, lights, fog, useBlending, overrideMaterial ) {\r\n\r\n\t\tvar material;\r\n\r\n\t\tfor ( var i = 0, il = renderList.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar webglObject = renderList[ i ];\r\n\t\t\tvar object = webglObject.object;\r\n\r\n\t\t\tif ( object.visible ) {\r\n\r\n\t\t\t\tif ( overrideMaterial ) {\r\n\r\n\t\t\t\t\tmaterial = overrideMaterial;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmaterial = webglObject[ materialType ];\r\n\r\n\t\t\t\t\tif ( ! material ) continue;\r\n\r\n\t\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\r\n\t\t\t\t\t_this.setDepthTest( material.depthTest );\r\n\t\t\t\t\t_this.setDepthWrite( material.depthWrite );\r\n\t\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_this.renderImmediateObject( camera, lights, fog, material, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.renderImmediateObject = function ( camera, lights, fog, material, object ) {\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\t_currentGeometryGroupHash = - 1;\r\n\r\n\t\t_this.setMaterialFaces( material );\r\n\r\n\t\tif ( object.immediateRenderCallback ) {\r\n\r\n\t\t\tobject.immediateRenderCallback( program, _gl, _frustum );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tobject.render( function ( object ) { _this.renderBufferImmediate( object, program, material ); } );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction unrollImmediateBufferMaterial ( globject ) {\r\n\r\n\t\tvar object = globject.object,\r\n\t\t\tmaterial = object.material;\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tglobject.transparent = material;\r\n\t\t\tglobject.opaque = null;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tglobject.opaque = material;\r\n\t\t\tglobject.transparent = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction unrollBufferMaterial ( globject ) {\r\n\r\n\t\tvar object = globject.object;\r\n\t\tvar buffer = globject.buffer;\r\n\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar material = object.material;\r\n\r\n\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\r\n\t\t\tvar materialIndex = geometry instanceof THREE.BufferGeometry ? 0 : buffer.materialIndex;\r\n\r\n\t\t\tmaterial = material.materials[ materialIndex ];\r\n\r\n\t\t\tglobject.material = material;\r\n\r\n\t\t\tif ( material.transparent ) {\r\n\r\n\t\t\t\ttransparentObjects.push( globject );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\topaqueObjects.push( globject );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material ) {\r\n\r\n\t\t\tglobject.material = material;\r\n\r\n\t\t\tif ( material.transparent ) {\r\n\r\n\t\t\t\ttransparentObjects.push( globject );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\topaqueObjects.push( globject );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initObject( object, scene ) {\r\n\r\n\t\tif ( object.__webglInit === undefined ) {\r\n\r\n\t\t\tobject.__webglInit = true;\r\n\t\t\tobject._modelViewMatrix = new THREE.Matrix4();\r\n\t\t\tobject._normalMatrix = new THREE.Matrix3();\r\n\r\n\t\t\tobject.addEventListener( 'removed', onObjectRemoved );\r\n\r\n\t\t}\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometry === undefined ) {\r\n\r\n\t\t\t// ImmediateRenderObject\r\n\r\n\t\t} else if ( geometry.__webglInit === undefined ) {\r\n\r\n\t\t\tgeometry.__webglInit = true;\r\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t\tinitGeometryGroups( scene, object, geometry );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\r\n\r\n\t\t\t\t\tcreateLineBuffers( geometry );\r\n\t\t\t\t\tinitLineBuffers( geometry, object );\r\n\r\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\r\n\t\t\t\t\tgeometry.lineDistancesNeedUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\r\n\r\n\t\t\t\t\tcreateParticleBuffers( geometry );\r\n\t\t\t\t\tinitParticleBuffers( geometry, object );\r\n\r\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.__webglActive === undefined) {\r\n\r\n\t\t\tobject.__webglActive = true;\r\n\r\n\t\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t\taddBuffer( _webglObjects, geometry, object );\r\n\r\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t\t\t\tfor ( var i = 0,l = geometryGroupsList.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\taddBuffer( _webglObjects, geometryGroupsList[ i ], object );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.Line || object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t\taddBuffer( _webglObjects, geometry, object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\r\n\r\n\t\t\t\taddBufferImmediate( _webglObjectsImmediate, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Geometry splitting\r\n\r\n\tvar geometryGroups = {};\r\n\tvar geometryGroupCounter = 0;\r\n\r\n\tfunction makeGroups( geometry, usesFaceMaterial ) {\r\n\r\n\t\tvar maxVerticesInGroup = extensions.get( 'OES_element_index_uint' ) ? 4294967296 : 65535;\r\n\r\n\t\tvar groupHash, hash_map = {};\r\n\r\n\t\tvar numMorphTargets = geometry.morphTargets.length;\r\n\t\tvar numMorphNormals = geometry.morphNormals.length;\r\n\r\n\t\tvar group;\r\n\t\tvar groups = {};\r\n\t\tvar groupsList = [];\r\n\r\n\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = geometry.faces[ f ];\r\n\t\t\tvar materialIndex = usesFaceMaterial ? face.materialIndex : 0;\r\n\r\n\t\t\tif ( ! ( materialIndex in hash_map ) ) {\r\n\r\n\t\t\t\thash_map[ materialIndex ] = { hash: materialIndex, counter: 0 };\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\r\n\r\n\t\t\tif ( ! ( groupHash in groups ) ) {\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tid: geometryGroupCounter ++,\r\n\t\t\t\t\tfaces3: [],\r\n\t\t\t\t\tmaterialIndex: materialIndex,\r\n\t\t\t\t\tvertices: 0,\r\n\t\t\t\t\tnumMorphTargets: numMorphTargets,\r\n\t\t\t\t\tnumMorphNormals: numMorphNormals\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tgroups[ groupHash ] = group;\r\n\t\t\t\tgroupsList.push( group );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( groups[ groupHash ].vertices + 3 > maxVerticesInGroup ) {\r\n\r\n\t\t\t\thash_map[ materialIndex ].counter += 1;\r\n\t\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\r\n\r\n\t\t\t\tif ( ! ( groupHash in groups ) ) {\r\n\r\n\t\t\t\t\tgroup = {\r\n\t\t\t\t\t\tid: geometryGroupCounter ++,\r\n\t\t\t\t\t\tfaces3: [],\r\n\t\t\t\t\t\tmaterialIndex: materialIndex,\r\n\t\t\t\t\t\tvertices: 0,\r\n\t\t\t\t\t\tnumMorphTargets: numMorphTargets,\r\n\t\t\t\t\t\tnumMorphNormals: numMorphNormals\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tgroups[ groupHash ] = group;\r\n\t\t\t\t\tgroupsList.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgroups[ groupHash ].faces3.push( f );\r\n\t\t\tgroups[ groupHash ].vertices += 3;\r\n\r\n\t\t}\r\n\r\n\t\treturn groupsList;\r\n\r\n\t}\r\n\r\n\tfunction initGeometryGroups( scene, object, geometry ) {\r\n\r\n\t\tvar material = object.material, addBuffers = false;\r\n\r\n\t\tif ( geometryGroups[ geometry.id ] === undefined || geometry.groupsNeedUpdate === true ) {\r\n\r\n\t\t\tdelete _webglObjects[ object.id ];\r\n\r\n\t\t\tgeometryGroups[ geometry.id ] = makeGroups( geometry, material instanceof THREE.MeshFaceMaterial );\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t// create separate VBOs per geometry chunk\r\n\r\n\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar geometryGroup = geometryGroupsList[ i ];\r\n\r\n\t\t\t// initialise VBO on the first access\r\n\r\n\t\t\tif ( geometryGroup.__webglVertexBuffer === undefined ) {\r\n\r\n\t\t\t\tcreateMeshBuffers( geometryGroup );\r\n\t\t\t\tinitMeshBuffers( geometryGroup, object );\r\n\r\n\t\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\t\t\tgeometry.morphTargetsNeedUpdate = true;\r\n\t\t\t\tgeometry.elementsNeedUpdate = true;\r\n\t\t\t\tgeometry.uvsNeedUpdate = true;\r\n\t\t\t\tgeometry.normalsNeedUpdate = true;\r\n\t\t\t\tgeometry.tangentsNeedUpdate = true;\r\n\t\t\t\tgeometry.colorsNeedUpdate = true;\r\n\r\n\t\t\t\taddBuffers = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\taddBuffers = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( addBuffers || object.__webglActive === undefined ) {\r\n\r\n\t\t\t\taddBuffer( _webglObjects, geometryGroup, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tobject.__webglActive = true;\r\n\r\n\t}\r\n\r\n\tfunction addBuffer( objlist, buffer, object ) {\r\n\r\n\t\tvar id = object.id;\r\n\t\tobjlist[id] = objlist[id] || [];\r\n\t\tobjlist[id].push(\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tbuffer: buffer,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tmaterial: null,\r\n\t\t\t\tz: 0\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t};\r\n\r\n\tfunction addBufferImmediate( objlist, object ) {\r\n\r\n\t\tobjlist.push(\r\n\t\t\t{\r\n\t\t\t\tid: null,\r\n\t\t\t\tobject: object,\r\n\t\t\t\topaque: null,\r\n\t\t\t\ttransparent: null,\r\n\t\t\t\tz: 0\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t};\r\n\r\n\t// Objects updates\r\n\r\n\tfunction updateObject( object, scene ) {\r\n\r\n\t\tvar geometry = object.geometry, customAttributesDirty, material;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tsetDirectBuffers( geometry );\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t// check all geometry groups\r\n\r\n\t\t\tif ( geometry.groupsNeedUpdate === true ) {\r\n\r\n\t\t\t\tinitGeometryGroups( scene, object, geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\r\n\r\n\t\t\t\tmaterial = getBufferMaterial( object, geometryGroup );\r\n\r\n\t\t\t\tif ( geometry.groupsNeedUpdate === true ) {\r\n\r\n\t\t\t\t\tinitMeshBuffers( geometryGroup, object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcustomAttributesDirty = material.attributes && areCustomAttributesDirty( material );\r\n\r\n\t\t\t\tif ( geometry.verticesNeedUpdate || geometry.morphTargetsNeedUpdate || geometry.elementsNeedUpdate ||\r\n\t\t\t\t\t geometry.uvsNeedUpdate || geometry.normalsNeedUpdate ||\r\n\t\t\t\t\t geometry.colorsNeedUpdate || geometry.tangentsNeedUpdate || customAttributesDirty ) {\r\n\r\n\t\t\t\t\tsetMeshBuffers( geometryGroup, object, _gl.DYNAMIC_DRAW, ! geometry.dynamic, material );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.morphTargetsNeedUpdate = false;\r\n\t\t\tgeometry.elementsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.tangentsNeedUpdate = false;\r\n\r\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tmaterial = getBufferMaterial( object, geometry );\r\n\r\n\t\t\tcustomAttributesDirty = material.attributes && areCustomAttributesDirty( material );\r\n\r\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || geometry.lineDistancesNeedUpdate || customAttributesDirty ) {\r\n\r\n\t\t\t\tsetLineBuffers( geometry, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\r\n\r\n\r\n\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\tmaterial = getBufferMaterial( object, geometry );\r\n\r\n\t\t\tcustomAttributesDirty = material.attributes && areCustomAttributesDirty( material );\r\n\r\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || object.sortParticles || customAttributesDirty ) {\r\n\r\n\t\t\t\tsetParticleBuffers( geometry, _gl.DYNAMIC_DRAW, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Objects updates - custom attributes check\r\n\r\n\tfunction areCustomAttributesDirty( material ) {\r\n\r\n\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\tif ( material.attributes[ name ].needsUpdate ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction clearCustomAttributes( material ) {\r\n\r\n\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\tmaterial.attributes[ name ].needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Objects removal\r\n\r\n\tfunction removeObject( object ) {\r\n\r\n\t\tif ( object instanceof THREE.Mesh  ||\r\n\t\t\t object instanceof THREE.PointCloud ||\r\n\t\t\t object instanceof THREE.Line ) {\r\n\r\n\t\t\tdelete _webglObjects[ object.id ];\r\n\r\n\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\r\n\r\n\t\t\tremoveInstances( _webglObjectsImmediate, object );\r\n\r\n\t\t}\r\n\r\n\t\tdelete object.__webglInit;\r\n\t\tdelete object._modelViewMatrix;\r\n\t\tdelete object._normalMatrix;\r\n\r\n\t\tdelete object.__webglActive;\r\n\r\n\t}\r\n\r\n\tfunction removeInstances( objlist, object ) {\r\n\r\n\t\tfor ( var o = objlist.length - 1; o >= 0; o -- ) {\r\n\r\n\t\t\tif ( objlist[ o ].object === object ) {\r\n\r\n\t\t\t\tobjlist.splice( o, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Materials\r\n\r\n\tfunction initMaterial( material, lights, fog, object ) {\r\n\r\n\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tvar shaderID;\r\n\r\n\t\tif ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\tshaderID = 'depth';\r\n\r\n\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\tshaderID = 'normal';\r\n\r\n\t\t} else if ( material instanceof THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tshaderID = 'basic';\r\n\r\n\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\tshaderID = 'lambert';\r\n\r\n\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\tshaderID = 'phong';\r\n\r\n\t\t} else if ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\tshaderID = 'basic';\r\n\r\n\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\tshaderID = 'dashed';\r\n\r\n\t\t} else if ( material instanceof THREE.PointCloudMaterial ) {\r\n\r\n\t\t\tshaderID = 'particle_basic';\r\n\r\n\t\t}\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tvar shader = THREE.ShaderLib[ shaderID ];\r\n\r\n\t\t\tmaterial.__webglShader = {\r\n\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterial.__webglShader = {\r\n\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxLightCount = allocateLights( lights );\r\n\t\tvar maxShadows = allocateShadows( lights );\r\n\t\tvar maxBones = allocateBones( object );\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tprecision: _precision,\r\n\t\t\tsupportsVertexTextures: _supportsVertexTextures,\r\n\r\n\t\t\tmap: !! material.map,\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: _logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: _this.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: _this.maxMorphNormals,\r\n\r\n\t\t\tmaxDirLights: maxLightCount.directional,\r\n\t\t\tmaxPointLights: maxLightCount.point,\r\n\t\t\tmaxSpotLights: maxLightCount.spot,\r\n\t\t\tmaxHemiLights: maxLightCount.hemi,\r\n\r\n\t\t\tmaxShadows: maxShadows,\r\n\t\t\tshadowMapEnabled: _this.shadowMapEnabled && object.receiveShadow && maxShadows > 0,\r\n\t\t\tshadowMapType: _this.shadowMapType,\r\n\t\t\tshadowMapDebug: _this.shadowMapDebug,\r\n\t\t\tshadowMapCascade: _this.shadowMapCascade,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tmetal: material.metal,\r\n\t\t\twrapAround: material.wrapAround,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide\r\n\r\n\t\t};\r\n\r\n\t\t// Generate code\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tchunks.push( shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\tchunks.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tchunks.push( name );\r\n\t\t\t\tchunks.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in parameters ) {\r\n\r\n\t\t\tchunks.push( name );\r\n\t\t\tchunks.push( parameters[ name ] );\r\n\r\n\t\t}\r\n\r\n\t\tvar code = chunks.join();\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\r\n\t\tfor ( var p = 0, pl = _programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = _programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\tprogram.usedTimes ++;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( _this, code, material, parameters );\r\n\t\t\t_programs.push( program );\r\n\r\n\t\t\t_this.info.memory.programs = _programs.length;\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.program = program;\r\n\r\n\t\tvar attributes = program.attributes;\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tvar id, base = 'morphTarget';\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tid = base + i;\r\n\r\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tvar id, base = 'morphNormal';\r\n\r\n\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tid = base + i;\r\n\r\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.uniformsList = [];\r\n\r\n\t\tfor ( var u in material.__webglShader.uniforms ) {\r\n\r\n\t\t\tvar location = material.program.uniforms[ u ];\r\n\r\n\t\t\tif ( location ) {\r\n\t\t\t\tmaterial.uniformsList.push( [ material.__webglShader.uniforms[ u ], location ] );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, lights, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tif ( material.needsUpdate ) {\r\n\r\n\t\t\tif ( material.program ) deallocateMaterial( material );\r\n\r\n\t\t\tinitMaterial( material, lights, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tif ( ! object.__webglMorphTargetInfluences ) {\r\n\r\n\t\t\t\tobject.__webglMorphTargetInfluences = new Float32Array( _this.maxMorphTargets );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = material.program,\r\n\t\t\tp_uniforms = program.uniforms,\r\n\t\t\tm_uniforms = material.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\tif ( _currentMaterialId === -1 ) refreshLights = true;\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\t\tif ( _logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tif ( p_uniforms.cameraPosition !== null ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tif ( p_uniforms.viewMatrix !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== null ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== null ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _supportsBoneTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneTexture !== null ) {\r\n\r\n\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material.lights ) {\r\n\r\n\t\t\t\tif ( _lightsNeedUpdate ) {\r\n\r\n\t\t\t\t\trefreshLights = true;\r\n\t\t\t\t\tsetupLights( lights );\r\n\t\t\t\t\t_lightsNeedUpdate = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( refreshLights ) {\r\n\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointCloudMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsParticle( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\r\n\r\n\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load common uniforms\r\n\r\n\t\t\tloadUniformsGeneric( material.uniformsList );\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsMatrices( p_uniforms, object );\r\n\r\n\t\tif ( p_uniforms.modelMatrix !== null ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\tuniforms.diffuse.value.copyGammaToLinear( material.color );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t//  1. color map\r\n\t\t//  2. specular map\r\n\t\t//  3. normal map\r\n\t\t//  4. bump map\r\n\t\t//  5. alpha map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t//uniforms.reflectivity.value = material.reflectivity * material.reflectivity;\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\t\tuniforms.combine.value = material.combine;\r\n\t\tuniforms.useRefract.value = material.envMap && material.envMap.mapping instanceof THREE.CubeRefractionMapping;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsParticle ( uniforms, material ) {\r\n\r\n\t\tuniforms.psColor.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size;\r\n\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.shininess.value = material.shininess;\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\r\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\r\n\t\t\tuniforms.specular.value.copyGammaToLinear( material.specular );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.ambient.value = material.ambient;\r\n\t\t\tuniforms.emissive.value = material.emissive;\r\n\t\t\tuniforms.specular.value = material.specular;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.wrapAround ) {\r\n\r\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert ( uniforms, material ) {\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\r\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.ambient.value = material.ambient;\r\n\t\t\tuniforms.emissive.value = material.emissive;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.wrapAround ) {\r\n\r\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLights ( uniforms, lights ) {\r\n\r\n\t\tuniforms.ambientLightColor.value = lights.ambient;\r\n\r\n\t\tuniforms.directionalLightColor.value = lights.directional.colors;\r\n\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\r\n\r\n\t\tuniforms.pointLightColor.value = lights.point.colors;\r\n\t\tuniforms.pointLightPosition.value = lights.point.positions;\r\n\t\tuniforms.pointLightDistance.value = lights.point.distances;\r\n\r\n\t\tuniforms.spotLightColor.value = lights.spot.colors;\r\n\t\tuniforms.spotLightPosition.value = lights.spot.positions;\r\n\t\tuniforms.spotLightDistance.value = lights.spot.distances;\r\n\t\tuniforms.spotLightDirection.value = lights.spot.directions;\r\n\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\r\n\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\r\n\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\r\n\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, boolean ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = boolean;\r\n\r\n\t\tuniforms.directionalLightColor.needsUpdate = boolean;\r\n\t\tuniforms.directionalLightDirection.needsUpdate = boolean;\r\n\r\n\t\tuniforms.pointLightColor.needsUpdate = boolean;\r\n\t\tuniforms.pointLightPosition.needsUpdate = boolean;\r\n\t\tuniforms.pointLightDistance.needsUpdate = boolean;\r\n\r\n\t\tuniforms.spotLightColor.needsUpdate = boolean;\r\n\t\tuniforms.spotLightPosition.needsUpdate = boolean;\r\n\t\tuniforms.spotLightDistance.needsUpdate = boolean;\r\n\t\tuniforms.spotLightDirection.needsUpdate = boolean;\r\n\t\tuniforms.spotLightAngleCos.needsUpdate = boolean;\r\n\t\tuniforms.spotLightExponent.needsUpdate = boolean;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.needsUpdate = boolean;\r\n\t\tuniforms.hemisphereLightGroundColor.needsUpdate = boolean;\r\n\t\tuniforms.hemisphereLightDirection.needsUpdate = boolean;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsShadow ( uniforms, lights ) {\r\n\r\n\t\tif ( uniforms.shadowMatrix ) {\r\n\r\n\t\t\tvar j = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar light = lights[ i ];\r\n\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) ) {\r\n\r\n\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\r\n\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\r\n\r\n\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\r\n\r\n\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\r\n\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\r\n\r\n\t\t\t\t\tj ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Uniforms (load to GPU)\r\n\r\n\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\r\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object._modelViewMatrix.elements );\r\n\r\n\t\tif ( uniforms.normalMatrix ) {\r\n\r\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object._normalMatrix.elements );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= _maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + _maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction loadUniformsGeneric ( uniforms ) {\r\n\r\n\t\tvar texture, textureUnit, offset;\r\n\r\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\r\n\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\r\n\t\t\tvar type = uniform.type;\r\n\t\t\tvar value = uniform.value;\r\n\t\t\tvar location = uniforms[ j ][ 1 ];\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase '1i':\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1f':\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2f':\r\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3f':\r\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4f':\r\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1iv':\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3iv':\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1fv':\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2fv':\r\n\t\t\t\t\t_gl.uniform2fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3fv':\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4fv':\r\n\t\t\t\t\t_gl.uniform4fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix3fv':\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix4fv':\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tcase 'i':\r\n\r\n\t\t\t\t\t// single integer\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'f':\r\n\r\n\t\t\t\t\t// single float\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2':\r\n\r\n\t\t\t\t\t// single THREE.Vector2\r\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3':\r\n\r\n\t\t\t\t\t// single THREE.Vector3\r\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4':\r\n\r\n\t\t\t\t\t// single THREE.Vector4\r\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'c':\r\n\r\n\t\t\t\t\t// single THREE.Color\r\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv1':\r\n\r\n\t\t\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv':\r\n\r\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv1':\r\n\r\n\t\t\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv':\r\n\r\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector2\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\toffset = i * 2;\r\n\r\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\toffset = i * 3;\r\n\r\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\toffset = i * 4;\r\n\r\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\r\n\t\t\t\t\t\tuniform._array[ offset + 3 ] = value[ i ].w;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3':\r\n\r\n\t\t\t\t\t// single THREE.Matrix3\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4':\r\n\r\n\t\t\t\t\t// single THREE.Matrix4\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 't':\r\n\r\n\t\t\t\t\t// single THREE.Texture (2d or cube)\r\n\r\n\t\t\t\t\ttexture = value;\r\n\t\t\t\t\ttextureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\r\n\r\n\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t   ( texture.image instanceof Array && texture.image.length === 6 ) ) { // CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tv':\r\n\r\n\t\t\t\t\t// array of THREE.Texture (2d)\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = [];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\r\n\t\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupMatrices ( object, camera ) {\r\n\r\n\t\tobject._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\tobject._normalMatrix.getNormalMatrix( object._modelViewMatrix );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setColorGamma( array, offset, color, intensitySq ) {\r\n\r\n\t\tarray[ offset ]     = color.r * color.r * intensitySq;\r\n\t\tarray[ offset + 1 ] = color.g * color.g * intensitySq;\r\n\t\tarray[ offset + 2 ] = color.b * color.b * intensitySq;\r\n\r\n\t}\r\n\r\n\tfunction setColorLinear( array, offset, color, intensity ) {\r\n\r\n\t\tarray[ offset ]     = color.r * intensity;\r\n\t\tarray[ offset + 1 ] = color.g * intensity;\r\n\t\tarray[ offset + 2 ] = color.b * intensity;\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights ) {\r\n\r\n\t\tvar l, ll, light, n,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor, skyColor, groundColor,\r\n\t\tintensity,  intensitySq,\r\n\t\tposition,\r\n\t\tdistance,\r\n\r\n\t\tzlights = _lights,\r\n\r\n\t\tdirColors = zlights.directional.colors,\r\n\t\tdirPositions = zlights.directional.positions,\r\n\r\n\t\tpointColors = zlights.point.colors,\r\n\t\tpointPositions = zlights.point.positions,\r\n\t\tpointDistances = zlights.point.distances,\r\n\r\n\t\tspotColors = zlights.spot.colors,\r\n\t\tspotPositions = zlights.spot.positions,\r\n\t\tspotDistances = zlights.spot.distances,\r\n\t\tspotDirections = zlights.spot.directions,\r\n\t\tspotAnglesCos = zlights.spot.anglesCos,\r\n\t\tspotExponents = zlights.spot.exponents,\r\n\r\n\t\themiSkyColors = zlights.hemi.skyColors,\r\n\t\themiGroundColors = zlights.hemi.groundColors,\r\n\t\themiPositions = zlights.hemi.positions,\r\n\r\n\t\tdirLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0,\r\n\r\n\t\tdirCount = 0,\r\n\t\tpointCount = 0,\r\n\t\tspotCount = 0,\r\n\t\themiCount = 0,\r\n\r\n\t\tdirOffset = 0,\r\n\t\tpointOffset = 0,\r\n\t\tspotOffset = 0,\r\n\t\themiOffset = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow ) continue;\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tr += color.r * color.r;\r\n\t\t\t\t\tg += color.g * color.g;\r\n\t\t\t\t\tb += color.b * color.b;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tr += color.r;\r\n\t\t\t\t\tg += color.g;\r\n\t\t\t\t\tb += color.b;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tdirCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.normalize();\r\n\r\n\t\t\t\tdirOffset = dirLength * 3;\r\n\r\n\t\t\t\tdirPositions[ dirOffset ]     = _direction.x;\r\n\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\r\n\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tsetColorGamma( dirColors, dirOffset, color, intensity * intensity );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdirLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tpointCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tpointOffset = pointLength * 3;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tsetColorGamma( pointColors, pointOffset, color, intensity * intensity );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\r\n\r\n\t\t\t\tpointPositions[ pointOffset ]     = _vector3.x;\r\n\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\r\n\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\r\n\r\n\t\t\t\tpointDistances[ pointLength ] = distance;\r\n\r\n\t\t\t\tpointLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tspotCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tspotOffset = spotLength * 3;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tsetColorGamma( spotColors, spotOffset, color, intensity * intensity );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\r\n\t\t\t\tspotPositions[ spotOffset ]     = _direction.x;\r\n\t\t\t\tspotPositions[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\tspotPositions[ spotOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tspotDistances[ spotLength ] = distance;\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.normalize();\r\n\r\n\t\t\t\tspotDirections[ spotOffset ]     = _direction.x;\r\n\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\r\n\t\t\t\tspotExponents[ spotLength ] = light.exponent;\r\n\r\n\t\t\t\tspotLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\themiCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_direction.normalize();\r\n\r\n\t\t\t\themiOffset = hemiLength * 3;\r\n\r\n\t\t\t\themiPositions[ hemiOffset ]     = _direction.x;\r\n\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\r\n\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tskyColor = light.color;\r\n\t\t\t\tgroundColor = light.groundColor;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tintensitySq = intensity * intensity;\r\n\r\n\t\t\t\t\tsetColorGamma( hemiSkyColors, hemiOffset, skyColor, intensitySq );\r\n\t\t\t\t\tsetColorGamma( hemiGroundColors, hemiOffset, groundColor, intensitySq );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\r\n\t\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\themiLength += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// null eventual remains from removed lights\r\n\t\t// (this is to avoid if in shader)\r\n\r\n\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\r\n\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\r\n\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\r\n\r\n\t\tzlights.directional.length = dirLength;\r\n\t\tzlights.point.length = pointLength;\r\n\t\tzlights.spot.length = spotLength;\r\n\t\tzlights.hemi.length = hemiLength;\r\n\r\n\t\tzlights.ambient[ 0 ] = r;\r\n\t\tzlights.ambient[ 1 ] = g;\r\n\t\tzlights.ambient[ 2 ] = b;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\r\n\t\t\t_gl.disable( _gl.CULL_FACE );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.enable( _gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setMaterialFaces = function ( material ) {\r\n\r\n\t\tvar doubleSided = material.side === THREE.DoubleSide;\r\n\t\tvar flipSided = material.side === THREE.BackSide;\r\n\r\n\t\tif ( _oldDoubleSided !== doubleSided ) {\r\n\r\n\t\t\tif ( doubleSided ) {\r\n\r\n\t\t\t\t_gl.disable( _gl.CULL_FACE );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.enable( _gl.CULL_FACE );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldDoubleSided = doubleSided;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _oldFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tif ( _oldDepthTest !== depthTest ) {\r\n\r\n\t\t\tif ( depthTest ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.DEPTH_TEST );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.disable( _gl.DEPTH_TEST );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldDepthTest = depthTest;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\tif ( _oldDepthWrite !== depthWrite ) {\r\n\r\n\t\t\t_gl.depthMask( depthWrite );\r\n\t\t\t_oldDepthWrite = depthWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setLineWidth ( width ) {\r\n\r\n\t\tif ( width !== _oldLineWidth ) {\r\n\r\n\t\t\t_gl.lineWidth( width );\r\n\r\n\t\t\t_oldLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setPolygonOffset ( polygonoffset, factor, units ) {\r\n\r\n\t\tif ( _oldPolygonOffset !== polygonoffset ) {\r\n\r\n\t\t\tif ( polygonoffset ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.disable( _gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldPolygonOffset = polygonoffset;\r\n\r\n\t\t}\r\n\r\n\t\tif ( polygonoffset && ( _oldPolygonOffsetFactor !== factor || _oldPolygonOffsetUnits !== units ) ) {\r\n\r\n\t\t\t_gl.polygonOffset( factor, units );\r\n\r\n\t\t\t_oldPolygonOffsetFactor = factor;\r\n\t\t\t_oldPolygonOffsetUnits = units;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst ) {\r\n\r\n\t\tif ( blending !== _oldBlending ) {\r\n\r\n\t\t\tif ( blending === THREE.NoBlending ) {\r\n\r\n\t\t\t\t_gl.disable( _gl.BLEND );\r\n\r\n\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE );\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquationSeparate( _gl.FUNC_ADD, _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFuncSeparate( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldBlending = blending;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tif ( blendEquation !== _oldBlendEquation ) {\r\n\r\n\t\t\t\t_gl.blendEquation( paramThreeToGL( blendEquation ) );\r\n\r\n\t\t\t\t_oldBlendEquation = blendEquation;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== _oldBlendSrc || blendDst !== _oldBlendDst ) {\r\n\r\n\t\t\t\t_gl.blendFunc( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ) );\r\n\r\n\t\t\t\t_oldBlendSrc = blendSrc;\r\n\t\t\t\t_oldBlendDst = blendDst;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_oldBlendEquation = null;\r\n\t\t\t_oldBlendSrc = null;\r\n\t\t\t_oldBlendDst = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isImagePowerOfTwo ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension && texture.type !== THREE.FloatType ) {\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || texture.__oldAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\ttexture.__oldAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.uploadTexture = function ( texture ) {\r\n\r\n\t\tif ( texture.__webglInit === undefined ) {\r\n\r\n\t\t\ttexture.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttexture.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_this.info.memory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\ttexture.image = clampToMaxSize( texture.image, _maxTextureSize );\r\n\r\n\t\tvar image = texture.image,\r\n\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\r\n\r\n\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else { // regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttexture.needsUpdate = false;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate();\r\n\r\n\t};\r\n\r\n\tthis.setTexture = function ( texture, slot ) {\r\n\r\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\r\n\t\tif ( texture.needsUpdate ) {\r\n\r\n\t\t\t_this.uploadTexture( texture );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.log( 'THREE.WebGLRenderer:', image, 'is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height + '.' );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setCubeTexture ( texture, slot ) {\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.needsUpdate ) {\r\n\r\n\t\t\t\tif ( ! texture.image.__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttexture.image.__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_this.info.memory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], _maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.needsUpdate = false;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\r\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.__webglTexture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, renderTarget.__webglTexture, 0 );\r\n\r\n\t}\r\n\r\n\tfunction setupRenderBuffer ( renderbuffer, renderTarget  ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t/* For some reason this is not working. Defaulting to RGBA4.\r\n\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\t*/\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( renderTarget && renderTarget.__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\r\n\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\r\n\r\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\t\trenderTarget.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_this.info.memory.textures ++;\r\n\r\n\t\t\t// Setup texture, create render and frame buffers\r\n\r\n\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\r\n\t\t\t\tglType = paramThreeToGL( renderTarget.type );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTarget.__webglFramebuffer = [];\r\n\t\t\t\trenderTarget.__webglRenderbuffer = [];\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\trenderTarget.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\t\t\t\t\trenderTarget.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer[ i ], renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderTarget.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\trenderTarget.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\trenderTarget.__webglRenderbuffer = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer, renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Release everything\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer, width, height, vx, vy;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\twidth = renderTarget.width;\r\n\t\t\theight = renderTarget.height;\r\n\r\n\t\t\tvx = 0;\r\n\t\t\tvy = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\twidth = _viewportWidth;\r\n\t\t\theight = _viewportHeight;\r\n\r\n\t\t\tvx = _viewportX;\r\n\t\t\tvy = _viewportY;\r\n\r\n\t\t}\r\n\r\n\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_gl.viewport( vx, vy, width, height );\r\n\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\t_currentWidth = width;\r\n\t\t_currentHeight = height;\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap ( renderTarget ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n\t// Allocations\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader\r\n\t\t\t//   to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = _gl.getParameter( _gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction allocateLights( lights ) {\r\n\r\n\t\tvar dirLights = 0;\r\n\t\tvar pointLights = 0;\r\n\t\tvar spotLights = 0;\r\n\t\tvar hemiLights = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\r\n\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\r\n\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\r\n\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\r\n\r\n\t}\r\n\r\n\tfunction allocateShadows( lights ) {\r\n\r\n\t\tvar maxShadows = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\r\n\t\t\tif ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) maxShadows ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn maxShadows;\r\n\r\n\t}\r\n\r\n\t// DEPRECATED\r\n\t\r\n\tthis.initMaterial = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPrePlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPostPlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.updateShadowMap = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\toptions = options || {};\r\n\r\n\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\r\n\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\r\n\tthis.generateMipmaps = true;\r\n\r\n\tthis.shareDepthFrom = null;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTarget.prototype = {\r\n\r\n\tconstructor: THREE.WebGLRenderTarget,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar tmp = new THREE.WebGLRenderTarget( this.width, this.height );\r\n\r\n\t\ttmp.wrapS = this.wrapS;\r\n\t\ttmp.wrapT = this.wrapT;\r\n\r\n\t\ttmp.magFilter = this.magFilter;\r\n\t\ttmp.minFilter = this.minFilter;\r\n\r\n\t\ttmp.anisotropy = this.anisotropy;\r\n\r\n\t\ttmp.offset.copy( this.offset );\r\n\t\ttmp.repeat.copy( this.repeat );\r\n\r\n\t\ttmp.format = this.format;\r\n\t\ttmp.type = this.type;\r\n\r\n\t\ttmp.depthBuffer = this.depthBuffer;\r\n\t\ttmp.stencilBuffer = this.stencilBuffer;\r\n\r\n\t\ttmp.generateMipmaps = this.generateMipmaps;\r\n\r\n\t\ttmp.shareDepthFrom = this.shareDepthFrom;\r\n\r\n\t\treturn tmp;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\t\t\r\n\t\t\tcase 'OES_texture_float':\r\n\t\t\t\textension = gl.getExtension( 'OES_texture_float' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'OES_texture_float_linear':\r\n\t\t\t\textension = gl.getExtension( 'OES_texture_float_linear' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'OES_standard_derivatives':\r\n\t\t\t\textension = gl.getExtension( 'OES_standard_derivatives' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'OES_element_index_uint':\r\n\t\t\t\textension = gl.getExtension( 'OES_element_index_uint' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'EXT_blend_minmax':\r\n\t\t\t\textension = gl.getExtension( 'EXT_blend_minmax' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'EXT_frag_depth':\r\n\t\t\t\textension = gl.getExtension( 'EXT_frag_depth' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.log( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\tvar generateDefines = function ( defines ) {\r\n\r\n\t\tvar value, chunk, chunks = [];\r\n\r\n\t\tfor ( var d in defines ) {\r\n\r\n\t\t\tvalue = defines[ d ];\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunk = \"#define \" + d + \" \" + value;\r\n\t\t\tchunks.push( chunk );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( \"\\n\" );\r\n\r\n\t};\r\n\r\n\tvar cacheUniformLocations = function ( gl, program, identifiers ) {\r\n\r\n\t\tvar uniforms = {};\r\n\r\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar id = identifiers[ i ];\r\n\t\t\tuniforms[ id ] = gl.getUniformLocation( program, id );\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t};\r\n\r\n\tvar cacheAttributeLocations = function ( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar id = identifiers[ i ];\r\n\t\t\tattributes[ id ] = gl.getAttribLocation( program, id );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t};\r\n\r\n\treturn function ( renderer, code, material, parameters ) {\r\n\r\n\t\tvar _this = renderer;\r\n\t\tvar _gl = _this.context;\r\n\r\n\t\tvar defines = material.defines;\r\n\t\tvar uniforms = material.__webglShader.uniforms;\r\n\t\tvar attributes = material.attributes;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar index0AttributeName = material.index0AttributeName;\r\n\r\n\t\tif ( index0AttributeName === undefined && parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\r\n\t\t\tindex0AttributeName = 'position';\r\n\r\n\t\t}\r\n\r\n\t\tvar shadowMapTypeDefine = \"SHADOWMAP_TYPE_BASIC\";\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF\";\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF_SOFT\";\r\n\r\n\t\t}\r\n\r\n\t\t// console.log( \"building new program \" );\r\n\r\n\t\t//\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = _gl.createProgram();\r\n\r\n\t\tvar prefix_vertex, prefix_fragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefix_vertex = '';\r\n\t\t\tprefix_fragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefix_vertex = [\r\n\r\n\t\t\t\t\"precision \" + parameters.precision + \" float;\",\r\n\t\t\t\t\"precision \" + parameters.precision + \" int;\",\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? \"#define VERTEX_TEXTURES\" : \"\",\r\n\r\n\t\t\t\t_this.gammaInput ? \"#define GAMMA_INPUT\" : \"\",\r\n\t\t\t\t_this.gammaOutput ? \"#define GAMMA_OUTPUT\" : \"\",\r\n\r\n\t\t\t\t\"#define MAX_DIR_LIGHTS \" + parameters.maxDirLights,\r\n\t\t\t\t\"#define MAX_POINT_LIGHTS \" + parameters.maxPointLights,\r\n\t\t\t\t\"#define MAX_SPOT_LIGHTS \" + parameters.maxSpotLights,\r\n\t\t\t\t\"#define MAX_HEMI_LIGHTS \" + parameters.maxHemiLights,\r\n\r\n\t\t\t\t\"#define MAX_SHADOWS \" + parameters.maxShadows,\r\n\r\n\t\t\t\t\"#define MAX_BONES \" + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? \"#define USE_MAP\" : \"\",\r\n\t\t\t\tparameters.envMap ? \"#define USE_ENVMAP\" : \"\",\r\n\t\t\t\tparameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\r\n\t\t\t\tparameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\r\n\t\t\t\tparameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\r\n\t\t\t\tparameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\r\n\t\t\t\tparameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\r\n\t\t\t\tparameters.vertexColors ? \"#define USE_COLOR\" : \"\",\r\n\r\n\t\t\t\tparameters.skinning ? \"#define USE_SKINNING\" : \"\",\r\n\t\t\t\tparameters.useVertexTexture ? \"#define BONE_TEXTURE\" : \"\",\r\n\r\n\t\t\t\tparameters.morphTargets ? \"#define USE_MORPHTARGETS\" : \"\",\r\n\t\t\t\tparameters.morphNormals ? \"#define USE_MORPHNORMALS\" : \"\",\r\n\t\t\t\tparameters.wrapAround ? \"#define WRAP_AROUND\" : \"\",\r\n\t\t\t\tparameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\r\n\t\t\t\tparameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\r\n\t\t\t\tparameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\r\n\t\t\t\tparameters.shadowMapDebug ? \"#define SHADOWMAP_DEBUG\" : \"\",\r\n\t\t\t\tparameters.shadowMapCascade ? \"#define SHADOWMAP_CASCADE\" : \"\",\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? \"#define USE_SIZEATTENUATION\" : \"\",\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\r\n\t\t\t\t//_this._glExtensionFragDepth ? \"#define USE_LOGDEPTHBUF_EXT\" : \"\",\r\n\r\n\r\n\t\t\t\t\"uniform mat4 modelMatrix;\",\r\n\t\t\t\t\"uniform mat4 modelViewMatrix;\",\r\n\t\t\t\t\"uniform mat4 projectionMatrix;\",\r\n\t\t\t\t\"uniform mat4 viewMatrix;\",\r\n\t\t\t\t\"uniform mat3 normalMatrix;\",\r\n\t\t\t\t\"uniform vec3 cameraPosition;\",\r\n\r\n\t\t\t\t\"attribute vec3 position;\",\r\n\t\t\t\t\"attribute vec3 normal;\",\r\n\t\t\t\t\"attribute vec2 uv;\",\r\n\t\t\t\t\"attribute vec2 uv2;\",\r\n\r\n\t\t\t\t\"#ifdef USE_COLOR\",\r\n\r\n\t\t\t\t\"\tattribute vec3 color;\",\r\n\r\n\t\t\t\t\"#endif\",\r\n\r\n\t\t\t\t\"#ifdef USE_MORPHTARGETS\",\r\n\r\n\t\t\t\t\"\tattribute vec3 morphTarget0;\",\r\n\t\t\t\t\"\tattribute vec3 morphTarget1;\",\r\n\t\t\t\t\"\tattribute vec3 morphTarget2;\",\r\n\t\t\t\t\"\tattribute vec3 morphTarget3;\",\r\n\r\n\t\t\t\t\"\t#ifdef USE_MORPHNORMALS\",\r\n\r\n\t\t\t\t\"\t\tattribute vec3 morphNormal0;\",\r\n\t\t\t\t\"\t\tattribute vec3 morphNormal1;\",\r\n\t\t\t\t\"\t\tattribute vec3 morphNormal2;\",\r\n\t\t\t\t\"\t\tattribute vec3 morphNormal3;\",\r\n\r\n\t\t\t\t\"\t#else\",\r\n\r\n\t\t\t\t\"\t\tattribute vec3 morphTarget4;\",\r\n\t\t\t\t\"\t\tattribute vec3 morphTarget5;\",\r\n\t\t\t\t\"\t\tattribute vec3 morphTarget6;\",\r\n\t\t\t\t\"\t\tattribute vec3 morphTarget7;\",\r\n\r\n\t\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t\"#endif\",\r\n\r\n\t\t\t\t\"#ifdef USE_SKINNING\",\r\n\r\n\t\t\t\t\"\tattribute vec4 skinIndex;\",\r\n\t\t\t\t\"\tattribute vec4 skinWeight;\",\r\n\r\n\t\t\t\t\"#endif\",\r\n\r\n\t\t\t\t\"\"\r\n\r\n\t\t\t].join( '\\n' );\r\n\r\n\t\t\tprefix_fragment = [\r\n\r\n\t\t\t\t\"precision \" + parameters.precision + \" float;\",\r\n\t\t\t\t\"precision \" + parameters.precision + \" int;\",\r\n\r\n\t\t\t\t( parameters.bumpMap || parameters.normalMap ) ? \"#extension GL_OES_standard_derivatives : enable\" : \"\",\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\t\"#define MAX_DIR_LIGHTS \" + parameters.maxDirLights,\r\n\t\t\t\t\"#define MAX_POINT_LIGHTS \" + parameters.maxPointLights,\r\n\t\t\t\t\"#define MAX_SPOT_LIGHTS \" + parameters.maxSpotLights,\r\n\t\t\t\t\"#define MAX_HEMI_LIGHTS \" + parameters.maxHemiLights,\r\n\r\n\t\t\t\t\"#define MAX_SHADOWS \" + parameters.maxShadows,\r\n\r\n\t\t\t\tparameters.alphaTest ? \"#define ALPHATEST \" + parameters.alphaTest: \"\",\r\n\r\n\t\t\t\t_this.gammaInput ? \"#define GAMMA_INPUT\" : \"\",\r\n\t\t\t\t_this.gammaOutput ? \"#define GAMMA_OUTPUT\" : \"\",\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? \"#define USE_FOG\" : \"\",\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? \"#define FOG_EXP2\" : \"\",\r\n\r\n\t\t\t\tparameters.map ? \"#define USE_MAP\" : \"\",\r\n\t\t\t\tparameters.envMap ? \"#define USE_ENVMAP\" : \"\",\r\n\t\t\t\tparameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\r\n\t\t\t\tparameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\r\n\t\t\t\tparameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\r\n\t\t\t\tparameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\r\n\t\t\t\tparameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\r\n\t\t\t\tparameters.vertexColors ? \"#define USE_COLOR\" : \"\",\r\n\r\n\t\t\t\tparameters.metal ? \"#define METAL\" : \"\",\r\n\t\t\t\tparameters.wrapAround ? \"#define WRAP_AROUND\" : \"\",\r\n\t\t\t\tparameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\r\n\t\t\t\tparameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\r\n\t\t\t\tparameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\r\n\t\t\t\tparameters.shadowMapDebug ? \"#define SHADOWMAP_DEBUG\" : \"\",\r\n\t\t\t\tparameters.shadowMapCascade ? \"#define SHADOWMAP_CASCADE\" : \"\",\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\r\n\t\t\t\t//_this._glExtensionFragDepth ? \"#define USE_LOGDEPTHBUF_EXT\" : \"\",\r\n\r\n\t\t\t\t\"uniform mat4 viewMatrix;\",\r\n\t\t\t\t\"uniform vec3 cameraPosition;\",\r\n\t\t\t\t\"\"\r\n\r\n\t\t\t].join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvar glVertexShader = new THREE.WebGLShader( _gl, _gl.VERTEX_SHADER, prefix_vertex + vertexShader );\r\n\t\tvar glFragmentShader = new THREE.WebGLShader( _gl, _gl.FRAGMENT_SHADER, prefix_fragment + fragmentShader );\r\n\r\n\t\t_gl.attachShader( program, glVertexShader );\r\n\t\t_gl.attachShader( program, glFragmentShader );\r\n\r\n\t\tif ( index0AttributeName !== undefined ) {\r\n\r\n\t\t\t// Force a particular attribute to index 0.\r\n\t\t\t// because potentially expensive emulation is done by browser if attribute 0 is disabled.\r\n\t\t\t// And, color, for example is often automatically bound to index 0 so disabling it\r\n\r\n\t\t\t_gl.bindAttribLocation( program, 0, index0AttributeName );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.linkProgram( program );\r\n\r\n\t\tif ( _gl.getProgramParameter( program, _gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: Could not initialise shader.' );\r\n\t\t\tconsole.error( 'gl.VALIDATE_STATUS', _gl.getProgramParameter( program, _gl.VALIDATE_STATUS ) );\r\n\t\t\tconsole.error( 'gl.getError()', _gl.getError() );\r\n\r\n\t\t}\r\n\r\n\t\tif ( _gl.getProgramInfoLog( program ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', _gl.getProgramInfoLog( program ) );\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\t_gl.deleteShader( glVertexShader );\r\n\t\t_gl.deleteShader( glFragmentShader );\r\n\r\n\t\t// cache uniform locations\r\n\r\n\t\tvar identifiers = [\r\n\r\n\t\t\t'viewMatrix', 'modelViewMatrix', 'projectionMatrix', 'normalMatrix', 'modelMatrix', 'cameraPosition', 'morphTargetInfluences', 'bindMatrix', 'bindMatrixInverse'\r\n\r\n\t\t];\r\n\r\n\t\tif ( parameters.useVertexTexture ) {\r\n\r\n\t\t\tidentifiers.push( 'boneTexture' );\r\n\t\t\tidentifiers.push( 'boneTextureWidth' );\r\n\t\t\tidentifiers.push( 'boneTextureHeight' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tidentifiers.push( 'boneGlobalMatrices' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.logarithmicDepthBuffer ) {\r\n\r\n\t\t\tidentifiers.push('logDepthBufFC');\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfor ( var u in uniforms ) {\r\n\r\n\t\t\tidentifiers.push( u );\r\n\r\n\t\t}\r\n\r\n\t\tthis.uniforms = cacheUniformLocations( _gl, program, identifiers );\r\n\r\n\t\t// cache attributes locations\r\n\r\n\t\tidentifiers = [\r\n\r\n\t\t\t\"position\", \"normal\", \"uv\", \"uv2\", \"tangent\", \"color\",\r\n\t\t\t\"skinIndex\", \"skinWeight\", \"lineDistance\"\r\n\r\n\t\t];\r\n\r\n\t\tfor ( var i = 0; i < parameters.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\tidentifiers.push( \"morphTarget\" + i );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameters.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\tidentifiers.push( \"morphNormal\" + i );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var a in attributes ) {\r\n\r\n\t\t\tidentifiers.push( a );\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes = cacheAttributeLocations( _gl, program, identifiers );\r\n\t\tthis.attributesKeys = Object.keys( this.attributes );\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tvar addLineNumbers = function ( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t};\r\n\r\n\treturn function ( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type ); \r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', gl.getShaderInfoLog( shader ) );\r\n\t\t\tconsole.warn( addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\tvar hasVertexTexture;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t-1, -1,  0, 0,\r\n\t\t\t 1, -1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t-1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\r\n\t\tvar shader;\r\n\r\n\t\tif ( hasVertexTexture ) {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"precision mediump float;\",\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t}\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewportHeight / viewportWidth,\r\n\t\t\thalfViewportWidth = viewportWidth * 0.5,\r\n\t\t\thalfViewportHeight = viewportHeight * 0.5;\r\n\r\n\t\tvar size = 16 / viewportHeight,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tgl.enableVertexAttribArray( attributes.vertex );\r\n\t\tgl.enableVertexAttribArray( attributes.uv );\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/unforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.disable( gl.CULL_FACE );\r\n\t\tgl.depthMask( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewportHeight;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\t\t\t\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[12], flare.matrixWorld.elements[13], flare.matrixWorld.elements[14] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition )\r\n\r\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\tscreenPositionPixels.x < viewportWidth &&\r\n\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tgl.disable( gl.BLEND );\r\n\t\t\t\tgl.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tgl.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tgl.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition )\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tgl.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\trenderer.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tgl.enable( gl.CULL_FACE );\r\n\t\tgl.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthMask( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/ShadowMapPlugin.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ShadowMapPlugin = function ( _renderer, _lights, _webglObjects, _webglObjectsImmediate ) {\r\n\r\n\tvar _gl = _renderer.context;\r\n\r\n\tvar _depthMaterial, _depthMaterialMorph, _depthMaterialSkin, _depthMaterialMorphSkin,\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_min = new THREE.Vector3(),\r\n\t_max = new THREE.Vector3(),\r\n\r\n\t_matrixPosition = new THREE.Vector3(),\r\n\t\r\n\t_renderList = [];\r\n\r\n\t// init\r\n\r\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\r\n\t_depthMaterial = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader\r\n\t } );\r\n\r\n\t_depthMaterialMorph = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true\r\n\t} );\r\n\r\n\t_depthMaterialSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\t_depthMaterialMorphSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\t_depthMaterial._shadowPass = true;\r\n\t_depthMaterialMorph._shadowPass = true;\r\n\t_depthMaterialSkin._shadowPass = true;\r\n\t_depthMaterialMorphSkin._shadowPass = true;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( _renderer.shadowMapEnabled === false ) return;\r\n\r\n\t\tvar i, il, j, jl, n,\r\n\r\n\t\tshadowMap, shadowMatrix, shadowCamera,\r\n\t\tprogram, buffer, material,\r\n\t\twebglObject, object, light,\r\n\r\n\t\tlights = [],\r\n\t\tk = 0,\r\n\r\n\t\tfog = null;\r\n\r\n\t\t// set GL state for depth map\r\n\r\n\t\t_gl.clearColor( 1, 1, 1, 1 );\r\n\t\t_gl.disable( _gl.BLEND );\r\n\r\n\t\t_gl.enable( _gl.CULL_FACE );\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_renderer.setDepthTest( true );\r\n\r\n\t\t// preprocess lights\r\n\t\t// \t- skip lights that are not casting shadows\r\n\t\t//\t- create virtual lights for cascaded shadow maps\r\n\r\n\t\tfor ( i = 0, il = _lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tlight = _lights[ i ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( ( light instanceof THREE.DirectionalLight ) && light.shadowCascade ) {\r\n\r\n\t\t\t\tfor ( n = 0; n < light.shadowCascadeCount; n ++ ) {\r\n\r\n\t\t\t\t\tvar virtualLight;\r\n\r\n\t\t\t\t\tif ( ! light.shadowCascadeArray[ n ] ) {\r\n\r\n\t\t\t\t\t\tvirtualLight = createVirtualLight( light, n );\r\n\t\t\t\t\t\tvirtualLight.originalCamera = camera;\r\n\r\n\t\t\t\t\t\tvar gyro = new THREE.Gyroscope();\r\n\t\t\t\t\t\tgyro.position.copy( light.shadowCascadeOffset );\r\n\r\n\t\t\t\t\t\tgyro.add( virtualLight );\r\n\t\t\t\t\t\tgyro.add( virtualLight.target );\r\n\r\n\t\t\t\t\t\tcamera.add( gyro );\r\n\r\n\t\t\t\t\t\tlight.shadowCascadeArray[ n ] = virtualLight;\r\n\r\n\t\t\t\t\t\tconsole.log( \"Created virtualLight\", virtualLight );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvirtualLight = light.shadowCascadeArray[ n ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tupdateVirtualLight( light, n );\r\n\r\n\t\t\t\t\tlights[ k ] = virtualLight;\r\n\t\t\t\t\tk ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlights[ k ] = light;\r\n\t\t\t\tk ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tlight = lights[ i ];\r\n\r\n\t\t\tif ( ! light.shadowMap ) {\r\n\r\n\t\t\t\tvar shadowFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\tif ( _renderer.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\t\t\tshadowFilter = THREE.NearestFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\r\n\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\r\n\r\n\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! light.shadowCamera ) {\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( \"Unsupported light type for shadow\" );\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscene.add( light.shadowCamera );\r\n\r\n\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\r\n\r\n\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\r\n\t\t\t\tscene.add( light.cameraHelper );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( light.isVirtual && virtualLight.originalCamera == camera ) {\r\n\r\n\t\t\t\tupdateShadowCamera( camera, light );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tshadowMap = light.shadowMap;\r\n\t\t\tshadowMatrix = light.shadowMatrix;\r\n\t\t\tshadowCamera = light.shadowCamera;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\tshadowCamera.lookAt( _matrixPosition );\r\n\t\t\tshadowCamera.updateMatrixWorld();\r\n\r\n\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\r\n\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\r\n\r\n\t\t\t// compute shadow matrix\r\n\r\n\t\t\tshadowMatrix.set(\r\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t);\r\n\r\n\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t// render shadow map\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t_renderList.length = 0;\r\n\r\n\t\t\tprojectObject( scene, scene, shadowCamera );\r\n\r\n\r\n\t\t\t// render regular objects\r\n\r\n\t\t\tvar objectMaterial, useMorphing, useSkinning;\r\n\r\n\t\t\tfor ( j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\twebglObject = _renderList[ j ];\r\n\r\n\t\t\t\tobject = webglObject.object;\r\n\t\t\t\tbuffer = webglObject.buffer;\r\n\r\n\t\t\t\t// culling is overriden globally for all objects\r\n\t\t\t\t// while rendering depth map\r\n\r\n\t\t\t\t// need to deal with MeshFaceMaterial somehow\r\n\t\t\t\t// in that case just use the first of material.materials for now\r\n\t\t\t\t// (proper solution would require to break objects by materials\r\n\t\t\t\t//  similarly to regular rendering and then set corresponding\r\n\t\t\t\t//  depth materials per each chunk instead of just once per object)\r\n\r\n\t\t\t\tobjectMaterial = getObjectMaterial( object );\r\n\r\n\t\t\t\tuseMorphing = object.geometry.morphTargets !== undefined && object.geometry.morphTargets.length > 0 && objectMaterial.morphTargets;\r\n\t\t\t\tuseSkinning = object instanceof THREE.SkinnedMesh && objectMaterial.skinning;\r\n\r\n\t\t\t\tif ( object.customDepthMaterial ) {\r\n\r\n\t\t\t\t\tmaterial = object.customDepthMaterial;\r\n\r\n\t\t\t\t} else if ( useSkinning ) {\r\n\r\n\t\t\t\t\tmaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\r\n\r\n\t\t\t\t} else if ( useMorphing ) {\r\n\r\n\t\t\t\t\tmaterial = _depthMaterialMorph;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmaterial = _depthMaterial;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_renderer.setMaterialFaces( objectMaterial );\r\n\r\n\t\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, fog, material, buffer, object );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_renderer.renderBuffer( shadowCamera, _lights, fog, material, buffer, object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// set matrices and render immediate objects\r\n\r\n\t\t\tfor ( j = 0, jl = _webglObjectsImmediate.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\twebglObject = _webglObjectsImmediate[ j ];\r\n\t\t\t\tobject = webglObject.object;\r\n\r\n\t\t\t\tif ( object.visible && object.castShadow ) {\r\n\r\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\r\n\t\t\t\t\t_renderer.renderImmediateObject( shadowCamera, _lights, fog, _depthMaterial, object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore GL state\r\n\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\r\n\t\t_gl.clearColor( clearColor.r, clearColor.g, clearColor.b, clearAlpha );\r\n\t\t_gl.enable( _gl.BLEND );\r\n\r\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_renderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction projectObject( scene, object, shadowCamera ){\r\n\r\n\t\tif ( object.visible ) {\r\n\r\n\t\t\tvar webglObjects = _webglObjects[ object.id ];\r\n\r\n\t\t\tif ( webglObjects && object.castShadow && (object.frustumCulled === false || _frustum.intersectsObject( object ) === true) ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvar webglObject = webglObjects[ i ];\r\n\r\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( webglObject );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tprojectObject( scene, object.children[ i ], shadowCamera );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createVirtualLight( light, cascade ) {\r\n\r\n\t\tvar virtualLight = new THREE.DirectionalLight();\r\n\r\n\t\tvirtualLight.isVirtual = true;\r\n\r\n\t\tvirtualLight.onlyShadow = true;\r\n\t\tvirtualLight.castShadow = true;\r\n\r\n\t\tvirtualLight.shadowCameraNear = light.shadowCameraNear;\r\n\t\tvirtualLight.shadowCameraFar = light.shadowCameraFar;\r\n\r\n\t\tvirtualLight.shadowCameraLeft = light.shadowCameraLeft;\r\n\t\tvirtualLight.shadowCameraRight = light.shadowCameraRight;\r\n\t\tvirtualLight.shadowCameraBottom = light.shadowCameraBottom;\r\n\t\tvirtualLight.shadowCameraTop = light.shadowCameraTop;\r\n\r\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\r\n\r\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\r\n\r\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\r\n\t\tvirtualLight.shadowMapWidth = light.shadowCascadeWidth[ cascade ];\r\n\t\tvirtualLight.shadowMapHeight = light.shadowCascadeHeight[ cascade ];\r\n\r\n\t\tvirtualLight.pointsWorld = [];\r\n\t\tvirtualLight.pointsFrustum = [];\r\n\r\n\t\tvar pointsWorld = virtualLight.pointsWorld,\r\n\t\t\tpointsFrustum = virtualLight.pointsFrustum;\r\n\r\n\t\tfor ( var i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tpointsWorld[ i ] = new THREE.Vector3();\r\n\t\t\tpointsFrustum[ i ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\r\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\r\n\r\n\t\tpointsFrustum[ 0 ].set( - 1, - 1, nearZ );\r\n\t\tpointsFrustum[ 1 ].set(  1, - 1, nearZ );\r\n\t\tpointsFrustum[ 2 ].set( - 1,  1, nearZ );\r\n\t\tpointsFrustum[ 3 ].set(  1,  1, nearZ );\r\n\r\n\t\tpointsFrustum[ 4 ].set( - 1, - 1, farZ );\r\n\t\tpointsFrustum[ 5 ].set(  1, - 1, farZ );\r\n\t\tpointsFrustum[ 6 ].set( - 1,  1, farZ );\r\n\t\tpointsFrustum[ 7 ].set(  1,  1, farZ );\r\n\r\n\t\treturn virtualLight;\r\n\r\n\t}\r\n\r\n\t// Synchronize virtual light with the original light\r\n\r\n\tfunction updateVirtualLight( light, cascade ) {\r\n\r\n\t\tvar virtualLight = light.shadowCascadeArray[ cascade ];\r\n\r\n\t\tvirtualLight.position.copy( light.position );\r\n\t\tvirtualLight.target.position.copy( light.target.position );\r\n\t\tvirtualLight.lookAt( virtualLight.target );\r\n\r\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\r\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\r\n\r\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\r\n\r\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\r\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\r\n\r\n\t\tvar pointsFrustum = virtualLight.pointsFrustum;\r\n\r\n\t\tpointsFrustum[ 0 ].z = nearZ;\r\n\t\tpointsFrustum[ 1 ].z = nearZ;\r\n\t\tpointsFrustum[ 2 ].z = nearZ;\r\n\t\tpointsFrustum[ 3 ].z = nearZ;\r\n\r\n\t\tpointsFrustum[ 4 ].z = farZ;\r\n\t\tpointsFrustum[ 5 ].z = farZ;\r\n\t\tpointsFrustum[ 6 ].z = farZ;\r\n\t\tpointsFrustum[ 7 ].z = farZ;\r\n\r\n\t}\r\n\r\n\t// Fit shadow camera's ortho frustum to camera frustum\r\n\r\n\tfunction updateShadowCamera( camera, light ) {\r\n\r\n\t\tvar shadowCamera = light.shadowCamera,\r\n\t\t\tpointsFrustum = light.pointsFrustum,\r\n\t\t\tpointsWorld = light.pointsWorld;\r\n\r\n\t\t_min.set( Infinity, Infinity, Infinity );\r\n\t\t_max.set( - Infinity, - Infinity, - Infinity );\r\n\r\n\t\tfor ( var i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tvar p = pointsWorld[ i ];\r\n\r\n\t\t\tp.copy( pointsFrustum[ i ] );\r\n\t\t\tp.unproject( camera );\r\n\r\n\t\t\tp.applyMatrix4( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\tif ( p.x < _min.x ) _min.x = p.x;\r\n\t\t\tif ( p.x > _max.x ) _max.x = p.x;\r\n\r\n\t\t\tif ( p.y < _min.y ) _min.y = p.y;\r\n\t\t\tif ( p.y > _max.y ) _max.y = p.y;\r\n\r\n\t\t\tif ( p.z < _min.z ) _min.z = p.z;\r\n\t\t\tif ( p.z > _max.z ) _max.z = p.z;\r\n\r\n\t\t}\r\n\r\n\t\tshadowCamera.left = _min.x;\r\n\t\tshadowCamera.right = _max.x;\r\n\t\tshadowCamera.top = _max.y;\r\n\t\tshadowCamera.bottom = _min.y;\r\n\r\n\t\t// can't really fit near/far\r\n\t\t//shadowCamera.near = _min.z;\r\n\t\t//shadowCamera.far = _max.z;\r\n\r\n\t\tshadowCamera.updateProjectionMatrix();\r\n\r\n\t}\r\n\r\n\t// For the moment just ignore objects that have multiple materials with different animation methods\r\n\t// Only the first material will be taken into account for deciding which depth material to use for shadow maps\r\n\r\n\tfunction getObjectMaterial( object ) {\r\n\r\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\r\n\t\t\t? object.material.materials[ 0 ]\r\n\t\t\t: object.material;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\t\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t};\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tgl.enableVertexAttribArray( attributes.position );\r\n\t\tgl.enableVertexAttribArray( attributes.uv );\r\n\r\n\t\tgl.disable( gl.CULL_FACE );\r\n\t\tgl.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tgl.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\r\n\t\t\tif ( sprite.renderDepth === null ) {\r\n\r\n\t\t\t\tsprite.z = - sprite._modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsprite.z = sprite.renderDepth;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite._modelViewMatrix.elements );\r\n\r\n\t\t\tscale[ 0 ] = sprite.scale.x;\r\n\t\t\tscale[ 1 ] = sprite.scale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\trenderer.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\trenderer.setDepthTest( material.depthTest );\r\n\t\t\trenderer.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\r\n\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tgl.enable( gl.CULL_FACE );\r\n\t\t\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/extras/GeometryUtils.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ImageUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Daosheng Mu / https://github.com/DaoshengMu/\r\n */\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.Texture( undefined, mapping );\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t}, undefined, function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t} );\r\n\r\n\t\ttexture.sourceFile = url;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.CubeTexture( images, mapping );\r\n\r\n\t\t// no flipping needed for cube textures\r\n\r\n\t\ttexture.flipY = false;\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\tloader.load( array[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tgetNormalMap: function ( image, depth ) {\r\n\r\n\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\r\n\r\n\t\tvar cross = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\r\n\r\n\t\t}\r\n\r\n\t\tvar subtract = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\r\n\r\n\t\t}\r\n\r\n\t\tvar normalize = function ( a ) {\r\n\r\n\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\r\n\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\r\n\r\n\t\t}\r\n\r\n\t\tdepth = depth | 1;\r\n\r\n\t\tvar width = image.width;\r\n\t\tvar height = image.height;\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = height;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.drawImage( image, 0, 0 );\r\n\r\n\t\tvar data = context.getImageData( 0, 0, width, height ).data;\r\n\t\tvar imageData = context.createImageData( width, height );\r\n\t\tvar output = imageData.data;\r\n\r\n\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\r\n\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\r\n\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\r\n\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\r\n\r\n\t\t\t\tvar points = [];\r\n\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\r\n\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [  1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\r\n\r\n\t\t\t\tvar normals = [];\r\n\t\t\t\tvar num_points = points.length;\r\n\r\n\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\r\n\r\n\t\t\t\t\tvar v1 = points[ i ];\r\n\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\r\n\t\t\t\t\tv1 = subtract( v1, origin );\r\n\t\t\t\t\tv2 = subtract( v2, origin );\r\n\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar normal = [ 0, 0, 0 ];\r\n\r\n\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\r\n\r\n\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\r\n\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\r\n\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormal[ 0 ] /= normals.length;\r\n\t\t\t\tnormal[ 1 ] /= normals.length;\r\n\t\t\t\tnormal[ 2 ] /= normals.length;\r\n\r\n\t\t\t\tvar idx = ( y * width + x ) * 4;\r\n\r\n\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 3 ] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcontext.putImageData( imageData, 0, 0 );\r\n\r\n\t\treturn canvas;\r\n\r\n\t},\r\n\r\n\tgenerateDataTexture: function ( width, height, color ) {\r\n\r\n\t\tvar size = width * height;\r\n\t\tvar data = new Uint8Array( 3 * size );\r\n\r\n\t\tvar r = Math.floor( color.r * 255 );\r\n\t\tvar g = Math.floor( color.g * 255 );\r\n\t\tvar b = Math.floor( color.b * 255 );\r\n\r\n\t\tfor ( var i = 0; i < size; i ++ ) {\r\n\r\n\t\t\tdata[ i * 3 ] \t   = r;\r\n\t\t\tdata[ i * 3 + 1 ] = g;\r\n\t\t\tdata[ i * 3 + 2 ] = b;\r\n\r\n\t\t}\r\n\r\n\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Object3D();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/FontUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For Text operations in three.js (See TextGeometry)\r\n *\r\n * It uses techniques used in:\r\n *\r\n * \ttypeface.js and canvastext\r\n * \t\tFor converting fonts and rendering with javascript\r\n *\t\thttp://typeface.neocracy.org\r\n *\r\n *\tTriangulation ported from AS3\r\n *\t\tSimple Polygon Triangulation\r\n *\t\thttp://actionsnippet.com/?p=1462\r\n *\r\n * \tA Method to triangulate shapes with holes\r\n *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\r\n *\r\n */\r\n\r\nTHREE.FontUtils = {\r\n\r\n\tfaces: {},\r\n\r\n\t// Just for now. face[weight][style]\r\n\r\n\tface: 'helvetiker',\r\n\tweight: 'normal',\r\n\tstyle: 'normal',\r\n\tsize: 150,\r\n\tdivisions: 10,\r\n\r\n\tgetFace: function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\treturn this.faces[ this.face ][ this.weight ][ this.style ];\r\n\r\n\t\t} catch (e) {\r\n\r\n\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tloadFace: function ( data ) {\r\n\r\n\t\tvar family = data.familyName.toLowerCase();\r\n\r\n\t\tvar ThreeFont = this;\r\n\r\n\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\r\n\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\tvar face = ThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tdrawText: function ( text ) {\r\n\r\n\t\tvar characterPts = [], allPts = [];\r\n\r\n\t\t// RenderText\r\n\r\n\t\tvar i, p,\r\n\t\t\tface = this.getFace(),\r\n\t\t\tscale = this.size / face.resolution,\r\n\t\t\toffset = 0,\r\n\t\t\tchars = String( text ).split( '' ),\r\n\t\t\tlength = chars.length;\r\n\r\n\t\tvar fontPaths = [];\r\n\r\n\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\r\n\t\t\toffset += ret.offset;\r\n\r\n\t\t\tfontPaths.push( ret.path );\r\n\r\n\t\t}\r\n\r\n\t\t// get the width\r\n\r\n\t\tvar width = offset / 2;\r\n\t\t//\r\n\t\t// for ( p = 0; p < allPts.length; p++ ) {\r\n\t\t//\r\n\t\t// \tallPts[ p ].x -= width;\r\n\t\t//\r\n\t\t// }\r\n\r\n\t\t//var extract = this.extractPoints( allPts, characterPts );\r\n\t\t//extract.contour = allPts;\r\n\r\n\t\t//extract.paths = fontPaths;\r\n\t\t//extract.offset = width;\r\n\r\n\t\treturn { paths: fontPaths, offset: width };\r\n\r\n\t},\r\n\r\n\r\n\r\n\r\n\textractGlyphPoints: function ( c, face, scale, offset, path ) {\r\n\r\n\t\tvar pts = [];\r\n\r\n\t\tvar i, i2, divisions,\r\n\t\t\toutline, action, length,\r\n\t\t\tscaleX, scaleY,\r\n\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\r\n\t\t\tlaste,\r\n\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\r\n\r\n\t\tif ( ! glyph ) return;\r\n\r\n\t\tif ( glyph.o ) {\r\n\r\n\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\t\t\tlength = outline.length;\r\n\r\n\t\t\tscaleX = scale;\r\n\t\t\tscaleY = scale;\r\n\r\n\t\t\tfor ( i = 0; i < length; ) {\r\n\r\n\t\t\t\taction = outline[ i ++ ];\r\n\r\n\t\t\t\t//console.log( action );\r\n\r\n\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase 'm':\r\n\r\n\t\t\t\t\t// Move To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.moveTo( x, y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'l':\r\n\r\n\t\t\t\t\t// Line To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tpath.lineTo( x,y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'q':\r\n\r\n\t\t\t\t\t// QuadraticCurveTo\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\t\t\t\t\t  }\r\n\r\n\t\t\t\t  }\r\n\r\n\t\t\t\t  break;\r\n\r\n\t\t\t\tcase 'b':\r\n\r\n\t\t\t\t\t// Cubic Bezier Curve\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\r\n\r\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn { offset: glyph.ha * scale, path:path };\r\n\t}\r\n\r\n};\r\n\r\n\r\nTHREE.FontUtils.generateShapes = function ( text, parameters ) {\r\n\r\n\t// Parameters \r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar size = parameters.size !== undefined ? parameters.size : 100;\r\n\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\r\n\r\n\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\r\n\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\r\n\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\r\n\r\n\tTHREE.FontUtils.size = size;\r\n\tTHREE.FontUtils.divisions = curveSegments;\r\n\r\n\tTHREE.FontUtils.face = font;\r\n\tTHREE.FontUtils.weight = weight;\r\n\tTHREE.FontUtils.style = style;\r\n\r\n\t// Get a Font data json object\r\n\r\n\tvar data = THREE.FontUtils.drawText( text );\r\n\r\n\tvar paths = data.paths;\r\n\tvar shapes = [];\r\n\r\n\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t}\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n\r\n/**\r\n * This code is a quick port of code written in C++ which was submitted to\r\n * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n * See original code and more information here:\r\n * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n *\r\n * ported to actionscript by Zevan Rosser\r\n * www.actionsnippet.com\r\n *\r\n * ported to javascript by Joshua Koo\r\n * http://www.lab4games.net/zz85/blog\r\n *\r\n */\r\n\r\n\r\n( function ( namespace ) {\r\n\r\n\tvar EPSILON = 0.0000000001;\r\n\r\n\t// takes in an contour array and returns\r\n\r\n\tvar process = function ( contour, indices ) {\r\n\r\n\t\tvar n = contour.length;\r\n\r\n\t\tif ( n < 3 ) return null;\r\n\r\n\t\tvar result = [],\r\n\t\t\tverts = [],\r\n\t\t\tvertIndices = [];\r\n\r\n\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\tvar u, v, w;\r\n\r\n\t\tif ( area( contour ) > 0.0 ) {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t}\r\n\r\n\t\tvar nv = n;\r\n\r\n\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t//return null;\r\n\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\tconsole.log( 'Warning, unable to triangulate polygon!' );\r\n\r\n\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\treturn result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\ta = verts[ u ];\r\n\t\t\t\tb = verts[ v ];\r\n\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\tfor ( s = v, t = v + 1; t < nv; s++, t++ ) {\r\n\r\n\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnv --;\r\n\r\n\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices ) return vertIndices;\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tvar area = function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t};\r\n\r\n\tvar snip = function ( contour, u, v, w, n, verts ) {\r\n\r\n\t\tvar p;\r\n\t\tvar ax, ay, bx, by;\r\n\t\tvar cx, cy, px, py;\r\n\r\n\t\tax = contour[ verts[ u ] ].x;\r\n\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\tbx = contour[ verts[ v ] ].x;\r\n\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\tcx = contour[ verts[ w ] ].x;\r\n\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\taX = cx - bx;  aY = cy - by;\r\n\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\tpx = contour[ verts[ p ] ].x\r\n\t\t\tpy = contour[ verts[ p ] ].y\r\n\r\n\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n\r\n\tnamespace.Triangulate = process;\r\n\tnamespace.Triangulate.area = area;\r\n\r\n\treturn namespace;\r\n\r\n} )( THREE.FontUtils );\r\n\r\n// To use the typeface.js face files, hook up the API\r\nself._typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\r\nTHREE.typeface_js = self._typeface_js;\r\n\r\n// File:src/extras/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Audio.prototype.load = function ( file ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar request = new XMLHttpRequest();\r\n\trequest.open( 'GET', file, true );\r\n\trequest.responseType = 'arraybuffer';\r\n\trequest.onload = function ( e ) {\r\n\r\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\r\n\t\t\tscope.source.buffer = buffer;\r\n\t\t\tscope.source.connect( scope.panner );\r\n\t\t\tscope.source.start( 0 );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\trequest.send();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\r\n\tthis.source.loop = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRefDistance = function ( value ) {\r\n\r\n\tthis.panner.refDistance = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\r\n\r\n\tthis.panner.rolloffFactor = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\r\n\treturn function ( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3();\r\n\r\n\tvar orientation = new THREE.Vector3();\r\n\tvar velocity = new THREE.Vector3();\r\n\r\n\tvar positionPrev = new THREE.Vector3();\r\n\r\n\treturn function ( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tvar listener = this.context.listener;\r\n\r\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\torientation.set( 0, 0, -1 ).applyQuaternion( quaternion );\r\n\t\tvelocity.subVectors( position, positionPrev );\r\n\r\n\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, this.up.x, this.up.y, this.up.z );\r\n\t\tlistener.setVelocity( velocity.x, velocity.y, velocity.z );\r\n\r\n\t\tpositionPrev.copy( position );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n * THREE.ClosedSplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\n// Virtual base class method to overwrite and implement in subclasses\r\n//\t- t [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPoint = function ( t ) {\r\n\r\n\tconsole.log( \"Warning, getPoint() not implemented!\" );\r\n\treturn null;\r\n\r\n};\r\n\r\n// Get point at relative position in curve according to arc length\r\n// - u [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPointAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getPoint( t );\r\n\r\n};\r\n\r\n// Get sequence of points using getPoint( t )\r\n\r\nTHREE.Curve.prototype.getPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get sequence of points using getPointAt( u )\r\n\r\nTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get total curve arc length\r\n\r\nTHREE.Curve.prototype.getLength = function () {\r\n\r\n\tvar lengths = this.getLengths();\r\n\treturn lengths[ lengths.length - 1 ];\r\n\r\n};\r\n\r\n// Get list of cumulative segment lengths\r\n\r\nTHREE.Curve.prototype.getLengths = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = (this.__arcLengthDivisions) ? (this.__arcLengthDivisions): 200;\r\n\r\n\tif ( this.cacheArcLengths\r\n\t\t&& ( this.cacheArcLengths.length == divisions + 1 )\r\n\t\t&& ! this.needsUpdate) {\r\n\r\n\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\treturn this.cacheArcLengths;\r\n\r\n\t}\r\n\r\n\tthis.needsUpdate = false;\r\n\r\n\tvar cache = [];\r\n\tvar current, last = this.getPoint( 0 );\r\n\tvar p, sum = 0;\r\n\r\n\tcache.push( 0 );\r\n\r\n\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\tsum += current.distanceTo( last );\r\n\t\tcache.push( sum );\r\n\t\tlast = current;\r\n\r\n\t}\r\n\r\n\tthis.cacheArcLengths = cache;\r\n\r\n\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.updateArcLengths = function() {\r\n\tthis.needsUpdate = true;\r\n\tthis.getLengths();\r\n};\r\n\r\n// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equi distance\r\n\r\nTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\r\n\r\n\tvar arcLengths = this.getLengths();\r\n\r\n\tvar i = 0, il = arcLengths.length;\r\n\r\n\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\tif ( distance ) {\r\n\r\n\t\ttargetArcLength = distance;\r\n\r\n\t} else {\r\n\r\n\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t}\r\n\r\n\t//var time = Date.now();\r\n\r\n\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\tvar low = 0, high = il - 1, comparison;\r\n\r\n\twhile ( low <= high ) {\r\n\r\n\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\r\n\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\thigh = i - 1;\r\n\t\t\tcontinue;\r\n\r\n\t\t} else {\r\n\r\n\t\t\thigh = i;\r\n\t\t\tbreak;\r\n\r\n\t\t\t// DONE\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ti = high;\r\n\r\n\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\tif ( arcLengths[ i ] == targetArcLength ) {\r\n\r\n\t\tvar t = i / ( il - 1 );\r\n\t\treturn t;\r\n\r\n\t}\r\n\r\n\t// we could get finer grain at lengths, or use simple interpolatation between two points\r\n\r\n\tvar lengthBefore = arcLengths[ i ];\r\n    var lengthAfter = arcLengths[ i + 1 ];\r\n\r\n    var segmentLength = lengthAfter - lengthBefore;\r\n\r\n    // determine where we are between the 'before' and 'after' points\r\n\r\n    var segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n    // add that fractional amount to t\r\n\r\n    var t = ( i + segmentFraction ) / ( il -1 );\r\n\r\n\treturn t;\r\n\r\n};\r\n\r\n// Returns a unit vector tangent at t\r\n// In case any sub curve does not implement its tangent derivation,\r\n// 2 points a small delta apart will be used to find its gradient\r\n// which seems to give a reasonable approximation\r\n\r\nTHREE.Curve.prototype.getTangent = function( t ) {\r\n\r\n\tvar delta = 0.0001;\r\n\tvar t1 = t - delta;\r\n\tvar t2 = t + delta;\r\n\r\n\t// Capping in case of danger\r\n\r\n\tif ( t1 < 0 ) t1 = 0;\r\n\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\tvar pt1 = this.getPoint( t1 );\r\n\tvar pt2 = this.getPoint( t2 );\r\n\r\n\tvar vec = pt2.clone().sub(pt1);\r\n\treturn vec.normalize();\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.getTangentAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getTangent( t );\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Curve.Utils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function (t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * (1 - t) * (1 - t)  +\r\n\t\t\t3 * p1 * (1 - t) * (1-t) - 6 *t *p1 * (1-t) +\r\n\t\t\t6 * t *  p2 * (1-t) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3 − 3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3 − 2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t// − 2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3 − t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\tthis.bends = [];\r\n\t\r\n\tthis.autoClose = false; // Automatically closes the path\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\n\r\nTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\r\n\tthis.curves.push( curve );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t// TODO\r\n\t// If the ending of curve is not connected to the starting\r\n\t// or the next curve, then, this is not a real path\r\n};\r\n\r\nTHREE.CurvePath.prototype.closePath = function() {\r\n\t// TODO Test\r\n\t// and verify for vector3 (needs to implement equals)\r\n\t// Add a line curve if start and end of lines are not connected\r\n\tvar startPoint = this.curves[0].getPoint(0);\r\n\tvar endPoint = this.curves[this.curves.length-1].getPoint(1);\r\n\t\r\n\tif (! startPoint.equals(endPoint)) {\r\n\t\tthis.curves.push( new THREE.LineCurve(endPoint, startPoint) );\r\n\t}\r\n\t\r\n};\r\n\r\n// To get accurate point with reference to\r\n// entire path distance at time t,\r\n// following has to be done:\r\n\r\n// 1. Length of each sub path have to be known\r\n// 2. Locate and identify type of curve\r\n// 3. Get t for the curve\r\n// 4. Return curve.getPointAt(t')\r\n\r\nTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\r\n\tvar d = t * this.getLength();\r\n\tvar curveLengths = this.getCurveLengths();\r\n\tvar i = 0, diff, curve;\r\n\r\n\t// To think about boundaries points.\r\n\r\n\twhile ( i < curveLengths.length ) {\r\n\r\n\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\tdiff = curveLengths[ i ] - d;\r\n\t\t\tcurve = this.curves[ i ];\r\n\r\n\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\ti ++;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n};*/\r\n\r\n\r\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n// getPoint() depends on getLength\r\n\r\nTHREE.CurvePath.prototype.getLength = function() {\r\n\r\n\tvar lens = this.getCurveLengths();\r\n\treturn lens[ lens.length - 1 ];\r\n\r\n};\r\n\r\n// Compute lengths and cache them\r\n// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\nTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\r\n\t// We use cache values if curves and cache array are same length\r\n\r\n\tif ( this.cacheLengths && this.cacheLengths.length == this.curves.length ) {\r\n\r\n\t\treturn this.cacheLengths;\r\n\r\n\t};\r\n\r\n\t// Get length of subsurve\r\n\t// Push sums into cached array\r\n\r\n\tvar lengths = [], sums = 0;\r\n\tvar i, il = this.curves.length;\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tsums += this.curves[ i ].getLength();\r\n\t\tlengths.push( sums );\r\n\r\n\t}\r\n\r\n\tthis.cacheLengths = lengths;\r\n\r\n\treturn lengths;\r\n\r\n};\r\n\r\n\r\n\r\n// Returns min and max coordinates\r\n\r\nTHREE.CurvePath.prototype.getBoundingBox = function () {\r\n\r\n\tvar points = this.getPoints();\r\n\r\n\tvar maxX, maxY, maxZ;\r\n\tvar minX, minY, minZ;\r\n\r\n\tmaxX = maxY = Number.NEGATIVE_INFINITY;\r\n\tminX = minY = Number.POSITIVE_INFINITY;\r\n\r\n\tvar p, i, il, sum;\r\n\r\n\tvar v3 = points[0] instanceof THREE.Vector3;\r\n\r\n\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\r\n\r\n\tfor ( i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\tp = points[ i ];\r\n\r\n\t\tif ( p.x > maxX ) maxX = p.x;\r\n\t\telse if ( p.x < minX ) minX = p.x;\r\n\r\n\t\tif ( p.y > maxY ) maxY = p.y;\r\n\t\telse if ( p.y < minY ) minY = p.y;\r\n\r\n\t\tif ( v3 ) {\r\n\r\n\t\t\tif ( p.z > maxZ ) maxZ = p.z;\r\n\t\t\telse if ( p.z < minZ ) minZ = p.z;\r\n\r\n\t\t}\r\n\r\n\t\tsum.add( p );\r\n\r\n\t}\r\n\r\n\tvar ret = {\r\n\r\n\t\tminX: minX,\r\n\t\tminY: minY,\r\n\t\tmaxX: maxX,\r\n\t\tmaxY: maxY\r\n\r\n\t};\r\n\r\n\tif ( v3 ) {\r\n\r\n\t\tret.maxZ = maxZ;\r\n\t\tret.minZ = minZ;\r\n\r\n\t}\r\n\r\n\treturn ret;\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tCreate Geometries Helpers\r\n **************************************************************/\r\n\r\n/// Generate geometry from path points (for Line or Points objects)\r\n\r\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\n// Generate geometry from equidistance sampling along the path\r\n\r\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getSpacedPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < points.length; i ++ ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0) );\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n\r\n/**************************************************************\r\n *\tBend / Wrap Helper Methods\r\n **************************************************************/\r\n\r\n// Wrap path / Bend modifiers?\r\n\r\nTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\r\n\r\n\tthis.bends.push( bendpath );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getSpacedPoints( segments );\r\n\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n// This returns getPoints() bend/wrapped around the contour of a path.\r\n// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\r\n\r\nTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\r\n\r\n\tvar bounds = this.getBoundingBox();\r\n\r\n\tvar i, il, p, oldX, oldY, xNorm;\r\n\r\n\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\r\n\r\n\t\tp = oldPts[ i ];\r\n\r\n\t\toldX = p.x;\r\n\t\toldY = p.y;\r\n\r\n\t\txNorm = oldX / bounds.maxX;\r\n\r\n\t\t// If using actual distance, for length > path, requires line extrusions\r\n\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\r\n\r\n\t\txNorm = path.getUtoTmapping( xNorm, oldX );\r\n\r\n\t\t// check for out of bounds?\r\n\r\n\t\tvar pathPt = path.getPoint( xNorm );\r\n\t\tvar normal = path.getTangent( xNorm );\r\n\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\r\n\r\n\t\tp.x = pathPt.x + normal.x;\r\n\t\tp.y = pathPt.y + normal.y;\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n\r\n// File:src/extras/core/Gyroscope.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Gyroscope = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n};\r\n\r\nTHREE.Gyroscope.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.Gyroscope.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar translationObject = new THREE.Vector3();\r\n\tvar quaternionObject = new THREE.Quaternion();\r\n\tvar scaleObject = new THREE.Vector3();\r\n\r\n\tvar translationWorld = new THREE.Vector3();\r\n\tvar quaternionWorld = new THREE.Quaternion();\r\n\tvar scaleWorld = new THREE.Vector3();\r\n\r\n\treturn function ( force ) {\r\n\r\n\t\tthis.matrixAutoUpdate && this.updateMatrix();\r\n\r\n\t\t// update matrixWorld\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\r\n\r\n\t\t\tif ( this.parent ) {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t\tthis.matrixWorld.decompose( translationWorld, quaternionWorld, scaleWorld );\r\n\t\t\t\tthis.matrix.decompose( translationObject, quaternionObject, scaleObject );\r\n\r\n\t\t\t\tthis.matrixWorld.compose( translationWorld, quaternionObject, scaleWorld );\r\n\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\t\r\n}() );\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call(this);\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\n\r\nTHREE.PathActions = {\r\n\r\n\tMOVE_TO: 'moveTo',\r\n\tLINE_TO: 'lineTo',\r\n\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\r\n\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\r\n\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-rom spline\r\n\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\r\n\tELLIPSE: 'ellipse'\r\n};\r\n\r\n// TODO Clean up PATH API\r\n\r\n// Create path using straight lines to connect all points\r\n// - vectors: array of Vector2\r\n\r\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\r\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\r\n\r\n\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\r\n\r\n\t};\r\n\r\n};\r\n\r\n// startPath() endPath()?\r\n\r\nTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n//---\r\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\tArray.prototype.push.apply( npts, pts );\r\n\r\n\tvar curve = new THREE.SplineCurve( npts );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\r\n\r\n};\r\n\r\n// FUTURE: Change the API or follow canvas API?\r\n\r\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absarc(aX + x0, aY + y0, aRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\tthis.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\r\n };\r\n\r\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absellipse(aX + x0, aY + y0, xRadius, yRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n\r\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\tthis.curves.push( curve );\r\n\r\n\tvar lastPoint = curve.getPoint(1);\r\n\targs.push(lastPoint.x);\r\n\targs.push(lastPoint.y);\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\r\n\r\n\tif ( ! divisions ) divisions = 40;\r\n\r\n\tvar points = [];\r\n\r\n\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t}\r\n\r\n\t// if ( closedPath ) {\r\n\t//\r\n\t// \tpoints.push( points[ 0 ] );\r\n\t//\r\n\t// }\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n/* Return an array of vectors based on contour of the path */\r\n\r\nTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\r\n\r\n\tif (this.useSpacedPoints) {\r\n\t\tconsole.log('tata');\r\n\t\treturn this.getSpacedPoints( divisions, closedPath );\r\n\t}\r\n\r\n\tdivisions = divisions || 12;\r\n\r\n\tvar points = [];\r\n\r\n\tvar i, il, item, action, args;\r\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\tlaste, j,\r\n\t\tt, tx, ty;\r\n\r\n\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\r\n\r\n\t\titem = this.actions[ i ];\r\n\r\n\t\taction = item.action;\r\n\t\targs = item.args;\r\n\r\n\t\tswitch( action ) {\r\n\r\n\t\tcase THREE.PathActions.MOVE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.LINE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 2 ];\r\n\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 4 ];\r\n\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tcpx2 = args[ 2 ];\r\n\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.CSPLINE_THRU:\r\n\r\n\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\tvar spts = [ last ];\r\n\r\n\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\tfor ( j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) ) ;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.ARC:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t  break;\r\n\t\t  \r\n\t\tcase THREE.PathActions.ELLIPSE:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\taClockwise = !! args[ 6 ];\r\n\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t  break;\r\n\r\n\t\t} // end switch\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// Normalize to remove the closing point by default.\r\n\tvar lastPoint = points[ points.length - 1];\r\n\tvar EPSILON = 0.0000000001;\r\n\tif ( Math.abs(lastPoint.x - points[ 0 ].x) < EPSILON &&\r\n\t\t\t Math.abs(lastPoint.y - points[ 0 ].y) < EPSILON)\r\n\t\tpoints.splice( points.length - 1, 1);\r\n\tif ( closedPath ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n//\r\n// Breaks path into shapes\r\n//\r\n//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n//\t- solid shapes are defined clockwise (CW)\r\n//\t- holes are defined counterclockwise (CCW)\r\n//\r\n//\tIf parameter noHoles==true:\r\n//  - all subPaths are regarded as solid shapes\r\n//  - definition order CW/CCW has no relevance\r\n//\r\n\r\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\r\n\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\tvar i, il, item, action, args;\r\n\r\n\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\r\n\r\n\t\t\titem = inActions[ i ];\r\n\r\n\t\t\targs = item.args;\r\n\t\t\taction = item.action;\r\n\r\n\t\t\tif ( action == THREE.PathActions.MOVE_TO ) {\r\n\r\n\t\t\t\tif ( lastPath.actions.length != 0 ) {\r\n\r\n\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t}\r\n\r\n\t\tif ( lastPath.actions.length != 0 ) {\r\n\r\n\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t}\r\n\r\n\t\t// console.log(subPaths);\r\n\r\n\t\treturn\tsubPaths;\r\n\t}\r\n\r\n\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\t};\r\n\r\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t// inPt on polygon contour => immediate success    or\r\n\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\tvar inside = false;\r\n\t\tfor( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\tif ( Math.abs(edgeDy) > EPSILON ) {\t\t\t// not parallel\r\n\t\t\t\tif ( edgeDy < 0 ) {\r\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\t\t\t\t}\r\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\tif ( inPt.y == edgeLowPt.y ) {\r\n\t\t\t\t\tif ( inPt.x == edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\r\n\t\t\t\t\tif ( perpEdge == 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\t\t\t\t}\r\n\t\t\t} else {\t\t// parallel or colinear\r\n\t\t\t\tif ( inPt.y != edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t// egde lies on the same horizontal line as inPt\r\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t// continue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn\tinside;\r\n\t}\r\n\r\n\r\n\tvar subPaths = extractSubpaths( this.actions );\r\n\tif ( subPaths.length == 0 ) return [];\r\n\r\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\tif ( subPaths.length == 1) {\r\n\r\n\t\ttmpPath = subPaths[0];\r\n\t\ttmpShape = new THREE.Shape();\r\n\t\ttmpShape.actions = tmpPath.actions;\r\n\t\ttmpShape.curves = tmpPath.curves;\r\n\t\tshapes.push( tmpShape );\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\r\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t// console.log(\"Holes first\", holesFirst);\r\n\t\r\n\tvar betterShapeHoles = [];\r\n\tvar newShapes = [];\r\n\tvar newShapeHoles = [];\r\n\tvar mainIdx = 0;\r\n\tvar tmpPoints;\r\n\r\n\tnewShapes[mainIdx] = undefined;\r\n\tnewShapeHoles[mainIdx] = [];\r\n\r\n\tvar i, il;\r\n\r\n\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\r\n\r\n\t\ttmpPath = subPaths[ i ];\r\n\t\ttmpPoints = tmpPath.getPoints();\r\n\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\r\n\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\tif ( solid ) {\r\n\r\n\t\t\tif ( (! holesFirst ) && ( newShapes[mainIdx] ) )\tmainIdx ++;\r\n\r\n\t\t\tnewShapes[mainIdx] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\tnewShapes[mainIdx].s.actions = tmpPath.actions;\r\n\t\t\tnewShapes[mainIdx].s.curves = tmpPath.curves;\r\n\t\t\t\r\n\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\tnewShapeHoles[mainIdx] = [];\r\n\r\n\t\t\t//console.log('cw', i);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewShapeHoles[mainIdx].push( { h: tmpPath, p: tmpPoints[0] } );\r\n\r\n\t\t\t//console.log('ccw', i);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// only Holes? -> probably all Shapes with wrong orientation\r\n\tif ( ! newShapes[0] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tif ( newShapes.length > 1 ) {\r\n\t\tvar ambigious = false;\r\n\t\tvar toChange = [];\r\n\r\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\t\tbetterShapeHoles[sIdx] = [];\r\n\t\t}\r\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\t\tvar sh = newShapes[sIdx];\r\n\t\t\tvar sho = newShapeHoles[sIdx];\r\n\t\t\tfor (var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\t\t\t\tvar ho = sho[hIdx];\r\n\t\t\t\tvar hole_unassigned = true;\r\n\t\t\t\tfor (var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[s2Idx].p ) ) {\r\n\t\t\t\t\t\tif ( sIdx != s2Idx )\t\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\tbetterShapeHoles[s2Idx].push( ho );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tambigious = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ( hole_unassigned ) { betterShapeHoles[sIdx].push( ho ); }\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log(\"ambigious: \", ambigious);\r\n\t\tif ( toChange.length > 0 ) {\r\n\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\tif (! ambigious)\tnewShapeHoles = betterShapeHoles;\r\n\t\t}\r\n\t}\r\n\r\n\tvar tmpHoles, j, jl;\r\n\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\t\ttmpShape = newShapes[i].s;\r\n\t\tshapes.push( tmpShape );\r\n\t\ttmpHoles = newShapeHoles[i];\r\n\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\t\t\ttmpShape.holes.push( tmpHoles[j].h );\r\n\t\t}\r\n\t}\r\n\r\n\t//console.log(\"shape\", shapes);\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\n\r\n// Convenience method to return ExtrudeGeometry\r\n\r\nTHREE.Shape.prototype.extrude = function ( options ) {\r\n\r\n\tvar extruded = new THREE.ExtrudeGeometry( this, options );\r\n\treturn extruded;\r\n\r\n};\r\n\r\n// Convenience method to return ShapeGeometry\r\n\r\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\r\n\tvar geometry = new THREE.ShapeGeometry( this, options );\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// Get points of holes\r\n\r\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n// Get points of holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n\r\n// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedPoints( divisions ),\r\n\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\r\n\tif (this.useSpacedPoints) {\r\n\t\treturn this.extractAllSpacedPoints(divisions);\r\n\t}\r\n\r\n\treturn this.extractAllPoints(divisions);\r\n\r\n};\r\n\r\n//\r\n// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\r\n//\r\n// \treturn {\r\n//\r\n// \t\tshape: this.transform( bend, divisions ),\r\n// \t\tholes: this.getPointsHoles( divisions, bend )\r\n//\r\n// \t};\r\n//\r\n// };\r\n\r\n// Get points of shape and holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedSpacedPoints( divisions ),\r\n\t\tholes: this.getSpacedPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Shape.Utils = {\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\t\t\t// inOtherPt needs to be colinear to the inSegment\r\n\t\t\tif ( inSegPt1.x != inSegPt2.x ) {\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs(limit) > EPSILON ) {\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 == 0 ) {\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 == limit ) {\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn  [ inSeg1Pt2 ];\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 == 0 )\t\treturn  [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 == limit )\treturn  [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\t\t// parallel or colinear\r\n\t\t\t\tif ( ( perpSeg1 != 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx != seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( (seg1dx == 0) && (seg1dy == 0) );\t// segment1 ist just a point?\r\n\t\t\t\tvar seg2Pt = ( (seg2dx == 0) && (seg2dy == 0) );\t// segment2 ist just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\t\t\t\t\tif ( (inSeg1Pt1.x != inSeg2Pt1.x) ||\r\n\t\t\t\t\t\t (inSeg1Pt1.y != inSeg2Pt1.y) )\t\treturn [];   \t// they are distinct  points\r\n\t\t\t\t\treturn  [ inSeg1Pt1 ];                 \t\t\t\t\t// they are the same point\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn  [ inSeg2Pt1 ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif (seg1dx != 0) {\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal == seg2minVal )\t{\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal == seg2maxVal )\t{\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs(from2toAngle) > EPSILON ) {\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\t\t\t\t} else {\t\t\t\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\t\t\t\t}\r\n\t\t\t} else {\t\t\t\t\t\t\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[inShapeIdx], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[inHoleIdx] );\r\n\t\t\t\tif (! insideAngle ) {\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[inHoleIdx], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[inShapeIdx] );\r\n\t\t\t\tif (! insideAngle ) {\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\t\t\t\t\tnextIdx = sIdx+1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[sIdx], shape[nextIdx], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\t\t\t\t\tchkHole = holes[indepHoles[ihIdx]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\t\t\t\t\t\tnextIdx = hIdx+1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[hIdx], chkHole[nextIdx], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\t\t\t\t\t\tholeIdx = indepHoles[h];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[cutKey] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[holeIdx];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif (! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice(h,1);\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex+1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex+1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[cutKey] = true;\t\t\t// remember failure\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[h] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.log( \"Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * p;\r\n\r\n\t},\r\n\r\n\tb2p1: function ( t, p ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t},\r\n\r\n\tb2p2: function ( t, p ) {\r\n\r\n\t\treturn t * t * p;\r\n\r\n\t},\r\n\r\n\tb2: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\r\n\r\n\t},\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * k * p;\r\n\r\n\t},\r\n\r\n\tb3p1: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * k * t * p;\r\n\r\n\t},\r\n\r\n\tb3p2: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3p3: function ( t, p ) {\r\n\r\n\t\treturn t * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub(this.v1);\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub(this.v1);\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\t// returns unit vector\r\n\r\n\treturn vector.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\treturn new THREE.Vector2( tx, ty );\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\tvar tangent = new THREE.Vector2( tx, ty );\r\n\ttangent.normalize();\r\n\r\n\treturn tangent;\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ]\r\n\tvar point1 = points[ intPoint ]\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length -1 : intPoint + 1 ]\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length -1 : intPoint + 2 ]\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvector.y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */) {\r\n\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */) {\r\n\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\r\n\t\tvar point1 = points[ ( intPoint     ) % points.length ];\r\n\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\r\n\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/animation/AnimationHandler.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\nTHREE.AnimationHandler = {\r\n\r\n\tLINEAR: 0,\r\n\tCATMULLROM: 1,\r\n\tCATMULLROM_FORWARD: 2,\r\n\r\n\t//\r\n\r\n\tadd: function () { console.warn( 'THREE.AnimationHandler.add() has been deprecated.' ); },\r\n\tget: function () { console.warn( 'THREE.AnimationHandler.get() has been deprecated.' ); },\r\n\tremove: function () { console.warn( 'THREE.AnimationHandler.remove() has been deprecated.' ); },\r\n\r\n\t//\r\n\r\n\tanimations: [],\r\n\r\n\tinit: function ( data ) {\r\n\r\n\t\tif ( data.initialized === true ) return;\r\n\r\n\t\t// loop through all keys\r\n\r\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t// remove minus times\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\r\n\r\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create quaternions\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\r\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\r\n\r\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// prepare morph target keys\r\n\r\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\r\n\r\n\t\t\t\t// get all used\r\n\r\n\t\t\t\tvar usedMorphTargets = {};\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\r\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\r\n\r\n\r\n\t\t\t\t// set all used on all frames\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tvar influences = {};\r\n\r\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\r\n\r\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\r\n\r\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// remove all keys that are on the same time\r\n\r\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\r\n\t\t\t\t\tk --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// set index\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdata.initialized = true;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tparse: function ( root ) {\r\n\r\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\r\n\r\n\t\t\thierarchy.push( root );\r\n\r\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\r\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\r\n\r\n\t\t};\r\n\r\n\t\t// setup hierarchy\r\n\r\n\t\tvar hierarchy = [];\r\n\r\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\r\n\r\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tparseRecurseHierarchy( root, hierarchy );\r\n\r\n\t\t}\r\n\r\n\t\treturn hierarchy;\r\n\r\n\t},\r\n\r\n\tplay: function ( animation ) {\r\n\r\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\r\n\r\n\t\t\tthis.animations.push( animation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstop: function ( animation ) {\r\n\r\n\t\tvar index = this.animations.indexOf( animation );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tthis.animations.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( deltaTimeMS ) {\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].resetBlendWeights( );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/Animation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Animation = function ( root, data ) {\r\n\r\n\tthis.root = root;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\r\n\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 1;\r\n\r\n\tthis.isPlaying = false;\r\n\tthis.loop = true;\r\n\tthis.weight = 0;\r\n\r\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\r\n\r\n};\r\n\r\n\r\nTHREE.Animation.prototype.keyTypes = [ \"pos\", \"rot\", \"scl\" ];\r\n\r\n\r\nTHREE.Animation.prototype.play = function ( startTime, weight ) {\r\n\r\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\tthis.weight = weight !== undefined ? weight: 1;\r\n\r\n\tthis.isPlaying = true;\r\n\r\n\tthis.reset();\r\n\r\n\tTHREE.AnimationHandler.play( this );\r\n\r\n};\r\n\r\n\r\nTHREE.Animation.prototype.stop = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\r\n\tTHREE.AnimationHandler.stop( this );\r\n\r\n};\r\n\r\nTHREE.Animation.prototype.reset = function () {\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar object = this.hierarchy[ h ];\r\n\r\n\t\tobject.matrixAutoUpdate = true;\r\n\r\n\t\tif ( object.animationCache === undefined ) {\r\n\r\n\t\t\tobject.animationCache = {\r\n\t\t\t\tanimations: {},\r\n\t\t\t\tblending: {\r\n\t\t\t\t\tpositionWeight: 0.0,\r\n\t\t\t\t\tquaternionWeight: 0.0,\r\n\t\t\t\t\tscaleWeight: 0.0\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif ( object.animationCache.animations[this.data.name] === undefined ) {\r\n\r\n\t\t\tobject.animationCache.animations[this.data.name] = {};\r\n\t\t\tobject.animationCache.animations[this.data.name].prevKey = { pos: 0, rot: 0, scl: 0 };\r\n\t\t\tobject.animationCache.animations[this.data.name].nextKey = { pos: 0, rot: 0, scl: 0 };\r\n\t\t\tobject.animationCache.animations[this.data.name].originalMatrix = object.matrix;\r\n\r\n\t\t}\r\n\r\n\t\tvar animationCache = object.animationCache.animations[this.data.name];\r\n\r\n\t\t// Get keys to match our current time\r\n\r\n\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\tvar type = this.keyTypes[ t ];\r\n\r\n\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\tprevKey = nextKey;\r\n\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Animation.prototype.resetBlendWeights = function () {\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar object = this.hierarchy[ h ];\r\n\r\n\t\tif ( object.animationCache !== undefined ) {\r\n\r\n\t\t\tobject.animationCache.blending.positionWeight = 0.0;\r\n\t\t\tobject.animationCache.blending.quaternionWeight = 0.0;\r\n\t\t\tobject.animationCache.blending.scaleWeight = 0.0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Animation.prototype.update = (function(){\r\n\r\n\tvar points = [];\r\n\tvar target = new THREE.Vector3();\r\n\tvar newVector = new THREE.Vector3();\r\n\tvar newQuat = new THREE.Quaternion();\r\n\r\n\t// Catmull-Rom spline\r\n\r\n\tvar interpolateCatmullRom = function ( points, scale ) {\r\n\r\n\t\tvar c = [], v3 = [],\r\n\t\tpoint, intPoint, weight, w2, w3,\r\n\t\tpa, pb, pc, pd;\r\n\r\n\t\tpoint = ( points.length - 1 ) * scale;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\r\n\r\n\t\tpa = points[ c[ 0 ] ];\r\n\t\tpb = points[ c[ 1 ] ];\r\n\t\tpc = points[ c[ 2 ] ];\r\n\t\tpd = points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\r\n\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\r\n\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t};\r\n\r\n\treturn function ( delta ) {\r\n\r\n\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t\tif ( this.weight === 0 )\r\n\t\t\treturn;\r\n\r\n\t\t//\r\n\r\n\t\tvar duration = this.data.length;\r\n\r\n\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\r\n\r\n\t\t\tif ( this.loop ) {\r\n\r\n\t\t\t\tthis.currentTime %= duration;\r\n\r\n\t\t\t\tif ( this.currentTime < 0 )\r\n\t\t\t\t\tthis.currentTime += duration;\r\n\r\n\t\t\t\tthis.reset();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.stop();\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\tvar animationCache = object.animationCache.animations[this.data.name];\r\n\t\t\tvar blending = object.animationCache.blending;\r\n\r\n\t\t\t// loop through pos/rot/scl\r\n\r\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\t\t// get keys\r\n\r\n\t\t\t\tvar type    = this.keyTypes[ t ];\r\n\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\r\n\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\r\n\r\n\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\r\n\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\r\n\r\n\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.matrixAutoUpdate = true;\r\n\t\t\t\tobject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\r\n\r\n\t\t\t\tvar prevXYZ = prevKey[ type ];\r\n\t\t\t\tvar nextXYZ = nextKey[ type ];\r\n\r\n\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\r\n\t\t\t\t// interpolate\r\n\r\n\t\t\t\tif ( type === \"pos\" ) {\r\n\r\n\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\r\n\r\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\t\t// blend\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\r\n\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\r\n\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\r\n\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\r\n\r\n\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\r\n\r\n\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t// blend\r\n\r\n\t\t\t\t\t\tvar vector = object.position;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\r\n\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\r\n\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\r\n\r\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\r\n\r\n\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\r\n\t\t\t\t\t\t\ttarget.sub( vector );\r\n\t\t\t\t\t\t\ttarget.y = 0;\r\n\t\t\t\t\t\t\ttarget.normalize();\r\n\r\n\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\r\n\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( type === \"rot\" ) {\r\n\r\n\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\r\n\r\n\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\r\n\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\r\n\r\n\t\t\t\t\t\tobject.quaternion.copy(newQuat);\r\n\t\t\t\t\t\tblending.quaternionWeight = this.weight;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\r\n\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\r\n\t\t\t\t\t\tblending.quaternionWeight += this.weight;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( type === \"scl\" ) {\r\n\r\n\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\r\n\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\tblending.scaleWeight += this.weight;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n})();\r\n\r\n\r\n\r\n\r\n\r\n// Get next key with\r\n\r\nTHREE.Animation.prototype.getNextKeyWith = function ( type, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\r\n\r\n\t} else {\r\n\r\n\t\tkey = key % keys.length;\r\n\r\n\t}\r\n\r\n\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn this.data.hierarchy[ h ].keys[ 0 ];\r\n\r\n};\r\n\r\n// Get previous key with\r\n\r\nTHREE.Animation.prototype.getPrevKeyWith = function ( type, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\tkey = key > 0 ? key : 0;\r\n\r\n\t} else {\r\n\r\n\t\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\t}\r\n\r\n\r\n\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\r\n\r\n};\r\n\r\n// File:src/extras/animation/KeyFrameAnimation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author khang duong\r\n * @author erik kitson\r\n */\r\n\r\nTHREE.KeyFrameAnimation = function ( data ) {\r\n\r\n\tthis.root = data.node;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 0.001;\r\n\tthis.isPlaying = false;\r\n\tthis.isPaused = true;\r\n\tthis.loop = true;\r\n\r\n\t// initialize to first keyframes\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[h].keys,\r\n\t\t\tsids = this.data.hierarchy[h].sids,\r\n\t\t\tobj = this.hierarchy[h];\r\n\r\n\t\tif ( keys.length && sids ) {\r\n\r\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\r\n\r\n\t\t\t\tvar sid = sids[ s ],\r\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\r\n\r\n\t\t\t\tif ( next ) {\r\n\r\n\t\t\t\t\tnext.apply( sid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobj.matrixAutoUpdate = false;\r\n\t\t\tthis.data.hierarchy[h].node.updateMatrix();\r\n\t\t\tobj.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\nTHREE.KeyFrameAnimation.prototype.play = function ( startTime ) {\r\n\r\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\r\n\tif ( this.isPlaying === false ) {\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\t// reset key cache\r\n\r\n\t\tvar h, hl = this.hierarchy.length,\r\n\t\t\tobject,\r\n\t\t\tnode;\r\n\r\n\t\tfor ( h = 0; h < hl; h ++ ) {\r\n\r\n\t\t\tobject = this.hierarchy[ h ];\r\n\t\t\tnode = this.data.hierarchy[ h ];\r\n\r\n\t\t\tif ( node.animationCache === undefined ) {\r\n\r\n\t\t\t\tnode.animationCache = {};\r\n\t\t\t\tnode.animationCache.prevKey = null;\r\n\t\t\t\tnode.animationCache.nextKey = null;\r\n\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar keys = this.data.hierarchy[h].keys;\r\n\r\n\t\t\tif (keys.length) {\r\n\r\n\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\r\n\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\r\n\r\n\t\t\t\tthis.startTime = Math.min( keys[0].time, this.startTime );\r\n\t\t\t\tthis.endTime = Math.max( keys[keys.length - 1].time, this.endTime );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.update( 0 );\r\n\r\n\t}\r\n\r\n\tthis.isPaused = false;\r\n\r\n\tTHREE.AnimationHandler.play( this );\r\n\r\n};\r\n\r\n\r\nTHREE.KeyFrameAnimation.prototype.stop = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\tthis.isPaused  = false;\r\n\r\n\tTHREE.AnimationHandler.stop( this );\r\n\r\n\t// reset JIT matrix and remove cache\r\n\r\n\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\r\n\t\t\r\n\t\tvar obj = this.hierarchy[ h ];\r\n\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\tif ( node.animationCache !== undefined ) {\r\n\r\n\t\t\tvar original = node.animationCache.originalMatrix;\r\n\r\n\t\t\toriginal.copy( obj.matrix );\r\n\t\t\tobj.matrix = original;\r\n\r\n\t\t\tdelete node.animationCache;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Update\r\n\r\nTHREE.KeyFrameAnimation.prototype.update = function ( delta ) {\r\n\r\n\tif ( this.isPlaying === false ) return;\r\n\r\n\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t//\r\n\r\n\tvar duration = this.data.length;\r\n\r\n\tif ( this.loop === true && this.currentTime > duration ) {\r\n\r\n\t\tthis.currentTime %= duration;\r\n\r\n\t}\r\n\r\n\tthis.currentTime = Math.min( this.currentTime, duration );\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar object = this.hierarchy[ h ];\r\n\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\tvar keys = node.keys,\r\n\t\t\tanimationCache = node.animationCache;\r\n\r\n\r\n\t\tif ( keys.length ) {\r\n\r\n\t\t\tvar prevKey = animationCache.prevKey;\r\n\t\t\tvar nextKey = animationCache.nextKey;\r\n\r\n\t\t\tif ( nextKey.time <= this.currentTime ) {\r\n\r\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationCache.prevKey = prevKey;\r\n\t\t\t\tanimationCache.nextKey = nextKey;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nextKey.time >= this.currentTime ) {\r\n\r\n\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\tobject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Get next key with\r\n\r\nTHREE.KeyFrameAnimation.prototype.getNextKeyWith = function( sid, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\tkey = key % keys.length;\r\n\r\n\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn keys[ 0 ];\r\n\r\n};\r\n\r\n// Get previous key with\r\n\r\nTHREE.KeyFrameAnimation.prototype.getPrevKeyWith = function( sid, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn keys[ keys.length - 1 ];\r\n\r\n};\r\n\r\n// File:src/extras/animation/MorphAnimation.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com\r\n */\r\n\r\nTHREE.MorphAnimation = function ( mesh ) {\r\n\r\n\tthis.mesh = mesh;\r\n\tthis.frames = mesh.morphTargetInfluences.length;\r\n\tthis.currentTime = 0;\r\n\tthis.duration = 1000;\r\n\tthis.loop = true;\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimation.prototype = {\r\n\r\n\tplay: function () {\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tupdate: ( function () {\r\n\r\n\t\tvar lastFrame = 0;\r\n\t\tvar currentFrame = 0;\r\n\r\n\t\treturn function ( delta ) {\r\n\r\n\t\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\t\tthis.currentTime += delta;\r\n\r\n\t\t\tif ( this.loop === true && this.currentTime > this.duration ) {\r\n\r\n\t\t\t\tthis.currentTime %= this.duration;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\r\n\r\n\t\t\tvar interpolation = this.duration / this.frames;\r\n\t\t\tvar frame = Math.floor( this.currentTime / interpolation );\r\n\r\n\t\t\tif ( frame != currentFrame ) {\r\n\r\n\t\t\t\tthis.mesh.morphTargetInfluences[ lastFrame ] = 0;\r\n\t\t\t\tthis.mesh.morphTargetInfluences[ currentFrame ] = 1;\r\n\t\t\t\tthis.mesh.morphTargetInfluences[ frame ] = 0;\r\n\r\n\t\t\t\tlastFrame = currentFrame;\r\n\t\t\t\tcurrentFrame = frame;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.mesh.morphTargetInfluences[ frame ] = ( this.currentTime % interpolation ) / interpolation;\r\n\t\t\tthis.mesh.morphTargetInfluences[ lastFrame ] = 1 - this.mesh.morphTargetInfluences[ frame ];\r\n\r\n\t\t}\r\n\r\n\t} )()\r\n\r\n};\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.widthSegments = widthSegments || 1;\r\n\tthis.heightSegments = heightSegments || 1;\r\n\tthis.depthSegments = depthSegments || 1;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\tvar depth_half = depth / 2;\r\n\r\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\r\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\r\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\r\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\r\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\r\n\r\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\r\n\r\n\t\tvar w, ix, iy,\r\n\t\tgridX = scope.widthSegments,\r\n\t\tgridY = scope.heightSegments,\r\n\t\twidth_half = width / 2,\r\n\t\theight_half = height / 2,\r\n\t\toffset = scope.vertices.length;\r\n\r\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'z';\r\n\r\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'y';\r\n\t\t\tgridY = scope.depthSegments;\r\n\r\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\r\n\r\n\t\t\tw = 'x';\r\n\t\t\tgridX = scope.depthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tvar gridX1 = gridX + 1,\r\n\t\tgridY1 = gridY + 1,\r\n\t\tsegment_width = width / gridX,\r\n\t\tsegment_height = height / gridY,\r\n\t\tnormal = new THREE.Vector3();\r\n\r\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar vector = new THREE.Vector3();\r\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\r\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\r\n\t\t\t\tvector[ w ] = depth;\r\n\r\n\t\t\t\tscope.vertices.push( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\r\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\r\n\r\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar i, uvs = [],\r\n\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\r\n\r\n\tthis.vertices.push(center);\r\n\tuvs.push( centerUV );\r\n\r\n\tfor ( i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tvar vertex = new THREE.Vector3();\r\n\t\tvar segment = thetaStart + i / segments * thetaLength;\r\n\r\n\t\tvertex.x = radius * Math.cos( segment );\r\n\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\tthis.vertices.push( vertex );\r\n\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/CubeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n\r\nTHREE.CubeGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tconsole.warn( 'THREE.CubeGeometry has been renamed to THREE.BoxGeometry.' );\r\n\treturn new THREE.BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments );\r\n\r\n };\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded\r\n\t};\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = radialSegments || 8;\r\n\theightSegments = heightSegments || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\r\n\tvar heightHalf = height / 2;\r\n\r\n\tvar x, y, vertices = [], uvs = [];\r\n\r\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\t\tvar uvsRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = radius * Math.sin( u * Math.PI * 2 );\r\n\t\t\tvertex.y = - v * height + heightHalf;\r\n\t\t\tvertex.z = radius * Math.cos( u * Math.PI * 2 );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\t\tuvs.push( uvsRow );\r\n\r\n\t}\r\n\r\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\tvar na, nb;\r\n\r\n\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\tif ( radiusTop !== 0 ) {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\r\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\r\n\r\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x ];\r\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\r\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\r\n\r\n\t\t\tvar n1 = na.clone();\r\n\t\t\tvar n2 = na.clone();\r\n\t\t\tvar n3 = nb.clone();\r\n\t\t\tvar n4 = nb.clone();\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// top cap\r\n\r\n\tif ( openEnded === false && radiusTop > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ 0 ][ x ];\r\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// bottom cap\r\n\r\n\tif ( openEnded === false && radiusBottom > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x + 1 ].clone();\r\n\t\t\tvar uv2 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n}\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segements of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  material: <int> // material index for front and back faces\r\n *  extrudeMaterial: <int> // material index for extrusion and beveled faces\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = shapes instanceof Array ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\t}\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\tvar material = options.material;\r\n\tvar extrudeMaterial = options.extrudeMaterial;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames(extrudePath, steps, false);\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initalization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\tvar bevelPoints = [];\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices ) ;\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.log( \"die\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length,\r\n\t\tcont, clen = contour.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\tvar RAD_TO_DEGREES = 180 / Math.PI;\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\tvar EPSILON = 0.0000000001;\r\n\t\t\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shiftet by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\t\t\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\t\t\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\t\t\r\n\t\t// check for colinear edges\r\n\t\tvar colinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\t\r\n\t\tif ( Math.abs( colinear0 ) > EPSILON ) {\t\t// not colinear\r\n\t\t\t\r\n\t\t\t// length of vectors for normalizing\r\n\t\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\t\t\t\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\t\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\t\t\t\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\t\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\t\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\r\n\t\t\t// vector from inPt to intersection point\r\n\t\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\t\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y )\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\t\t\t} else {\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\t\t// handle special case of colinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > EPSILON ) {\r\n\t\t\t\tif ( v_next_x > EPSILON ) { direction_eq = true; }\r\n\t\t\t} else {\r\n\t\t\t\tif ( v_prev_x < - EPSILON ) {\r\n\t\t\t\t\tif ( v_next_x < - EPSILON ) { direction_eq = true; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( Math.sign(v_prev_y) == Math.sign(v_next_y) ) { direction_eq = true; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tvar pt_i = contour[ i ];\r\n\t\tvar pt_j = contour[ j ];\r\n\t\tvar pt_k = contour[ k ];\r\n\r\n\t\tcontourMovements[ i ]= getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ]= getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI/2 ) ) ; // curved\r\n\t\t//bs = bevelSize * t ; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[0] ).multiplyScalar(vert.x);\r\n\t\t\tbinormal.copy( splineTube.binormals[0] ).multiplyScalar(vert.y);\r\n\r\n\t\t\tposition2.copy( extrudePts[0] ).add(normal).add(binormal);\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[s] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[s] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[s] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI/2 ) ;\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0 ; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ]+ offset, face[ 1 ]+ offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( --i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\t// normal, color, material\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n \t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n \t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, extrudeMaterial ) );\r\n \t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, extrudeMaterial ) );\r\n\r\n \t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( shapes instanceof Array === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole, s;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tvar contour = vertices;\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\tvar cont, clen = contour.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points \r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2*PI) range of the lathed section\r\n//    2*pi is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = segments || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || 2 * Math.PI;\r\n\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\r\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar c = Math.cos( phi ),\r\n\t\t\ts = Math.sin( phi );\r\n\r\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar pt = points[ j ];\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\t\tvertex.x = c * pt.x - s * pt.y;\r\n\t\t\tvertex.y = s * pt.x + c * pt.y;\r\n\t\t\tvertex.z = pt.z;\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar np = points.length;\r\n\r\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\r\n\r\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\r\n\r\n\t\t\tvar base = j + np * i;\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + np;\r\n\t\t\tvar c = base + 1 + np;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\tvar u0 = i * inverseSegments;\r\n\t\t\tvar v0 = j * inversePointLength;\r\n\t\t\tvar u1 = u0 + inverseSegments;\r\n\t\t\tvar v1 = v0 + inversePointLength;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tconsole.info( 'THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint.' );\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = widthSegments || 1;\r\n\tvar gridY = heightSegments || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset     ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2     ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset     ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\r\n\r\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\r\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) { // concentric circles inside ring\r\n\r\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) { // number of segments per circle\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\r\n\t\t}\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 0; i < phiSegments; i ++ ) { // concentric circles inside ring\r\n\r\n\t\tvar thetaSegment = i * (thetaSegments + 1);\r\n\r\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) { // number of segments per circle\r\n\r\n\t\t\tvar segment = o + thetaSegment;\r\n\r\n\t\t\tvar v1 = segment;\r\n\t\t\tvar v2 = segment + thetaSegments + 1;\r\n\t\t\tvar v3 = segment + thetaSegments + 2;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\r\n\r\n\t\t\tv1 = segment;\r\n\t\t\tv2 = segment + thetaSegments + 2;\r\n\t\t\tv3 = segment + 1;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength \r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar x, y, vertices = [], uvs = [];\r\n\r\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\t\tvar uvsRow = [];\r\n\r\n\t\tfor ( x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\t\t\tvar v = y / heightSegments;\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\t\tuvs.push( uvsRow );\r\n\r\n\t}\r\n\r\n\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tvar n1 = this.vertices[ v1 ].clone().normalize();\r\n\t\t\tvar n2 = this.vertices[ v2 ].clone().normalize();\r\n\t\t\tvar n3 = this.vertices[ v3 ].clone().normalize();\r\n\t\t\tvar n4 = this.vertices[ v4 ].clone().normalize();\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x + 1 ].clone();\r\n\t\t\tvar uv2 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv3 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\tvar uv4 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\r\n\t\t\tif ( Math.abs( this.vertices[ v1 ].y ) === radius ) {\r\n\r\n\t\t\t\tuv1.x = ( uv1.x + uv2.x ) / 2;\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v3, v4, [ n1, n3, n4 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv3, uv4 ] );\r\n\r\n\t\t\t} else if ( Math.abs( this.vertices[ v3 ].y ) === radius ) {\r\n\r\n\t\t\t\tuv3.x = ( uv3.x + uv4.x ) / 2;\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For creating 3D text geometry in three.js\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  size: \t\t\t<float>, \t// size of the text\r\n *  height: \t\t<float>, \t// thickness to extrude text\r\n *  curveSegments: \t<int>,\t\t// number of points on the curves\r\n *\r\n *  font: \t\t\t<string>,\t\t// font name\r\n *  weight: \t\t<string>,\t\t// font weight (normal, bold)\r\n *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\r\n *\r\n *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\r\n *  bevelThickness: <float>, \t\t// how deep into text bevel goes\r\n *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\r\n *  }\r\n *\r\n */\r\n\r\n/*\tUsage Examples\r\n\r\n\t// TextGeometry wrapper\r\n\r\n\tvar text3d = new TextGeometry( text, options );\r\n\r\n\t// Complete manner\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\r\n\tvar text3d = new ExtrudeGeometry( textShapes, options );\r\n\r\n*/\r\n\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 8;\r\n\ttubularSegments = tubularSegments || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\r\n\r\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tp: p,\r\n\t\tq: q,\r\n\t\theightScale: heightScale\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 64;\r\n\ttubularSegments = tubularSegments || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\theightScale = heightScale || 1;\r\n\t\r\n\tvar grid = new Array( radialSegments );\r\n\tvar tang = new THREE.Vector3();\r\n\tvar n = new THREE.Vector3();\r\n\tvar bitan = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tgrid[ i ] = new Array( tubularSegments );\r\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\r\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\r\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\r\n\t\ttang.subVectors( p2, p1 );\r\n\t\tn.addVectors( p2, p1 );\r\n\r\n\t\tbitan.crossVectors( tang, n );\r\n\t\tn.crossVectors( bitan, tang );\r\n\t\tbitan.normalize();\r\n\t\tn.normalize();\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\r\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\tvar pos = new THREE.Vector3();\r\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\r\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\r\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\r\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\r\n\r\n\t\t\tvar a = grid[ i ][ j ];\r\n\t\t\tvar b = grid[ ip ][ j ];\r\n\t\t\tvar c = grid[ ip ][ jp ];\r\n\t\t\tvar d = grid[ i ][ jp ];\r\n\r\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = in_q / in_p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t\treturn new THREE.Vector3( tx, ty, tz );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tx, y, z,\r\n\t\ttx, ty, tz,\r\n\t\tu, v,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// consruct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - radius * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = radius * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? (i + 1) % segments : i + 1;\r\n\t\t\tjp = (j + 1) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\ttangent = new THREE.Vector3(),\r\n\t\tnormal = new THREE.Vector3(),\r\n\t\tbinormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tepsilon = 0.0001,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u, v;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\t\t// select an initial normal vector perpenicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i-1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i-1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i-1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > epsilon ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i-1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints-1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints-1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar midpoints = [], p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i     ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\r\n\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3 ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow(2, detail);\r\n\t\tvar cells = Math.pow(4, detail);\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++) {\r\n\r\n\t\t\t\tif ( j == 0 && i == cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 == 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1][ k + 1],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (±1, ±1, ±1)\r\n\t\t-1, -1, -1,    -1, -1,  1,\r\n\t\t-1,  1, -1,    -1,  1,  1,\r\n\t\t 1, -1, -1,     1, -1,  1,\r\n\t\t 1,  1, -1,     1,  1,  1,\r\n\r\n\t\t// (0, ±1/φ, ±φ)\r\n\t\t 0, -r, -t,     0, -r,  t,\r\n\t\t 0,  r, -t,     0,  r,  t,\r\n\r\n\t\t// (±1/φ, ±φ, 0)\r\n\t\t-r, -t,  0,    -r,  t,  0,\r\n\t\t r, -t,  0,     r,  t,  0,\r\n\r\n\t\t// (±φ, 0, ±1/φ)\r\n\t\t-t,  0, -r,     t,  0, -r,\r\n\t\t-t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, il, j, p;\r\n\tvar u, v;\r\n\r\n\tvar stackCount = stacks + 1;\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = (i + 1) * sliceCount + j + 1;\r\n\t\t\td = (i + 1) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.Geometry();\r\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\r\n\r\n\treturn function ( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\r\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\tthis.line.matrixAutoUpdate = false;\r\n\t\tthis.add( this.line );\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t}\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function ( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, length, 1 );\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( 72 ), 3 ) );\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ), THREE.LinePieces );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\nTHREE.BoxHelper.prototype.update = function ( object ) {\r\n\r\n\tvar geometry = object.geometry;\r\n\r\n\tif ( geometry.boundingBox === null ) {\r\n\r\n\t\tgeometry.computeBoundingBox();\r\n\r\n\t}\r\n\r\n\tvar min = geometry.boundingBox.min;\r\n\tvar max = geometry.boundingBox.max;\r\n\r\n\t/*\r\n\t  5____4\r\n\t1/___0/|\r\n\t| 6__|_7\r\n\t2/___3/\r\n\r\n\t0: max.x, max.y, max.z\r\n\t1: min.x, max.y, max.z\r\n\t2: min.x, min.y, max.z\r\n\t3: max.x, min.y, max.z\r\n\t4: max.x, max.y, min.z\r\n\t5: min.x, max.y, min.z\r\n\t6: min.x, min.y, min.z\r\n\t7: max.x, min.y, min.z\r\n\t*/\r\n\r\n\tvar vertices = this.geometry.attributes.position.array;\r\n\r\n\tvertices[  0 ] = max.x; vertices[  1 ] = max.y; vertices[  2 ] = max.z;\r\n\tvertices[  3 ] = min.x; vertices[  4 ] = max.y; vertices[  5 ] = max.z;\r\n\r\n\tvertices[  6 ] = min.x; vertices[  7 ] = max.y; vertices[  8 ] = max.z;\r\n\tvertices[  9 ] = min.x; vertices[ 10 ] = min.y; vertices[ 11 ] = max.z;\r\n\r\n\tvertices[ 12 ] = min.x; vertices[ 13 ] = min.y; vertices[ 14 ] = max.z;\r\n\tvertices[ 15 ] = max.x; vertices[ 16 ] = min.y; vertices[ 17 ] = max.z;\r\n\r\n\tvertices[ 18 ] = max.x; vertices[ 19 ] = min.y; vertices[ 20 ] = max.z;\r\n\tvertices[ 21 ] = max.x; vertices[ 22 ] = max.y; vertices[ 23 ] = max.z;\r\n\r\n\t//\r\n\r\n\tvertices[ 24 ] = max.x; vertices[ 25 ] = max.y; vertices[ 26 ] = min.z;\r\n\tvertices[ 27 ] = min.x; vertices[ 28 ] = max.y; vertices[ 29 ] = min.z;\r\n\r\n\tvertices[ 30 ] = min.x; vertices[ 31 ] = max.y; vertices[ 32 ] = min.z;\r\n\tvertices[ 33 ] = min.x; vertices[ 34 ] = min.y; vertices[ 35 ] = min.z;\r\n\r\n\tvertices[ 36 ] = min.x; vertices[ 37 ] = min.y; vertices[ 38 ] = min.z;\r\n\tvertices[ 39 ] = max.x; vertices[ 40 ] = min.y; vertices[ 41 ] = min.z;\r\n\r\n\tvertices[ 42 ] = max.x; vertices[ 43 ] = min.y; vertices[ 44 ] = min.z;\r\n\tvertices[ 45 ] = max.x; vertices[ 46 ] = max.y; vertices[ 47 ] = min.z;\r\n\r\n\t//\r\n\r\n\tvertices[ 48 ] = max.x; vertices[ 49 ] = max.y; vertices[ 50 ] = max.z;\r\n\tvertices[ 51 ] = max.x; vertices[ 52 ] = max.y; vertices[ 53 ] = min.z;\r\n\r\n\tvertices[ 54 ] = min.x; vertices[ 55 ] = max.y; vertices[ 56 ] = max.z;\r\n\tvertices[ 57 ] = min.x; vertices[ 58 ] = max.y; vertices[ 59 ] = min.z;\r\n\r\n\tvertices[ 60 ] = min.x; vertices[ 61 ] = min.y; vertices[ 62 ] = max.z;\r\n\tvertices[ 63 ] = min.x; vertices[ 64 ] = min.y; vertices[ 65 ] = min.z;\r\n\r\n\tvertices[ 66 ] = max.x; vertices[ 67 ] = min.y; vertices[ 68 ] = max.z;\r\n\tvertices[ 69 ] = max.x; vertices[ 70 ] = min.y; vertices[ 71 ] = min.z;\r\n\r\n\tthis.geometry.attributes.position.needsUpdate = true;\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n\tthis.camera = camera;\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\t\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tvar setPoint = function ( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t);\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3(),\r\n\t\tnew THREE.Vector3()\r\n\t);\r\n\r\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.targetLine = new THREE.Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tthis.lightPlane.lookAt( v3 );\r\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) { return a - b };\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar geometry2 = object.geometry.clone();\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\tvar numEdges = 0;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\tvar index = 0;\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) < 0.9999 ) { // hardwired const OK\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords[ index ++ ] = vertex.x;\r\n\t\t\tcoords[ index ++ ] = vertex.y;\r\n\t\t\tcoords[ index ++ ] = vertex.z;\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords[ index ++ ] = vertex.x;\r\n\t\t\tcoords[ index ++ ] = vertex.y;\r\n\t\t\tcoords[ index ++ ] = vertex.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tvar faces = this.object.geometry.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.normalMatrix = new THREE.Matrix3();\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = function () {\r\n\r\n\tvar vertices = this.geometry.vertices;\r\n\r\n\tvar object = this.object;\r\n\tvar objectVertices = object.geometry.vertices;\r\n\tvar objectFaces = object.geometry.faces;\r\n\tvar objectWorldMatrix = object.matrixWorld;\r\n\r\n\tobject.updateMatrixWorld( true );\r\n\r\n\tthis.normalMatrix.getNormalMatrix( objectWorldMatrix );\r\n\r\n\tfor ( var i = 0, i2 = 0, l = objectFaces.length; i < l; i ++, i2 += 2 ) {\r\n\r\n\t\tvar face = objectFaces[ i ];\r\n\r\n\t\tvertices[ i2 ].copy( objectVertices[ face.a ] )\r\n\t\t\t.add( objectVertices[ face.b ] )\r\n\t\t\t.add( objectVertices[ face.c ] )\r\n\t\t\t.divideScalar( 3 )\r\n\t\t\t.applyMatrix4( objectWorldMatrix );\r\n\r\n\t\tvertices[ i2 + 1 ].copy( face.normal )\r\n\t\t\t.applyMatrix3( this.normalMatrix )\r\n\t\t\t.normalize()\r\n\t\t\t.multiplyScalar( this.size )\r\n\t\t\t.add( vertices[ i2 ] );\r\n\r\n\t}\r\n\r\n\tthis.geometry.verticesNeedUpdate = true;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tthis.color1 = new THREE.Color( 0x444444 );\r\n\tthis.color2 = new THREE.Color( 0x888888 );\r\n\r\n\tfor ( var i = - size; i <= size; i += step ) {\r\n\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t);\r\n\r\n\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\r\n\t\tgeometry.colors.push( color, color, color, color );\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\r\n\tthis.color1.set( colorCenterLine );\r\n\tthis.color2.set( colorGrid );\r\n\r\n\tthis.geometry.colorsNeedUpdate = true;\r\n\r\n}\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize, arrowLength, domeSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t}\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\r\n\tgeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\r\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n\tthis.cone = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tvar vertices = object.geometry.vertices;\r\n\r\n\tvar faces = object.geometry.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.normalMatrix = new THREE.Matrix3();\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function ( object ) {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function( object ) {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tthis.normalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar vertices = this.geometry.vertices;\r\n\r\n\t\tvar verts = this.object.geometry.vertices;\r\n\r\n\t\tvar faces = this.object.geometry.faces;\r\n\r\n\t\tvar worldMatrix = this.object.matrixWorld;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\r\n\t\t\t\tvar vertex = verts[ vertexId ];\r\n\r\n\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\r\n\r\n\t\t\t\tv1.copy( normal ).applyMatrix3( this.normalMatrix ).normalize().multiplyScalar( this.size );\r\n\r\n\t\t\t\tv1.add( vertices[ idx ] );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tvertices[ idx ].copy( v1 );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.geometry.verticesNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}());\r\n\r\n// File:src/extras/helpers/VertexTangentsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexTangentsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x0000ff;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tvar vertices = object.geometry.vertices;\r\n\r\n\tvar faces = object.geometry.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexTangentsHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\nTHREE.VertexTangentsHelper.prototype.update = ( function ( object ) {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function( object ) {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tvar vertices = this.geometry.vertices;\r\n\r\n\t\tvar verts = this.object.geometry.vertices;\r\n\r\n\t\tvar faces = this.object.geometry.faces;\r\n\r\n\t\tvar worldMatrix = this.object.matrixWorld;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\r\n\t\t\t\tvar vertex = verts[ vertexId ];\r\n\r\n\t\t\t\tvar tangent = face.vertexTangents[ j ];\r\n\r\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\r\n\r\n\t\t\t\tv1.copy( tangent ).transformDirection( worldMatrix ).multiplyScalar( this.size );\r\n\r\n\t\t\t\tv1.add( vertices[ idx ] );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tvertices[ idx ].copy( v1 );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.geometry.verticesNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}());\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) { return a - b };\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = object.geometry.vertices;\r\n\t\tvar faces = object.geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( object.geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( object.geometry.attributes.index !== undefined ) { // Indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = object.geometry.attributes.position.array;\r\n\t\t\tvar indices = object.geometry.attributes.index.array;\r\n\t\t\tvar drawcalls = object.geometry.drawcalls;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( drawcalls.length === 0 ) {\r\n\r\n\t\t\t\tdrawcalls = [ { count : indices.length, index : 0, start : 0 } ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar start = drawcalls[ o ].start;\r\n\t\t\t\tvar count = drawcalls[ o ].count;\r\n\t\t\t\tvar index = drawcalls[ o ].index;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = index + indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = index + indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = 3 * edges[ 2 * i + j];\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else { // non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = object.geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.Line.prototype );\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstartFrame: start,\r\n\t\tendFrame: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\t\t\tvar num = chunks[ 2 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"animation[\" + name + \"] undefined\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.startFrame + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}